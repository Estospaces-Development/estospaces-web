import{u as D,h as R,r as t,i as k,j as e,k as $,L as u}from"./index-DOVRzmjE.js";import{A as w}from"./AuthLayout-FGIN97Hx.js";import{E as q}from"./eye-off-B7PrfAnN.js";import{E as U}from"./eye-ZHS1zas0.js";function M(){const a=D(),{isAuthenticated:h,loading:s,getRole:o,login:E}=R(),[n,v]=t.useState(""),[d,S]=t.useState(""),[i,P]=t.useState(!1),[l,c]=t.useState(!1),[m,p]=t.useState(""),[x,y]=t.useState(""),[b,g]=t.useState("");t.useEffect(()=>{if(h&&!s){const r=o();a(k(r))}},[h,s,o,a]);const L=r=>r?/^\S+@\S+\.\S+$/.test(r)?"":"Enter a valid email":"Email is required",A=r=>r?r.length<6?"Password must be at least 6 characters":"":"Password is required",C=async r=>{if(r.preventDefault(),l)return;const f=L(n),j=A(d);if(p(f),y(j),g(""),!(f||j)){c(!0);try{const N=await E(n,d);if(!N.success){g(N.error||"Login failed. Please try again."),c(!1);return}const z=o();a(k(z))}catch{g("An unexpected error occurred. Please try again."),c(!1)}}};return s?e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Checking session..."})]})}):e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:"/images/auth/logo.jpg",alt:"Estospaces",width:160,height:40,className:"h-10 w-auto"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 text-center",children:"Sign in to Estospaces"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-8 text-center",children:"Enter your email and password to continue"}),e.jsxs("form",{onSubmit:C,className:"w-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Enter your email",value:n,onChange:r=>{v(r.target.value),p("")},className:`w-full px-4 py-3 border rounded-md outline-none transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 ${m?"border-red-400 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:border-primary"}`}),m&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",placeholder:"Enter your password",value:d,onChange:r=>{S(r.target.value),y("")},className:`w-full px-4 py-3 pr-12 border rounded-md outline-none transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 ${x?"border-red-400 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:border-primary"}`}),e.jsx("button",{type:"button",onClick:()=>P(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(q,{size:20}):e.jsx(U,{size:20})})]}),x&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x})]}),e.jsx("div",{className:"text-right mb-6",children:e.jsx("span",{className:"text-primary text-sm font-medium cursor-pointer hover:underline",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:l,className:"w-full py-3 bg-primary text-white font-medium rounded-md hover:bg-opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign In"}),b&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md flex items-center gap-2",children:[e.jsx($,{className:"text-red-500 dark:text-red-400 flex-shrink-0",size:18}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:b})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-md w-full",children:[e.jsx("p",{className:"text-orange-700 dark:text-orange-300 text-xs font-medium mb-1",children:"Demo Credentials:"}),e.jsx("p",{className:"text-orange-600 dark:text-orange-400 text-xs",children:"Manager: manager@gmail.com / Estospaces@123"}),e.jsx("p",{className:"text-orange-600 dark:text-orange-400 text-xs",children:"User: user@gmail.com / Estospaces@123"})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-6",children:["Don't have an account?"," ",e.jsx(u,{to:"/register",className:"text-primary font-medium hover:underline",children:"Sign Up"})]}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-12 text-center leading-relaxed",children:["By continuing you agree to Estospaces",e.jsx("br",{}),e.jsx(u,{to:"/terms",className:"text-primary hover:underline",children:"terms & conditions"})," Â· ",e.jsx(u,{to:"/privacy",className:"text-primary hover:underline",children:"privacy policy"})]})]})})}export{M as default};
//# sourceMappingURL=page-DtOwUmi8.js.map
