{"version":3,"file":"page-DSOI3tnn.js","sources":["../../node_modules/lucide-react/dist/esm/icons/bold.js","../../node_modules/lucide-react/dist/esm/icons/dumbbell.js","../../node_modules/lucide-react/dist/esm/icons/italic.js","../../node_modules/lucide-react/dist/esm/icons/link.js","../../node_modules/lucide-react/dist/esm/icons/tree-pine.js","../../node_modules/lucide-react/dist/esm/icons/underline.js","../../node_modules/lucide-react/dist/esm/icons/waves.js","../../node_modules/lucide-react/dist/esm/icons/wifi.js","../../src/services/addressService.ts","../../src/components/ui/AddressSection.tsx","../../src/pages/manager/dashboard/properties/add/page.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8\", key: \"mg9rjx\" }\n  ]\n];\nconst Bold = createLucideIcon(\"bold\", __iconNode);\n\nexport { __iconNode, Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z\",\n      key: \"9m4mmf\"\n    }\n  ],\n  [\"path\", { d: \"m2.5 21.5 1.4-1.4\", key: \"17g3f0\" }],\n  [\"path\", { d: \"m20.1 3.9 1.4-1.4\", key: \"1qn309\" }],\n  [\n    \"path\",\n    {\n      d: \"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z\",\n      key: \"1t2c92\"\n    }\n  ],\n  [\"path\", { d: \"m9.6 14.4 4.8-4.8\", key: \"6umqxw\" }]\n];\nconst Dumbbell = createLucideIcon(\"dumbbell\", __iconNode);\n\nexport { __iconNode, Dumbbell as default };\n//# sourceMappingURL=dumbbell.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n];\nconst Italic = createLucideIcon(\"italic\", __iconNode);\n\nexport { __iconNode, Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n];\nconst Link = createLucideIcon(\"link\", __iconNode);\n\nexport { __iconNode, Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z\",\n      key: \"cpyugq\"\n    }\n  ],\n  [\"path\", { d: \"M12 22v-3\", key: \"kmzjlo\" }]\n];\nconst TreePine = createLucideIcon(\"tree-pine\", __iconNode);\n\nexport { __iconNode, TreePine as default };\n//# sourceMappingURL=tree-pine.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M6 4v6a6 6 0 0 0 12 0V4\", key: \"9kb039\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"20\", y2: \"20\", key: \"nun2al\" }]\n];\nconst Underline = createLucideIcon(\"underline\", __iconNode);\n\nexport { __iconNode, Underline as default };\n//# sourceMappingURL=underline.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"knzxuh\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"2jd2cc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"rd2r6e\"\n    }\n  ]\n];\nconst Waves = createLucideIcon(\"waves\", __iconNode);\n\nexport { __iconNode, Waves as default };\n//# sourceMappingURL=waves.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 20h.01\", key: \"zekei9\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 20 0\", key: \"dnpr2z\" }],\n  [\"path\", { d: \"M5 12.859a10 10 0 0 1 14 0\", key: \"1x1e6c\" }],\n  [\"path\", { d: \"M8.5 16.429a5 5 0 0 1 7 0\", key: \"1bycff\" }]\n];\nconst Wifi = createLucideIcon(\"wifi\", __iconNode);\n\nexport { __iconNode, Wifi as default };\n//# sourceMappingURL=wifi.js.map\n","export interface Country {\r\n    id: string;\r\n    name: string;\r\n    code: string;\r\n    phone_code: string | null;\r\n    currency_code: string | null;\r\n}\r\n\r\nexport interface State {\r\n    id: string;\r\n    name: string;\r\n    code: string | null;\r\n    country_id: string;\r\n}\r\n\r\nexport interface City {\r\n    id: string;\r\n    name: string;\r\n    state_id: string;\r\n    postal_code: string | null;\r\n}\r\n\r\nexport interface AddressData {\r\n    countryId: string;\r\n    countryName: string;\r\n    countryCode: string;\r\n    stateId: string;\r\n    stateName: string;\r\n    stateCode: string | null;\r\n    cityId: string;\r\n    cityName: string;\r\n    addressLine1: string;\r\n    addressLine2: string;\r\n    postalCode: string;\r\n}\r\n\r\n// Mock Data\r\nconst MOCK_COUNTRIES: Country[] = [\r\n    { id: '1', name: 'United States', code: 'US', phone_code: '+1', currency_code: 'USD' },\r\n    { id: '2', name: 'United Kingdom', code: 'GB', phone_code: '+44', currency_code: 'GBP' },\r\n    { id: '3', name: 'India', code: 'IN', phone_code: '+91', currency_code: 'INR' },\r\n    { id: '4', name: 'Canada', code: 'CA', phone_code: '+1', currency_code: 'CAD' },\r\n    { id: '5', name: 'Australia', code: 'AU', phone_code: '+61', currency_code: 'AUD' },\r\n];\r\n\r\nconst MOCK_STATES: Record<string, State[]> = {\r\n    '1': [ // US\r\n        { id: '101', name: 'California', code: 'CA', country_id: '1' },\r\n        { id: '102', name: 'New York', code: 'NY', country_id: '1' },\r\n        { id: '103', name: 'Texas', code: 'TX', country_id: '1' },\r\n    ],\r\n    '2': [ // UK\r\n        { id: '201', name: 'England', code: 'ENG', country_id: '2' },\r\n        { id: '202', name: 'Scotland', code: 'SCT', country_id: '2' },\r\n    ],\r\n};\r\n\r\nconst MOCK_CITIES: Record<string, City[]> = {\r\n    '101': [ // California\r\n        { id: '1001', name: 'Los Angeles', state_id: '101', postal_code: '90001' },\r\n        { id: '1002', name: 'San Francisco', state_id: '101', postal_code: '94101' },\r\n    ],\r\n    '102': [ // New York\r\n        { id: '1003', name: 'New York City', state_id: '102', postal_code: '10001' },\r\n    ],\r\n};\r\n\r\nexport async function getCountries(): Promise<{ data: Country[] | null; error: string | null }> {\r\n    return { data: MOCK_COUNTRIES, error: null };\r\n}\r\n\r\nexport async function getStatesByCountry(countryId: string): Promise<{ data: State[] | null; error: string | null }> {\r\n    return { data: MOCK_STATES[countryId] || [], error: null };\r\n}\r\n\r\nexport async function getCitiesByState(stateId: string): Promise<{ data: City[] | null; error: string | null }> {\r\n    return { data: MOCK_CITIES[stateId] || [], error: null };\r\n}\r\n\r\nexport async function resolveAddressToIds(\r\n    countryName: string | undefined,\r\n    countryCode: string | undefined,\r\n    stateName: string | undefined,\r\n    cityName: string | undefined\r\n): Promise<{\r\n    countryId: string | null;\r\n    stateId: string | null;\r\n    cityId: string | null;\r\n    error: string | null;\r\n}> {\r\n    return { countryId: null, stateId: null, cityId: null, error: null };\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\nimport { MapPin, ChevronDown, Loader2, AlertCircle, RefreshCw } from 'lucide-react';\r\nimport {\r\n    getCountries,\r\n    getStatesByCountry,\r\n    getCitiesByState,\r\n    resolveAddressToIds,\r\n    type Country,\r\n    type State,\r\n    type City,\r\n} from '../../services/addressService';\r\n\r\nexport interface AddressFormData {\r\n    countryId: string;\r\n    countryName: string;\r\n    countryCode: string;\r\n    stateId: string;\r\n    stateName: string;\r\n    stateCode: string;\r\n    cityId: string;\r\n    cityName: string;\r\n    addressLine1: string;\r\n    addressLine2: string;\r\n    postalCode: string;\r\n    neighborhood: string;\r\n    landmark: string;\r\n}\r\n\r\ninterface AddressSectionProps {\r\n    value: AddressFormData;\r\n    onChange: (data: AddressFormData) => void;\r\n    errors?: Record<string, string>;\r\n    disabled?: boolean;\r\n    required?: boolean;\r\n    // For edit mode - existing values to preload\r\n    initialCountry?: string;\r\n    initialCountryCode?: string;\r\n    initialState?: string;\r\n    initialCity?: string;\r\n}\r\n\r\nconst AddressSection = ({\r\n    value,\r\n    onChange,\r\n    errors = {},\r\n    disabled = false,\r\n    required = true,\r\n    initialCountry,\r\n    initialCountryCode,\r\n    initialState,\r\n    initialCity,\r\n}: AddressSectionProps) => {\r\n    // Data states\r\n    const [countries, setCountries] = useState<Country[]>([]);\r\n    const [states, setStates] = useState<State[]>([]);\r\n    const [cities, setCities] = useState<City[]>([]);\r\n\r\n    // Loading states\r\n    const [loadingCountries, setLoadingCountries] = useState(true);\r\n    const [loadingStates, setLoadingStates] = useState(false);\r\n    const [loadingCities, setLoadingCities] = useState(false);\r\n\r\n    // Error states\r\n    const [countryError, setCountryError] = useState<string | null>(null);\r\n    const [stateError, setStateError] = useState<string | null>(null);\r\n    const [cityError, setCityError] = useState<string | null>(null);\r\n\r\n    // Track if we've initialized with IDs to avoid re-initialization\r\n    const initializedRef = useRef<string | null>(null);\r\n    const [initialLoadComplete, setInitialLoadComplete] = useState(false);\r\n\r\n    // Load countries on mount\r\n    useEffect(() => {\r\n        const loadCountries = async () => {\r\n            setLoadingCountries(true);\r\n            setCountryError(null);\r\n\r\n            const { data, error } = await getCountries();\r\n\r\n            if (error) {\r\n                setCountryError(error);\r\n                setLoadingCountries(false);\r\n                return;\r\n            }\r\n\r\n            setCountries(data || []);\r\n            setLoadingCountries(false);\r\n        };\r\n\r\n        loadCountries();\r\n    }, []);\r\n\r\n    // Initialize with IDs when countries are loaded and we have IDs\r\n    useEffect(() => {\r\n        const initializeWithIds = async () => {\r\n            // Skip if countries not loaded\r\n            if (!countries.length) return;\r\n\r\n            // Case 1: We have IDs - load dependent data and populate names\r\n            if (value.countryId) {\r\n                const idKey = `${value.countryId}-${value.stateId || ''}-${value.cityId || ''}`;\r\n\r\n                // Skip if already initialized for these IDs\r\n                if (initializedRef.current === idKey) return;\r\n\r\n                const country = countries.find(c => c.id === value.countryId);\r\n                if (country) {\r\n                    // Load states for this country\r\n                    const { data: statesData } = await getStatesByCountry(value.countryId);\r\n                    if (statesData) {\r\n                        setStates(statesData);\r\n\r\n                        // If we have stateId, load cities\r\n                        let citiesData = null;\r\n                        if (value.stateId) {\r\n                            const citiesResult = await getCitiesByState(value.stateId);\r\n                            if (citiesResult.data) {\r\n                                citiesData = citiesResult.data;\r\n                                setCities(citiesData);\r\n                            }\r\n                        }\r\n\r\n                        // Update form with names if missing (keep IDs)\r\n                        const state = statesData.find(s => s.id === value.stateId);\r\n                        const city = citiesData?.find(c => c.id === value.cityId);\r\n\r\n                        const needsUpdate = !value.countryName ||\r\n                            (value.stateId && !value.stateName) ||\r\n                            (value.cityId && !value.cityName);\r\n\r\n                        if (needsUpdate) {\r\n                            onChange({\r\n                                ...value,\r\n                                countryName: country.name,\r\n                                countryCode: country.code || value.countryCode,\r\n                                stateName: state?.name || value.stateName || '',\r\n                                stateCode: state?.code || value.stateCode || '',\r\n                                cityName: city?.name || value.cityName || '',\r\n                            });\r\n                        }\r\n                        initializedRef.current = idKey;\r\n                        setInitialLoadComplete(true);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Case 2: We have names but no IDs - resolve them from names (only once)\r\n            if ((initialCountry || initialCountryCode) && !value.countryId && initialCountry && !initialLoadComplete) {\r\n                const { countryId, stateId, cityId } = await resolveAddressToIds(\r\n                    initialCountry,\r\n                    initialCountryCode,\r\n                    initialState,\r\n                    initialCity\r\n                );\r\n\r\n                if (countryId) {\r\n                    const country = countries.find(c => c.id === countryId);\r\n                    if (country) {\r\n                        const { data: statesData } = await getStatesByCountry(countryId);\r\n                        if (statesData) {\r\n                            setStates(statesData);\r\n\r\n                            if (stateId) {\r\n                                const { data: citiesData } = await getCitiesByState(stateId);\r\n                                if (citiesData) {\r\n                                    setCities(citiesData);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        const state = statesData?.find(s => s.id === stateId);\r\n                        const cityData = stateId ? (await getCitiesByState(stateId)).data : null;\r\n                        const city = cityData?.find(c => c.id === cityId);\r\n\r\n                        onChange({\r\n                            ...value,\r\n                            countryId,\r\n                            countryName: country.name,\r\n                            countryCode: country.code,\r\n                            stateId: stateId || '',\r\n                            stateName: state?.name || initialState || '',\r\n                            stateCode: state?.code || '',\r\n                            cityId: cityId || '',\r\n                            cityName: city?.name || initialCity || '',\r\n                        });\r\n\r\n                        const resolvedIdKey = `${countryId}-${stateId || ''}-${cityId || ''}`;\r\n                        initializedRef.current = resolvedIdKey;\r\n                    }\r\n                }\r\n                setInitialLoadComplete(true);\r\n            } else if (!value.countryId && !initialCountry) {\r\n                setInitialLoadComplete(true);\r\n            }\r\n        };\r\n\r\n        initializeWithIds();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [countries.length, value.countryId, value.stateId, value.cityId]);\r\n\r\n    // Load states when country changes (runs after initialization)\r\n    useEffect(() => {\r\n        const loadStates = async () => {\r\n            if (!value.countryId) {\r\n                setStates([]);\r\n                setCities([]);\r\n                return;\r\n            }\r\n\r\n            // Skip if countries not loaded yet\r\n            if (countries.length === 0) return;\r\n\r\n            // Skip if states already loaded for this country\r\n            const country = countries.find(c => c.id === value.countryId);\r\n            if (country && states.length > 0) {\r\n                // States already loaded, just ensure cities are loaded if we have stateId\r\n                if (value.stateId && cities.length === 0) {\r\n                    const { data: citiesData } = await getCitiesByState(value.stateId);\r\n                    if (citiesData) {\r\n                        setCities(citiesData);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Don't reload if initialization is handling it\r\n            const idKey = `${value.countryId}-${value.stateId || ''}-${value.cityId || ''}`;\r\n            if (initializedRef.current === idKey && initialLoadComplete) {\r\n                return;\r\n            }\r\n\r\n            setLoadingStates(true);\r\n            setStateError(null);\r\n\r\n            const { data, error } = await getStatesByCountry(value.countryId);\r\n\r\n            if (error) {\r\n                setStateError(error);\r\n                setLoadingStates(false);\r\n                return;\r\n            }\r\n\r\n            setStates(data || []);\r\n            setLoadingStates(false);\r\n\r\n            // If we have a stateId, load cities for that state\r\n            if (value.stateId && (data?.length ?? 0) > 0) {\r\n                const { data: citiesData, error: citiesError } = await getCitiesByState(value.stateId);\r\n                if (!citiesError && citiesData) {\r\n                    setCities(citiesData);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Only load if countries are available and we have a countryId\r\n        if (countries.length > 0 && value.countryId) {\r\n            loadStates();\r\n        }\r\n    }, [value.countryId, countries.length]);\r\n\r\n    // Load cities when state changes (including when initialized with ID)\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n\r\n        const loadCities = async () => {\r\n            if (!value.stateId) {\r\n                if (isMounted) {\r\n                    setCities([]);\r\n                    setLoadingCities(false);\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Skip if cities already loaded for this state\r\n            if (cities.length > 0) {\r\n                // Check if current cities list is for this state\r\n                const state = states.find(s => s.id === value.stateId);\r\n                if (state) {\r\n                    // Cities already loaded, skip\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Wait for states to be loaded\r\n            if (states.length === 0 || !states.find(s => s.id === value.stateId)) {\r\n                // States not loaded yet for this state, wait\r\n                return;\r\n            }\r\n\r\n            if (isMounted) {\r\n                setLoadingCities(true);\r\n                setCityError(null);\r\n            }\r\n\r\n            const { data, error } = await getCitiesByState(value.stateId);\r\n\r\n            if (!isMounted) return;\r\n\r\n            if (error) {\r\n                setCityError(error);\r\n                setLoadingCities(false);\r\n                return;\r\n            }\r\n\r\n            if (isMounted) {\r\n                setCities(data || []);\r\n                setLoadingCities(false);\r\n            }\r\n        };\r\n\r\n        // Only load cities if we have stateId and states are loaded\r\n        if (value.stateId && states.length > 0) {\r\n            loadCities();\r\n        }\r\n\r\n        return () => {\r\n            isMounted = false;\r\n        };\r\n    }, [value.stateId, states.length]);\r\n\r\n    // Handlers\r\n    const handleCountryChange = useCallback((countryId: string) => {\r\n        const country = countries.find(c => c.id === countryId);\r\n\r\n        onChange({\r\n            ...value,\r\n            countryId,\r\n            countryName: country?.name || '',\r\n            countryCode: country?.code || '',\r\n            // Clear dependent fields\r\n            stateId: '',\r\n            stateName: '',\r\n            stateCode: '',\r\n            cityId: '',\r\n            cityName: '',\r\n        });\r\n\r\n        // Clear states and cities\r\n        setStates([]);\r\n        setCities([]);\r\n    }, [countries, value, onChange]);\r\n\r\n    const handleStateChange = useCallback((stateId: string) => {\r\n        const state = states.find(s => s.id === stateId);\r\n\r\n        // Clear cities first before updating state\r\n        setCities([]);\r\n\r\n        onChange({\r\n            ...value,\r\n            stateId,\r\n            stateName: state?.name || '',\r\n            stateCode: state?.code || '',\r\n            // Clear dependent fields\r\n            cityId: '',\r\n            cityName: '',\r\n        });\r\n    }, [states, value, onChange]);\r\n\r\n    const handleCityChange = useCallback((cityId: string) => {\r\n        const city = cities.find(c => c.id === cityId);\r\n\r\n        onChange({\r\n            ...value,\r\n            cityId,\r\n            cityName: city?.name || '',\r\n        });\r\n    }, [cities, value, onChange]);\r\n\r\n    const handleTextChange = useCallback((field: keyof AddressFormData, fieldValue: string) => {\r\n        onChange({\r\n            ...value,\r\n            [field]: fieldValue,\r\n        });\r\n    }, [value, onChange]);\r\n\r\n    // Handler for postal code - only allows integers\r\n    const handlePostalCodeChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const inputValue = e.target.value;\r\n        // Only allow digits (0-9)\r\n        const numericValue = inputValue.replace(/\\D/g, '');\r\n        handleTextChange('postalCode', numericValue);\r\n    }, [handleTextChange]);\r\n\r\n    // Retry handlers\r\n    const retryCountries = useCallback(async () => {\r\n        setLoadingCountries(true);\r\n        setCountryError(null);\r\n        const { data, error } = await getCountries();\r\n        if (error) {\r\n            setCountryError(error);\r\n        } else {\r\n            setCountries(data || []);\r\n        }\r\n        setLoadingCountries(false);\r\n    }, []);\r\n\r\n    const retryStates = useCallback(async () => {\r\n        if (!value.countryId) return;\r\n        setLoadingStates(true);\r\n        setStateError(null);\r\n        const { data, error } = await getStatesByCountry(value.countryId);\r\n        if (error) {\r\n            setStateError(error);\r\n        } else {\r\n            setStates(data || []);\r\n        }\r\n        setLoadingStates(false);\r\n    }, [value.countryId]);\r\n\r\n    const retryCities = useCallback(async () => {\r\n        if (!value.stateId) return;\r\n        setLoadingCities(true);\r\n        setCityError(null);\r\n        const { data, error } = await getCitiesByState(value.stateId);\r\n        if (error) {\r\n            setCityError(error);\r\n        } else {\r\n            setCities(data || []);\r\n        }\r\n        setLoadingCities(false);\r\n    }, [value.stateId]);\r\n\r\n    // Computed values\r\n    const isStateDisabled = useMemo(() => {\r\n        return disabled || !value.countryId || loadingStates;\r\n    }, [disabled, value.countryId, loadingStates]);\r\n\r\n    const isCityDisabled = useMemo(() => {\r\n        return disabled || !value.stateId || loadingCities;\r\n    }, [disabled, value.stateId, loadingCities]);\r\n\r\n    // Render dropdown with loading and error states\r\n    const renderSelect = (\r\n        id: string,\r\n        label: string,\r\n        value: string,\r\n        options: { id: string; name: string }[],\r\n        onChange: (value: string) => void,\r\n        isLoading: boolean,\r\n        isDisabled: boolean,\r\n        error: string | null,\r\n        onRetry: () => void,\r\n        placeholder: string,\r\n        validationError?: string\r\n    ) => (\r\n        <div>\r\n            <label\r\n                htmlFor={id}\r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n            >\r\n                {label} {required && <span className=\"text-red-500\">*</span>}\r\n            </label>\r\n            <div className=\"relative\">\r\n                <select\r\n                    id={id}\r\n                    value={value}\r\n                    onChange={(e) => onChange(e.target.value)}\r\n                    disabled={isDisabled || isLoading}\r\n                    className={`\r\n            w-full px-3 py-2.5 pr-10 appearance-none\r\n            border rounded-lg\r\n            bg-white dark:bg-gray-800\r\n            text-gray-900 dark:text-gray-100\r\n            focus:ring-2 focus:ring-primary focus:border-primary\r\n            disabled:bg-gray-100 dark:disabled:bg-gray-900\r\n            disabled:text-gray-500 dark:disabled:text-gray-500\r\n            disabled:cursor-not-allowed\r\n            transition-colors duration-200\r\n            ${validationError ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 dark:border-gray-600'}\r\n          `}\r\n                >\r\n                    <option value=\"\">{isLoading ? 'Loading...' : placeholder}</option>\r\n                    {options.map((option) => (\r\n                        <option key={option.id} value={option.id}>\r\n                            {option.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                {/* Dropdown icon or loading spinner */}\r\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\r\n                    {isLoading ? (\r\n                        <Loader2 className=\"w-4 h-4 text-gray-400 animate-spin\" />\r\n                    ) : (\r\n                        <ChevronDown className=\"w-4 h-4 text-gray-400\" />\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Error message with retry */}\r\n            {error && (\r\n                <div className=\"mt-1 flex items-center gap-2 text-sm text-red-600 dark:text-red-400\">\r\n                    <AlertCircle className=\"w-4 h-4\" />\r\n                    <span>{error}</span>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onRetry}\r\n                        className=\"ml-2 flex items-center gap-1 text-primary hover:underline\"\r\n                    >\r\n                        <RefreshCw className=\"w-3 h-3\" />\r\n                        Retry\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Validation error */}\r\n            {validationError && !error && (\r\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationError}</p>\r\n            )}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Section Header */}\r\n            <div className=\"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700\">\r\n                <MapPin className=\"w-5 h-5 text-primary\" />\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\r\n                    Address Details\r\n                </h3>\r\n            </div>\r\n\r\n            {/* Country, State, City Row */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                {/* Country */}\r\n                {renderSelect(\r\n                    'country',\r\n                    'Country',\r\n                    value.countryId,\r\n                    countries,\r\n                    handleCountryChange,\r\n                    loadingCountries,\r\n                    disabled,\r\n                    countryError,\r\n                    retryCountries,\r\n                    'Select Country',\r\n                    errors.country\r\n                )}\r\n\r\n                {/* State */}\r\n                {renderSelect(\r\n                    'state',\r\n                    'State / Province',\r\n                    value.stateId,\r\n                    states,\r\n                    handleStateChange,\r\n                    loadingStates,\r\n                    isStateDisabled,\r\n                    stateError,\r\n                    retryStates,\r\n                    value.countryId ? 'Select State' : 'Select Country first',\r\n                    errors.state\r\n                )}\r\n\r\n                {/* City */}\r\n                {renderSelect(\r\n                    'city',\r\n                    'City',\r\n                    value.cityId,\r\n                    cities,\r\n                    handleCityChange,\r\n                    loadingCities,\r\n                    isCityDisabled,\r\n                    cityError,\r\n                    retryCities,\r\n                    value.stateId ? 'Select City' : 'Select State first',\r\n                    errors.city\r\n                )}\r\n            </div>\r\n\r\n            {/* Address Lines */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {/* Address Line 1 */}\r\n                <div>\r\n                    <label\r\n                        htmlFor=\"addressLine1\"\r\n                        className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                    >\r\n                        Street Address {required && <span className=\"text-red-500\">*</span>}\r\n                    </label>\r\n                    <input\r\n                        id=\"addressLine1\"\r\n                        type=\"text\"\r\n                        value={value.addressLine1}\r\n                        onChange={(e) => handleTextChange('addressLine1', e.target.value)}\r\n                        disabled={disabled}\r\n                        placeholder=\"Enter street address\"\r\n                        className={`\r\n              w-full px-3 py-2.5\r\n              border rounded-lg\r\n              bg-white dark:bg-gray-800\r\n              text-gray-900 dark:text-gray-100\r\n              placeholder-gray-400 dark:placeholder-gray-500\r\n              focus:ring-2 focus:ring-primary focus:border-primary\r\n              disabled:bg-gray-100 dark:disabled:bg-gray-900\r\n              disabled:cursor-not-allowed\r\n              transition-colors duration-200\r\n              ${errors.addressLine1 ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'}\r\n            `}\r\n                    />\r\n                    {errors.addressLine1 && (\r\n                        <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.addressLine1}</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Address Line 2 */}\r\n                <div>\r\n                    <label\r\n                        htmlFor=\"addressLine2\"\r\n                        className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                    >\r\n                        Address Line 2\r\n                    </label>\r\n                    <input\r\n                        id=\"addressLine2\"\r\n                        type=\"text\"\r\n                        value={value.addressLine2}\r\n                        onChange={(e) => handleTextChange('addressLine2', e.target.value)}\r\n                        disabled={disabled}\r\n                        placeholder=\"Apartment, suite, unit, etc. (optional)\"\r\n                        className=\"\r\n              w-full px-3 py-2.5\r\n              border border-gray-300 dark:border-gray-600 rounded-lg\r\n              bg-white dark:bg-gray-800\r\n              text-gray-900 dark:text-gray-100\r\n              placeholder-gray-400 dark:placeholder-gray-500\r\n              focus:ring-2 focus:ring-primary focus:border-primary\r\n              disabled:bg-gray-100 dark:disabled:bg-gray-900\r\n              disabled:cursor-not-allowed\r\n              transition-colors duration-200\r\n            \"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Postal Code, Neighborhood, Landmark */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                {/* Postal Code */}\r\n                <div>\r\n                    <label\r\n                        htmlFor=\"postalCode\"\r\n                        className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                    >\r\n                        Postal / ZIP Code {required && <span className=\"text-red-500\">*</span>}\r\n                    </label>\r\n                    <input\r\n                        id=\"postalCode\"\r\n                        type=\"text\"\r\n                        inputMode=\"numeric\"\r\n                        pattern=\"[0-9]*\"\r\n                        value={value.postalCode}\r\n                        onChange={handlePostalCodeChange}\r\n                        disabled={disabled}\r\n                        placeholder=\"Enter postal code\"\r\n                        className={`\r\n              w-full px-3 py-2.5\r\n              border rounded-lg\r\n              bg-white dark:bg-gray-800\r\n              text-gray-900 dark:text-gray-100\r\n              placeholder-gray-400 dark:placeholder-gray-500\r\n              focus:ring-2 focus:ring-primary focus:border-primary\r\n              disabled:bg-gray-100 dark:disabled:bg-gray-900\r\n              disabled:cursor-not-allowed\r\n              transition-colors duration-200\r\n              ${errors.postalCode ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'}\r\n            `}\r\n                    />\r\n                    {errors.postalCode && (\r\n                        <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.postalCode}</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Neighborhood */}\r\n                <div>\r\n                    <label\r\n                        htmlFor=\"neighborhood\"\r\n                        className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                    >\r\n                        Neighborhood\r\n                    </label>\r\n                    <input\r\n                        id=\"neighborhood\"\r\n                        type=\"text\"\r\n                        value={value.neighborhood}\r\n                        onChange={(e) => handleTextChange('neighborhood', e.target.value)}\r\n                        disabled={disabled}\r\n                        placeholder=\"Enter neighborhood (optional)\"\r\n                        className=\"\r\n              w-full px-3 py-2.5\r\n              border border-gray-300 dark:border-gray-600 rounded-lg\r\n              bg-white dark:bg-gray-800\r\n              text-gray-900 dark:text-gray-100\r\n              placeholder-gray-400 dark:placeholder-gray-500\r\n              focus:ring-2 focus:ring-primary focus:border-primary\r\n              disabled:bg-gray-100 dark:disabled:bg-gray-900\r\n              disabled:cursor-not-allowed\r\n              transition-colors duration-200\r\n            \"\r\n                    />\r\n                </div>\r\n\r\n                {/* Landmark */}\r\n                <div>\r\n                    <label\r\n                        htmlFor=\"landmark\"\r\n                        className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                    >\r\n                        Nearby Landmark\r\n                    </label>\r\n                    <input\r\n                        id=\"landmark\"\r\n                        type=\"text\"\r\n                        value={value.landmark}\r\n                        onChange={(e) => handleTextChange('landmark', e.target.value)}\r\n                        disabled={disabled}\r\n                        placeholder=\"Enter nearby landmark (optional)\"\r\n                        className=\"\r\n              w-full px-3 py-2.5\r\n              border border-gray-300 dark:border-gray-600 rounded-lg\r\n              bg-white dark:bg-gray-800\r\n              text-gray-900 dark:text-gray-100\r\n              placeholder-gray-400 dark:placeholder-gray-500\r\n              focus:ring-2 focus:ring-primary focus:border-primary\r\n              disabled:bg-gray-100 dark:disabled:bg-gray-900\r\n              disabled:cursor-not-allowed\r\n              transition-colors duration-200\r\n            \"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Empty states info */}\r\n            {value.countryId && states.length === 0 && !loadingStates && !stateError && (\r\n                <p className=\"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-2\">\r\n                    <AlertCircle className=\"w-4 h-4\" />\r\n                    No states/provinces available for selected country. You can enter the state name manually.\r\n                </p>\r\n            )}\r\n\r\n            {value.stateId && cities.length === 0 && !loadingCities && !cityError && (\r\n                <p className=\"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-2\">\r\n                    <AlertCircle className=\"w-4 h-4\" />\r\n                    No cities available for selected state. You can enter the city name manually.\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddressSection;\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n    useProperties,\r\n    Property,\r\n    CurrencyCode,\r\n    AreaUnit,\r\n    PropertyType,\r\n    ListingType,\r\n    PropertyStatus,\r\n    FurnishingStatus,\r\n    PropertyCondition,\r\n    FacingDirection,\r\n} from '@/contexts/PropertyContext';\r\nimport {\r\n    ChevronRight,\r\n    ChevronLeft,\r\n    Upload,\r\n    X,\r\n    Bold,\r\n    Italic,\r\n    Underline,\r\n    List,\r\n    Link as LinkIcon,\r\n    CheckCircle,\r\n    MapPin,\r\n    DollarSign,\r\n    Home,\r\n    Building,\r\n    Bed,\r\n    Bath,\r\n    Car,\r\n    Maximize,\r\n    Calendar,\r\n    Shield,\r\n    Wifi,\r\n    Dumbbell,\r\n    Waves,\r\n    TreePine,\r\n    Camera,\r\n    Video,\r\n    Globe,\r\n    Phone,\r\n    Mail,\r\n    User,\r\n    FileText,\r\n    Settings,\r\n    Star,\r\n    AlertCircle,\r\n    Loader2,\r\n    Save,\r\n    ArrowLeft,\r\n} from 'lucide-react';\r\nimport AddressSection, { AddressFormData } from '@/components/ui/AddressSection';\r\nimport Toast from '@/components/ui/Toast';\r\n\r\n// Mode type for clear distinction\r\ntype FormMode = 'create' | 'edit';\r\n\r\n// Countries list\r\nconst countries = [\r\n    { code: 'US', name: 'United States', currency: 'USD' as CurrencyCode },\r\n    { code: 'IN', name: 'India', currency: 'INR' as CurrencyCode },\r\n    { code: 'GB', name: 'United Kingdom', currency: 'GBP' as CurrencyCode },\r\n    { code: 'AE', name: 'United Arab Emirates', currency: 'AED' as CurrencyCode },\r\n    { code: 'CA', name: 'Canada', currency: 'CAD' as CurrencyCode },\r\n    { code: 'AU', name: 'Australia', currency: 'AUD' as CurrencyCode },\r\n    { code: 'SG', name: 'Singapore', currency: 'SGD' as CurrencyCode },\r\n    { code: 'DE', name: 'Germany', currency: 'EUR' as CurrencyCode },\r\n    { code: 'FR', name: 'France', currency: 'EUR' as CurrencyCode },\r\n    { code: 'JP', name: 'Japan', currency: 'JPY' as CurrencyCode },\r\n    { code: 'CN', name: 'China', currency: 'CNY' as CurrencyCode },\r\n];\r\n\r\n// Property types with icons\r\nconst propertyTypes: { value: PropertyType; label: string; icon: React.ReactNode }[] = [\r\n    { value: 'apartment', label: 'Apartment', icon: <Building className=\"w-5 h-5\" /> },\r\n    { value: 'house', label: 'House', icon: <Home className=\"w-5 h-5\" /> },\r\n    { value: 'condo', label: 'Condo', icon: <Building className=\"w-5 h-5\" /> },\r\n    { value: 'townhouse', label: 'Townhouse', icon: <Home className=\"w-5 h-5\" /> },\r\n    { value: 'villa', label: 'Villa', icon: <Home className=\"w-5 h-5\" /> },\r\n    { value: 'penthouse', label: 'Penthouse', icon: <Building className=\"w-5 h-5\" /> },\r\n    { value: 'studio', label: 'Studio', icon: <Home className=\"w-5 h-5\" /> },\r\n    { value: 'duplex', label: 'Duplex', icon: <Home className=\"w-5 h-5\" /> },\r\n    { value: 'land', label: 'Land', icon: <MapPin className=\"w-5 h-5\" /> },\r\n    { value: 'commercial', label: 'Commercial', icon: <Building className=\"w-5 h-5\" /> },\r\n    { value: 'industrial', label: 'Industrial', icon: <Building className=\"w-5 h-5\" /> },\r\n    { value: 'office', label: 'Office', icon: <Building className=\"w-5 h-5\" /> },\r\n];\r\n\r\nconst listingTypes: { value: ListingType; label: string }[] = [\r\n    { value: 'sale', label: 'For Sale' },\r\n    { value: 'rent', label: 'For Rent' },\r\n    { value: 'lease', label: 'For Lease' },\r\n    { value: 'short_term', label: 'Short Term Rental' },\r\n    { value: 'vacation', label: 'Vacation Rental' },\r\n];\r\n\r\nconst statusOptions: { value: PropertyStatus; label: string; color: string }[] = [\r\n    { value: 'available', label: 'Available', color: 'bg-green-100 text-green-700' },\r\n    { value: 'pending', label: 'Pending', color: 'bg-yellow-100 text-yellow-700' },\r\n    { value: 'sold', label: 'Sold', color: 'bg-blue-100 text-blue-700' },\r\n    { value: 'rented', label: 'Rented', color: 'bg-purple-100 text-purple-700' },\r\n    { value: 'under_contract', label: 'Under Contract', color: 'bg-orange-100 text-orange-700' },\r\n    { value: 'off_market', label: 'Off Market', color: 'bg-gray-100 text-gray-700' },\r\n    { value: 'coming_soon', label: 'Coming Soon', color: 'bg-indigo-100 text-indigo-700' },\r\n];\r\n\r\nconst furnishingOptions: { value: FurnishingStatus; label: string }[] = [\r\n    { value: 'furnished', label: 'Fully Furnished' },\r\n    { value: 'semi_furnished', label: 'Semi Furnished' },\r\n    { value: 'unfurnished', label: 'Unfurnished' },\r\n];\r\n\r\nconst conditionOptions: { value: PropertyCondition; label: string }[] = [\r\n    { value: 'new', label: 'Brand New' },\r\n    { value: 'excellent', label: 'Excellent' },\r\n    { value: 'good', label: 'Good' },\r\n    { value: 'fair', label: 'Fair' },\r\n    { value: 'needs_renovation', label: 'Needs Renovation' },\r\n];\r\n\r\nconst facingOptions: { value: FacingDirection; label: string }[] = [\r\n    { value: 'north', label: 'North' },\r\n    { value: 'south', label: 'South' },\r\n    { value: 'east', label: 'East' },\r\n    { value: 'west', label: 'West' },\r\n    { value: 'northeast', label: 'North East' },\r\n    { value: 'northwest', label: 'North West' },\r\n    { value: 'southeast', label: 'South East' },\r\n    { value: 'southwest', label: 'South West' },\r\n];\r\n\r\nconst areaUnits: { value: AreaUnit; label: string }[] = [\r\n    { value: 'sqft', label: 'Square Feet (sq ft)' },\r\n    { value: 'sqm', label: 'Square Meters (sq m)' },\r\n    { value: 'acres', label: 'Acres' },\r\n    { value: 'hectares', label: 'Hectares' },\r\n];\r\n\r\n// Amenities grouped by category\r\nconst amenitiesGroups = {\r\n    interior: [\r\n        { id: 'ac', label: 'Air Conditioning', icon: <Wifi className=\"w-4 h-4\" /> },\r\n        { id: 'heating', label: 'Central Heating', icon: <Home className=\"w-4 h-4\" /> },\r\n        { id: 'fireplace', label: 'Fireplace', icon: <Home className=\"w-4 h-4\" /> },\r\n        { id: 'walk_in_closet', label: 'Walk-in Closet', icon: <Home className=\"w-4 h-4\" /> },\r\n        { id: 'hardwood_floors', label: 'Hardwood Floors', icon: <Home className=\"w-4 h-4\" /> },\r\n        { id: 'high_ceiling', label: 'High Ceilings', icon: <Home className=\"w-4 h-4\" /> },\r\n    ],\r\n    exterior: [\r\n        { id: 'balcony', label: 'Balcony', icon: <Building className=\"w-4 h-4\" /> },\r\n        { id: 'garden', label: 'Garden', icon: <TreePine className=\"w-4 h-4\" /> },\r\n        { id: 'terrace', label: 'Terrace', icon: <Building className=\"w-4 h-4\" /> },\r\n        { id: 'patio', label: 'Patio', icon: <Home className=\"w-4 h-4\" /> },\r\n        { id: 'deck', label: 'Deck', icon: <Home className=\"w-4 h-4\" /> },\r\n        { id: 'rooftop', label: 'Rooftop Access', icon: <Building className=\"w-4 h-4\" /> },\r\n    ],\r\n    community: [\r\n        { id: 'pool', label: 'Swimming Pool', icon: <Waves className=\"w-4 h-4\" /> },\r\n        { id: 'gym', label: 'Gym / Fitness Center', icon: <Dumbbell className=\"w-4 h-4\" /> },\r\n        { id: 'clubhouse', label: 'Clubhouse', icon: <Building className=\"w-4 h-4\" /> },\r\n        { id: 'playground', label: 'Playground', icon: <TreePine className=\"w-4 h-4\" /> },\r\n        { id: 'tennis_court', label: 'Tennis Court', icon: <Dumbbell className=\"w-4 h-4\" /> },\r\n        { id: 'sports_facility', label: 'Sports Facility', icon: <Dumbbell className=\"w-4 h-4\" /> },\r\n    ],\r\n    security: [\r\n        { id: '24hr_security', label: '24/7 Security', icon: <Shield className=\"w-4 h-4\" /> },\r\n        { id: 'cctv', label: 'CCTV Surveillance', icon: <Camera className=\"w-4 h-4\" /> },\r\n        { id: 'gated_community', label: 'Gated Community', icon: <Shield className=\"w-4 h-4\" /> },\r\n        { id: 'intercom', label: 'Intercom System', icon: <Phone className=\"w-4 h-4\" /> },\r\n        { id: 'fire_alarm', label: 'Fire Alarm', icon: <AlertCircle className=\"w-4 h-4\" /> },\r\n        { id: 'smart_locks', label: 'Smart Locks', icon: <Shield className=\"w-4 h-4\" /> },\r\n    ],\r\n    utilities: [\r\n        { id: 'wifi', label: 'WiFi Included', icon: <Wifi className=\"w-4 h-4\" /> },\r\n        { id: 'cable_tv', label: 'Cable TV', icon: <Video className=\"w-4 h-4\" /> },\r\n        { id: 'water_supply', label: '24/7 Water Supply', icon: <Waves className=\"w-4 h-4\" /> },\r\n        { id: 'power_backup', label: 'Power Backup', icon: <Settings className=\"w-4 h-4\" /> },\r\n        { id: 'gas_pipeline', label: 'Gas Pipeline', icon: <Settings className=\"w-4 h-4\" /> },\r\n        { id: 'waste_disposal', label: 'Waste Disposal', icon: <Settings className=\"w-4 h-4\" /> },\r\n    ],\r\n};\r\n\r\ninterface FormData {\r\n    // Basic Info\r\n    title: string;\r\n    propertyType: PropertyType;\r\n    listingType: ListingType;\r\n    status: PropertyStatus;\r\n\r\n    // Price\r\n    priceAmount: number;\r\n    currency: CurrencyCode;\r\n    negotiable: boolean;\r\n\r\n    // Location\r\n    addressLine1: string;\r\n    addressLine2: string;\r\n    city: string;\r\n    cityId: string;\r\n    state: string;\r\n    stateId: string;\r\n    stateCode: string;\r\n    postalCode: string;\r\n    country: string;\r\n    countryCode: string;\r\n    countryId: string;\r\n    neighborhood: string;\r\n    landmark: string;\r\n\r\n    // Property Details\r\n    totalArea: number;\r\n    carpetArea: number;\r\n    areaUnit: AreaUnit;\r\n    bedrooms: number;\r\n    bathrooms: number;\r\n    balconies: number;\r\n    parkingSpaces: number;\r\n    floors: number;\r\n    floorNumber: number;\r\n    totalFloors: number;\r\n\r\n    // Features\r\n    yearBuilt: number;\r\n    furnishing: FurnishingStatus;\r\n    condition: PropertyCondition;\r\n    facing: FacingDirection;\r\n    amenities: {\r\n        interior: string[];\r\n        exterior: string[];\r\n        community: string[];\r\n        security: string[];\r\n        utilities: string[];\r\n    };\r\n\r\n    // Description\r\n    description: string;\r\n    shortDescription: string;\r\n\r\n    // Media\r\n    images: (File | string)[];\r\n    videos: (File | string)[];\r\n    virtualTourUrl: string;\r\n\r\n    // Contact\r\n    contactName: string;\r\n    contactEmail: string;\r\n    contactPhone: string;\r\n    alternatePhone: string;\r\n    preferredContactMethod: 'email' | 'phone' | 'whatsapp' | 'any';\r\n    company: string;\r\n    licenseNumber: string;\r\n\r\n    // Availability & Terms\r\n    availableFrom: string;\r\n    minimumLease: number;\r\n    deposit: number;\r\n    maintenanceCharges: number;\r\n    inclusions: string;\r\n    exclusions: string;\r\n\r\n    // Settings\r\n    featured: boolean;\r\n    published: boolean;\r\n    draft: boolean;\r\n}\r\n\r\nconst initialFormData: FormData = {\r\n    title: '',\r\n    propertyType: 'apartment',\r\n    listingType: 'sale',\r\n    status: 'online' as PropertyStatus,\r\n\r\n    priceAmount: 0,\r\n    currency: 'USD',\r\n    negotiable: false,\r\n\r\n    addressLine1: '',\r\n    addressLine2: '',\r\n    city: '',\r\n    cityId: '',\r\n    state: '',\r\n    stateId: '',\r\n    stateCode: '',\r\n    postalCode: '',\r\n    country: '',\r\n    countryCode: '',\r\n    countryId: '',\r\n    neighborhood: '',\r\n    landmark: '',\r\n\r\n    totalArea: 0,\r\n    carpetArea: 0,\r\n    areaUnit: 'sqft',\r\n    bedrooms: 1,\r\n    bathrooms: 1,\r\n    balconies: 0,\r\n    parkingSpaces: 0,\r\n    floors: 1,\r\n    floorNumber: 0,\r\n    totalFloors: 1,\r\n\r\n    yearBuilt: new Date().getFullYear(),\r\n    furnishing: 'unfurnished',\r\n    condition: 'good',\r\n    facing: 'north',\r\n    amenities: {\r\n        interior: [],\r\n        exterior: [],\r\n        community: [],\r\n        security: [],\r\n        utilities: [],\r\n    },\r\n\r\n    description: '',\r\n    shortDescription: '',\r\n\r\n    images: [],\r\n    videos: [],\r\n    virtualTourUrl: '',\r\n\r\n    contactName: '',\r\n    contactEmail: '',\r\n    contactPhone: '',\r\n    alternatePhone: '',\r\n    preferredContactMethod: 'any',\r\n    company: '',\r\n    licenseNumber: '',\r\n\r\n    availableFrom: new Date().toISOString().split('T')[0],\r\n    minimumLease: 12,\r\n    deposit: 0,\r\n    maintenanceCharges: 0,\r\n    inclusions: '',\r\n    exclusions: '',\r\n\r\n    featured: false,\r\n    published: false,\r\n    draft: true,\r\n};\r\n\r\nexport default function AddPropertyPage() {\r\n    const navigate = useNavigate();\r\n    const { id } = useParams<{ id: string }>();\r\n    const idValue = id;\r\n    const { addProperty, updateProperty, getProperty, formatPrice, formatArea, uploadImages, uploadVideos, fetchProperties, loading: contextLoading } = useProperties();\r\n\r\n    // Determine mode based on presence of ID\r\n    const mode: FormMode = idValue ? 'edit' : 'create';\r\n    const isEditMode = mode === 'edit';\r\n\r\n    const [currentStep, setCurrentStep] = useState(1);\r\n    const [formData, setFormData] = useState<FormData>(initialFormData);\r\n    const [originalFormData, setOriginalFormData] = useState<FormData | null>(null);\r\n    const [errors, setErrors] = useState<Record<string, string>>({});\r\n    const [imagePreviews, setImagePreviews] = useState<string[]>([]);\r\n    const [videoPreviews, setVideoPreviews] = useState<string[]>([]);\r\n    const [saving, setSaving] = useState(false);\r\n    const [loadingProperty, setLoadingProperty] = useState(isEditMode);\r\n    const [propertyNotFound, setPropertyNotFound] = useState(false);\r\n\r\n    // Track dirty state (has form been modified)\r\n    const [isDirty, setIsDirty] = useState(false);\r\n    const hasInitializedRef = useRef(false);\r\n\r\n    // Toast state\r\n    const [toast, setToast] = useState<{ id: string; message: string; type: 'success' | 'error' | 'warning' | 'info'; visible: boolean }>({\r\n        id: '',\r\n        message: '',\r\n        type: 'success',\r\n        visible: false,\r\n    });\r\n\r\n    const showToast = useCallback((message: string, type: 'success' | 'error' | 'warning' | 'info' = 'success') => {\r\n        setToast({ id: Date.now().toString(), message, type, visible: true });\r\n    }, []);\r\n\r\n    const hideToast = useCallback(() => {\r\n        setToast(prev => ({ ...prev, visible: false }));\r\n    }, []);\r\n\r\n    // Unsaved changes warning - uses beforeunload event for browser navigation\r\n    useEffect(() => {\r\n        const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n            if (isDirty && !saving) {\r\n                e.preventDefault();\r\n                // Modern browsers require returnValue to be set\r\n                e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';\r\n                return e.returnValue;\r\n            }\r\n        };\r\n\r\n        window.addEventListener('beforeunload', handleBeforeUnload);\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeunload', handleBeforeUnload);\r\n        };\r\n    }, [isDirty, saving]);\r\n\r\n    // Custom navigation wrapper that warns about unsaved changes\r\n    const safeNavigate = useCallback((path: string) => {\r\n        if (isDirty && !saving) {\r\n            const confirmLeave = window.confirm(\r\n                'You have unsaved changes. Are you sure you want to leave? Your changes will be lost.'\r\n            );\r\n            if (!confirmLeave) {\r\n                return;\r\n            }\r\n        }\r\n        navigate(path);\r\n    }, [isDirty, saving, navigate]);\r\n\r\n    // Load existing property for edit mode\r\n    useEffect(() => {\r\n        const loadPropertyForEdit = async () => {\r\n            if (!isEditMode || !idValue || hasInitializedRef.current) return;\r\n\r\n            setLoadingProperty(true);\r\n            setPropertyNotFound(false);\r\n\r\n            // Try to get property from context first\r\n            let property = getProperty(idValue);\r\n\r\n            // If not found in context, try fetching fresh data\r\n            if (!property) {\r\n                await fetchProperties();\r\n                property = getProperty(idValue);\r\n            }\r\n\r\n            if (!property) {\r\n                setPropertyNotFound(true);\r\n                setLoadingProperty(false);\r\n                showToast('Property not found. Please go back and try again.', 'error');\r\n                return;\r\n            }\r\n\r\n            // Map property to form data using helper/logic as seen in demo app...\r\n            // [Will implement mapping here]\r\n\r\n            // Using placeholder logic to init form data for now, actual mapping needs to be identical to demo\r\n            const loadedFormData: FormData = {\r\n                title: property.title || '',\r\n                propertyType: property.propertyType || 'apartment',\r\n                listingType: property.listingType || 'sale',\r\n                status: (property.status || 'online') as PropertyStatus,\r\n\r\n                priceAmount: property.price?.amount || 0,\r\n                currency: property.price?.currency || 'USD',\r\n                negotiable: property.price?.negotiable || false,\r\n\r\n                addressLine1: property.location?.addressLine1 || property.address || '',\r\n                addressLine2: property.location?.addressLine2 || '',\r\n                city: property.location?.city || property.city || '',\r\n                cityId: property.location?.cityId || '',\r\n                state: property.location?.state || property.state || '',\r\n                stateId: property.location?.stateId || '',\r\n                stateCode: property.location?.stateCode || '',\r\n                postalCode: property.location?.postalCode || property.zipCode || '',\r\n                country: property.location?.country || '',\r\n                countryCode: property.location?.countryCode || '',\r\n                countryId: property.location?.countryId || '',\r\n                neighborhood: property.location?.neighborhood || '',\r\n                landmark: property.location?.landmark || '',\r\n\r\n                totalArea: property.dimensions?.totalArea || property.area || 0,\r\n                carpetArea: property.dimensions?.carpetArea || 0,\r\n                areaUnit: property.dimensions?.areaUnit || 'sqft',\r\n                bedrooms: property.rooms?.bedrooms || property.bedrooms || 1,\r\n                bathrooms: property.rooms?.bathrooms || property.bathrooms || 1,\r\n                balconies: property.rooms?.balconies || 0,\r\n                parkingSpaces: property.rooms?.parkingSpaces || 0,\r\n                floors: property.dimensions?.floors || 1,\r\n                floorNumber: property.dimensions?.floorNumber || 0,\r\n                totalFloors: property.dimensions?.totalFloors || 1,\r\n\r\n                yearBuilt: property.yearBuilt || new Date().getFullYear(),\r\n                furnishing: property.furnishing || 'unfurnished',\r\n                condition: property.condition || 'good',\r\n                facing: property.facing || 'north',\r\n                amenities: property.amenities || {\r\n                    interior: [],\r\n                    exterior: [],\r\n                    community: [],\r\n                    security: [],\r\n                    utilities: [],\r\n                },\r\n\r\n                description: property.description || '',\r\n                shortDescription: property.shortDescription || '',\r\n\r\n                images: property.images || [],\r\n                videos: property.videos || [],\r\n                virtualTourUrl: property.virtualTourUrl || property.media?.virtualTourUrl || '',\r\n\r\n                contactName: property.contact?.name || property.contactName || '',\r\n                contactEmail: property.contact?.email || property.emailAddress || '',\r\n                contactPhone: property.contact?.phone || property.phoneNumber || '',\r\n                alternatePhone: property.contact?.alternatePhone || '',\r\n                preferredContactMethod: property.contact?.preferredContactMethod || 'any',\r\n                company: property.contact?.company || '',\r\n                licenseNumber: property.contact?.licenseNumber || '',\r\n\r\n                availableFrom: property.availableFrom || new Date().toISOString().split('T')[0],\r\n                minimumLease: property.minimumLease || 12,\r\n                deposit: property.financial?.deposit || 0,\r\n                maintenanceCharges: property.financial?.maintenanceCharges || 0,\r\n                inclusions: property.inclusions || '',\r\n                exclusions: property.exclusions || '',\r\n\r\n                featured: property.featured || false,\r\n                published: property.published || false,\r\n                draft: property.draft ?? true,\r\n            };\r\n\r\n            setFormData(loadedFormData);\r\n            setOriginalFormData(loadedFormData); // Store original for dirty comparison\r\n\r\n            // Load image previews\r\n            if (property.images?.length) {\r\n                const previews = property.images.filter((img): img is string => typeof img === 'string');\r\n                setImagePreviews(previews);\r\n            }\r\n\r\n            hasInitializedRef.current = true;\r\n            setLoadingProperty(false);\r\n            setIsDirty(false); // Reset dirty state after loading\r\n        };\r\n\r\n        loadPropertyForEdit();\r\n    }, [idValue, isEditMode, getProperty, fetchProperties, showToast]);\r\n\r\n    const steps = [\r\n        { number: 1, title: 'Basic Info', icon: <Home className=\"w-5 h-5\" /> },\r\n        { number: 2, title: 'Location', icon: <MapPin className=\"w-5 h-5\" /> },\r\n        { number: 3, title: 'Property Details', icon: <Settings className=\"w-5 h-5\" /> },\r\n        { number: 4, title: 'Media & Features', icon: <Camera className=\"w-5 h-5\" /> },\r\n        { number: 5, title: 'Contact & Publish', icon: <FileText className=\"w-5 h-5\" /> },\r\n    ];\r\n\r\n    const validateStep = (step: number): boolean => {\r\n        const newErrors: Record<string, string> = {};\r\n\r\n        if (step === 1) {\r\n            if (!formData.title?.trim()) newErrors.title = 'Property title is required';\r\n            if (formData.priceAmount <= 0) newErrors.priceAmount = 'Price is required';\r\n        } else if (step === 2) {\r\n            if (!formData.addressLine1?.trim()) newErrors.addressLine1 = 'Street address is required';\r\n            if (!formData.countryId) newErrors.country = 'Country is required';\r\n            if (!formData.stateId && !formData.state?.trim()) newErrors.state = 'State/Province is required';\r\n            if (!formData.cityId && !formData.city?.trim()) newErrors.city = 'City is required';\r\n            if (!formData.postalCode?.trim()) newErrors.postalCode = 'Postal code is required';\r\n        } else if (step === 3) {\r\n            if (formData.totalArea <= 0) newErrors.totalArea = 'Area is required';\r\n            if (formData.bedrooms < 0) newErrors.bedrooms = 'Invalid bedrooms';\r\n            if (formData.bathrooms < 0) newErrors.bathrooms = 'Invalid bathrooms';\r\n        } else if (step === 4) {\r\n            if (formData.images.length === 0 && imagePreviews.length === 0) {\r\n                newErrors.images = 'At least one image is required';\r\n            }\r\n        } else if (step === 5) {\r\n            if (!formData.contactName?.trim()) newErrors.contactName = 'Contact name is required';\r\n            if (!formData.contactPhone?.trim()) newErrors.contactPhone = 'Phone number is required';\r\n            if (!formData.contactEmail?.trim()) {\r\n                newErrors.contactEmail = 'Email is required';\r\n            } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.contactEmail)) {\r\n                newErrors.contactEmail = 'Please enter a valid email';\r\n            }\r\n        }\r\n\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    const handleNext = () => {\r\n        if (mode === 'create') {\r\n            if (validateStep(currentStep)) {\r\n                if (currentStep < 5) {\r\n                    setCurrentStep(currentStep + 1);\r\n                }\r\n            }\r\n        } else {\r\n            if (currentStep < 5) {\r\n                setCurrentStep(currentStep + 1);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handlePrevious = () => {\r\n        if (currentStep > 1) {\r\n            setCurrentStep(currentStep - 1);\r\n        }\r\n    };\r\n\r\n    const validateAllFields = (): Record<string, string> => {\r\n        const allErrors: Record<string, string> = {};\r\n\r\n        // Step 1 validation\r\n        if (!formData.title?.trim()) allErrors.title = 'Property title is required';\r\n        if (formData.priceAmount <= 0) allErrors.priceAmount = 'Price is required';\r\n\r\n        // Step 2 validation\r\n        if (!formData.addressLine1?.trim()) allErrors.addressLine1 = 'Street address is required';\r\n        if (!formData.countryId) allErrors.country = 'Country is required';\r\n        if (!formData.stateId && !formData.state?.trim()) allErrors.state = 'State/Province is required';\r\n        if (!formData.cityId && !formData.city?.trim()) allErrors.city = 'City is required';\r\n        if (!formData.postalCode?.trim()) allErrors.postalCode = 'Postal code is required';\r\n\r\n        // Step 3 validation\r\n        if (formData.totalArea <= 0) allErrors.totalArea = 'Area is required';\r\n\r\n        // Step 4 validation\r\n        if (formData.images.length === 0 && imagePreviews.length === 0) {\r\n            allErrors.images = 'At least one image is required';\r\n        }\r\n\r\n        // Step 5 validation\r\n        if (!formData.contactName?.trim()) allErrors.contactName = 'Contact name is required';\r\n        if (!formData.contactPhone?.trim()) allErrors.contactPhone = 'Phone number is required';\r\n        if (!formData.contactEmail?.trim()) {\r\n            allErrors.contactEmail = 'Email is required';\r\n        } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.contactEmail)) {\r\n            allErrors.contactEmail = 'Please enter a valid email';\r\n        }\r\n\r\n        return allErrors;\r\n    };\r\n\r\n    const getFirstErrorStep = (errorFields: Record<string, string>): number => {\r\n        if (errorFields.title || errorFields.priceAmount) return 1;\r\n        if (errorFields.addressLine1 || errorFields.country || errorFields.state || errorFields.city || errorFields.postalCode) return 2;\r\n        if (errorFields.totalArea) return 3;\r\n        if (errorFields.images) return 4;\r\n        if (errorFields.contactName || errorFields.contactPhone || errorFields.contactEmail) return 5;\r\n        return 1;\r\n    };\r\n\r\n    const handleInputChange = <K extends keyof FormData>(field: K, value: FormData[K]) => {\r\n        setFormData((prev) => ({ ...prev, [field]: value }));\r\n        setIsDirty(true);\r\n        if (errors[field]) {\r\n            setErrors((prev) => {\r\n                const newErrors = { ...prev };\r\n                delete newErrors[field];\r\n                return newErrors;\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleNumericChange = (field: keyof FormData, value: string, defaultValue: number = 0) => {\r\n        if (value === '' || value === null || value === undefined) {\r\n            handleInputChange(field, defaultValue as any);\r\n        } else {\r\n            const numValue = parseFloat(value);\r\n            if (!isNaN(numValue) && numValue >= 0) {\r\n                handleInputChange(field, numValue as any);\r\n            }\r\n        }\r\n    };\r\n\r\n    const getNumericDisplayValue = (value: number | undefined): string => {\r\n        if (value === undefined || value === null || value === 0) {\r\n            return '';\r\n        }\r\n        return value.toString();\r\n    };\r\n\r\n    const handleTabClick = (stepNumber: number) => {\r\n        if (mode === 'edit') {\r\n            setCurrentStep(stepNumber);\r\n        } else {\r\n            if (stepNumber < currentStep) {\r\n                setCurrentStep(stepNumber);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCountryChange = (countryCode: string) => {\r\n        const country = countries.find(c => c.code === countryCode);\r\n        if (country) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                country: country.name,\r\n                countryCode: country.code,\r\n                currency: country.currency,\r\n            }));\r\n            setIsDirty(true);\r\n        }\r\n    };\r\n\r\n    const toggleAmenity = (category: keyof typeof amenitiesGroups, amenityId: string) => {\r\n        setFormData(prev => {\r\n            const current = prev.amenities[category] || [];\r\n            const updated = current.includes(amenityId)\r\n                ? current.filter(a => a !== amenityId)\r\n                : [...current, amenityId];\r\n            return {\r\n                ...prev,\r\n                amenities: {\r\n                    ...prev.amenities,\r\n                    [category]: updated,\r\n                },\r\n            };\r\n        });\r\n        setIsDirty(true);\r\n    };\r\n\r\n    const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = Array.from(e.target.files || []);\r\n\r\n        files.forEach((file) => {\r\n            if (file.size > 10 * 1024 * 1024) {\r\n                showToast(`${file.name} is too large. Maximum size is 10MB.`, 'error');\r\n                return;\r\n            }\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                if (event.target?.result) {\r\n                    setImagePreviews(prev => [...prev, event.target!.result as string]);\r\n                    setFormData(prev => ({\r\n                        ...prev,\r\n                        images: [...prev.images, file],\r\n                    }));\r\n                    setIsDirty(true);\r\n                }\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    };\r\n\r\n    const handleVideoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = Array.from(e.target.files || []);\r\n\r\n        files.forEach((file) => {\r\n            if (file.size > 50 * 1024 * 1024) {\r\n                showToast(`${file.name} is too large. Maximum size is 50MB.`, 'error');\r\n                return;\r\n            }\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                if (event.target?.result) {\r\n                    setVideoPreviews(prev => [...prev, event.target!.result as string]);\r\n                    setFormData(prev => ({\r\n                        ...prev,\r\n                        videos: [...prev.videos, file],\r\n                    }));\r\n                    setIsDirty(true);\r\n                }\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    };\r\n\r\n    const removeImage = (index: number) => {\r\n        setImagePreviews(prev => prev.filter((_, i) => i !== index));\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            images: prev.images.filter((_, i) => i !== index),\r\n        }));\r\n        setIsDirty(true);\r\n    };\r\n\r\n    const removeVideo = (index: number) => {\r\n        setVideoPreviews(prev => prev.filter((_, i) => i !== index));\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            videos: prev.videos.filter((_, i) => i !== index),\r\n        }));\r\n        setIsDirty(true);\r\n    };\r\n\r\n    const processImages = async (files: (File | string)[]): Promise<string[]> => {\r\n        const existingUrls: string[] = [];\r\n        const newFiles: File[] = [];\r\n\r\n        for (const file of files) {\r\n            if (typeof file === 'string') {\r\n                existingUrls.push(file);\r\n            } else {\r\n                newFiles.push(file);\r\n            }\r\n        }\r\n\r\n        let uploadedUrls: string[] = [];\r\n        if (newFiles.length > 0) {\r\n            try {\r\n                uploadedUrls = await uploadImages(newFiles);\r\n            } catch (err) {\r\n                console.error('Failed to upload images:', err);\r\n                // Fallback to base64 if upload fails\r\n                for (const file of newFiles) {\r\n                    const base64 = await new Promise<string>((resolve, reject) => {\r\n                        const reader = new FileReader();\r\n                        reader.onload = () => resolve(reader.result as string);\r\n                        reader.onerror = reject;\r\n                        reader.readAsDataURL(file);\r\n                    });\r\n                    uploadedUrls.push(base64);\r\n                }\r\n            }\r\n        }\r\n\r\n        return [...existingUrls, ...uploadedUrls];\r\n    };\r\n\r\n    const processVideos = async (files: (File | string)[]): Promise<string[]> => {\r\n        const existingUrls: string[] = [];\r\n        const newFiles: File[] = [];\r\n\r\n        for (const file of files) {\r\n            if (typeof file === 'string') {\r\n                existingUrls.push(file);\r\n            } else {\r\n                newFiles.push(file);\r\n            }\r\n        }\r\n\r\n        let uploadedUrls: string[] = [];\r\n        if (newFiles.length > 0) {\r\n            try {\r\n                uploadedUrls = await uploadVideos(newFiles);\r\n                if (uploadedUrls.length === 0 && newFiles.length > 0) {\r\n                    console.warn('No video URLs returned, using base64 fallback for remaining files');\r\n                    for (const file of newFiles) {\r\n                        if (file.size > 10 * 1024 * 1024) {\r\n                            console.warn(`Video \"${file.name}\" might be too large for base64 storage.`);\r\n                        }\r\n                        const base64 = await new Promise<string>((resolve, reject) => {\r\n                            const reader = new FileReader();\r\n                            reader.onload = () => resolve(reader.result as string);\r\n                            reader.onerror = reject;\r\n                            reader.readAsDataURL(file);\r\n                        });\r\n                        uploadedUrls.push(base64);\r\n                    }\r\n                }\r\n            } catch (err: any) {\r\n                console.error('Failed to upload videos:', err);\r\n                throw new Error(`Failed to upload videos: ${err?.message || err?.toString() || 'Unknown error'}`);\r\n            }\r\n        }\r\n\r\n        return [...existingUrls, ...uploadedUrls];\r\n    };\r\n\r\n    const buildPropertyData = async (): Promise<Partial<Property>> => {\r\n        const images = await processImages(formData.images);\r\n        const videos = await processVideos(formData.videos);\r\n\r\n        return {\r\n            title: formData.title,\r\n            propertyType: formData.propertyType,\r\n            listingType: formData.listingType,\r\n            status: formData.status,\r\n            description: formData.description,\r\n            shortDescription: formData.shortDescription,\r\n\r\n            location: {\r\n                addressLine1: formData.addressLine1,\r\n                addressLine2: formData.addressLine2,\r\n                city: formData.city,\r\n                cityId: formData.cityId,\r\n                state: formData.state,\r\n                stateId: formData.stateId,\r\n                stateCode: formData.stateCode,\r\n                postalCode: formData.postalCode,\r\n                country: formData.country,\r\n                countryCode: formData.countryCode,\r\n                countryId: formData.countryId,\r\n                neighborhood: formData.neighborhood,\r\n                landmark: formData.landmark,\r\n            },\r\n            address: formData.addressLine1,\r\n            city: formData.city,\r\n            state: formData.state,\r\n            zipCode: formData.postalCode,\r\n\r\n            price: {\r\n                amount: formData.priceAmount,\r\n                currency: formData.currency,\r\n                negotiable: formData.negotiable,\r\n            },\r\n            // Using context helpers where possible or falling back to simple format if needed\r\n            // formatPrice is available from context\r\n            priceString: `${formData.currency} ${formData.priceAmount.toLocaleString()}`,\r\n\r\n            dimensions: {\r\n                totalArea: formData.totalArea,\r\n                carpetArea: formData.carpetArea,\r\n                areaUnit: formData.areaUnit,\r\n                floors: formData.floors,\r\n                floorNumber: formData.floorNumber,\r\n                totalFloors: formData.totalFloors,\r\n            },\r\n            rooms: {\r\n                bedrooms: formData.bedrooms,\r\n                bathrooms: formData.bathrooms,\r\n                balconies: formData.balconies,\r\n                parkingSpaces: formData.parkingSpaces,\r\n            },\r\n            bedrooms: formData.bedrooms,\r\n            bathrooms: formData.bathrooms,\r\n            area: formData.totalArea,\r\n\r\n            yearBuilt: formData.yearBuilt,\r\n            furnishing: formData.furnishing,\r\n            condition: formData.condition,\r\n            facing: formData.facing,\r\n            amenities: formData.amenities,\r\n            features: [\r\n                ...formData.amenities.interior,\r\n                ...formData.amenities.exterior,\r\n                ...formData.amenities.community,\r\n                ...formData.amenities.security,\r\n                ...formData.amenities.utilities,\r\n            ],\r\n\r\n            images,\r\n            videos,\r\n            virtualTourUrl: formData.virtualTourUrl,\r\n            media: {\r\n                images: images.map((url, i) => ({\r\n                    id: `img-${i}`,\r\n                    url,\r\n                    type: 'image' as const,\r\n                    isPrimary: i === 0,\r\n                    order: i,\r\n                    uploadedAt: new Date().toISOString(),\r\n                })),\r\n                videos: videos.map((url, i) => ({\r\n                    id: `vid-${i}`,\r\n                    url,\r\n                    type: 'video' as const,\r\n                    order: i,\r\n                    uploadedAt: new Date().toISOString(),\r\n                })),\r\n                floorPlans: [],\r\n                virtualTourUrl: formData.virtualTourUrl,\r\n            },\r\n\r\n            contact: {\r\n                name: formData.contactName,\r\n                email: formData.contactEmail,\r\n                phone: formData.contactPhone,\r\n                alternatePhone: formData.alternatePhone,\r\n                preferredContactMethod: formData.preferredContactMethod,\r\n                company: formData.company,\r\n                licenseNumber: formData.licenseNumber,\r\n            },\r\n            contactName: formData.contactName,\r\n            phoneNumber: formData.contactPhone,\r\n            emailAddress: formData.contactEmail,\r\n\r\n            availableFrom: formData.availableFrom,\r\n            minimumLease: formData.minimumLease,\r\n            inclusions: formData.inclusions,\r\n            exclusions: formData.exclusions,\r\n\r\n            financial: {\r\n                deposit: formData.deposit,\r\n                maintenanceCharges: formData.maintenanceCharges,\r\n                maintenanceFrequency: 'monthly',\r\n            },\r\n\r\n            featured: formData.featured,\r\n        };\r\n    };\r\n\r\n    const handleSaveDraft = async () => {\r\n        if (!formData.title?.trim()) {\r\n            setErrors({ title: 'Property title is required to save draft' });\r\n            setCurrentStep(1);\r\n            showToast('Please enter a property title to save as draft.', 'error');\r\n            return;\r\n        }\r\n\r\n        setSaving(true);\r\n        try {\r\n            const propertyData = await buildPropertyData();\r\n\r\n            if (mode === 'edit' && idValue) {\r\n                const result = await updateProperty(idValue, { ...propertyData, draft: true, published: false });\r\n                if (!result) throw new Error('Failed to save property');\r\n            } else {\r\n                const result = await addProperty({ ...propertyData, draft: true, published: false });\r\n                if (!result) throw new Error('Failed to save property');\r\n            }\r\n            setIsDirty(false);\r\n            showToast('Property saved as draft successfully!', 'success');\r\n            setTimeout(() => navigate('/manager/dashboard/properties'), 1500);\r\n        } catch (error: any) {\r\n            console.error('Error saving draft:', error);\r\n            showToast(`Failed to save draft: ${error?.message || 'Unknown error'}`, 'error');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleSaveOrPublish = async () => {\r\n        const allErrors = validateAllFields();\r\n\r\n        if (Object.keys(allErrors).length > 0) {\r\n            setErrors(allErrors);\r\n            const firstErrorStep = getFirstErrorStep(allErrors);\r\n            setCurrentStep(firstErrorStep);\r\n\r\n            const errorMessage = mode === 'edit'\r\n                ? 'Please fill in all required fields before saving.'\r\n                : 'Please fill in all required fields before publishing.';\r\n            showToast(errorMessage, 'error');\r\n            return;\r\n        }\r\n\r\n        setSaving(true);\r\n        try {\r\n            const propertyData = await buildPropertyData();\r\n\r\n            if (mode === 'edit' && idValue) {\r\n                const result = await updateProperty(idValue, { ...propertyData, published: true, draft: false });\r\n                if (!result) throw new Error('Failed to save property');\r\n                setIsDirty(false);\r\n                showToast('Property saved successfully!', 'success');\r\n            } else {\r\n                const result = await addProperty({ ...propertyData, published: true, draft: false });\r\n                if (!result) throw new Error('Failed to publish property');\r\n                setIsDirty(false);\r\n                showToast('Property published successfully!', 'success');\r\n            }\r\n            setTimeout(() => navigate('/manager/dashboard/properties'), 1500);\r\n        } catch (error: any) {\r\n            console.error('Error saving/publishing property:', error);\r\n            const actionWord = mode === 'edit' ? 'save' : 'publish';\r\n            showToast(`Failed to ${actionWord} property: ${error?.message || 'Unknown error'}`, 'error');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    if (loadingProperty) {\r\n        return (\r\n            <div className=\"max-w-6xl mx-auto font-sans pb-8\">\r\n                <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-12\">\r\n                    <div className=\"flex flex-col items-center justify-center gap-4\">\r\n                        <Loader2 className=\"w-12 h-12 text-primary animate-spin\" />\r\n                        <p className=\"text-lg text-gray-600 dark:text-gray-400\">Loading property details...</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (propertyNotFound && isEditMode) {\r\n        return (\r\n            <div className=\"max-w-6xl mx-auto font-sans pb-8\">\r\n                <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-12\">\r\n                    <div className=\"flex flex-col items-center justify-center gap-4\">\r\n                        <AlertCircle className=\"w-12 h-12 text-red-500\" />\r\n                        <p className=\"text-lg text-gray-800 dark:text-white font-medium\">Property Not Found</p>\r\n                        <p className=\"text-gray-600 dark:text-gray-400 text-center max-w-md\">\r\n                            The property you're trying to edit could not be found. It may have been deleted or you may not have access to it.\r\n                        </p>\r\n                        <button\r\n                            onClick={() => navigate('/manager/dashboard/properties')}\r\n                            className=\"mt-4 px-6 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors\"\r\n                        >\r\n                            Back to Properties\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const primaryButtonLabel = mode === 'edit'\r\n        ? (saving ? 'Saving...' : 'Save Property')\r\n        : (saving ? 'Publishing...' : 'Publish Property');\r\n\r\n    const primaryButtonIcon = mode === 'edit' ? <Save className=\"w-4 h-4\" /> : null;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto font-sans pb-8\">\r\n            {/* Header */}\r\n            <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6 mb-6\">\r\n                <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n                    <div>\r\n                        <div className=\"mb-4\">\r\n                            {/* Custom back button that respects unsaved changes */}\r\n                            <button\r\n                                onClick={() => {\r\n                                    if (isDirty && !saving) {\r\n                                        const confirmLeave = window.confirm(\r\n                                            'You have unsaved changes. Are you sure you want to leave? Your changes will be lost.'\r\n                                        );\r\n                                        if (!confirmLeave) return;\r\n                                    }\r\n                                    navigate(-1);\r\n                                }}\r\n                                className=\"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors\"\r\n                            >\r\n                                <ArrowLeft className=\"w-5 h-5\" />\r\n                                <span className=\"font-medium\">Back</span>\r\n                            </button>\r\n                        </div>\r\n                        <h1 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-1\">\r\n                            {mode === 'edit' ? 'Edit Property' : 'Add New Property'}\r\n                        </h1>\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">\r\n                            {mode === 'edit' ? 'Update your property listing' : 'Create a new property listing with all the details'}\r\n                        </p>\r\n                        {isDirty && (\r\n                            <p className=\"text-amber-600 dark:text-amber-400 text-sm mt-1 flex items-center gap-1\">\r\n                                <AlertCircle className=\"w-4 h-4\" />\r\n                                You have unsaved changes\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                        <button\r\n                            onClick={handleSaveDraft}\r\n                            disabled={saving}\r\n                            className=\"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50\"\r\n                        >\r\n                            {saving ? 'Saving...' : 'Save Draft'}\r\n                        </button>\r\n                        <button\r\n                            onClick={handleSaveOrPublish}\r\n                            disabled={saving}\r\n                            className=\"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2\"\r\n                        >\r\n                            {formData.featured && <Star className=\"w-4 h-4\" />}\r\n                            {primaryButtonIcon}\r\n                            {primaryButtonLabel}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Progress Bar / Tab Navigation */}\r\n                <div className=\"mt-6\">\r\n                    <div className=\"flex items-center justify-between overflow-x-auto pb-2\">\r\n                        {steps.map((step, index) => {\r\n                            // Determine if this step is accessible\r\n                            const isCurrentStep = currentStep === step.number;\r\n                            const isCompleted = currentStep > step.number;\r\n                            const isAccessible = mode === 'edit' ? true : (isCompleted || isCurrentStep);\r\n\r\n                            return (\r\n                                <div key={step.number} className=\"flex items-center flex-1 min-w-0\">\r\n                                    <div className=\"flex flex-col items-center flex-1 min-w-0\">\r\n                                        <button\r\n                                            onClick={() => isAccessible && handleTabClick(step.number)}\r\n                                            disabled={!isAccessible}\r\n                                            title={mode === 'edit' ? step.title : (isAccessible ? step.title : 'Complete previous steps first')}\r\n                                            className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all ${isCurrentStep\r\n                                                ? 'bg-primary text-white shadow-lg ring-4 ring-primary/20'\r\n                                                : isCompleted || mode === 'edit'\r\n                                                    ? 'bg-primary/80 text-white shadow-md cursor-pointer hover:scale-110 hover:bg-primary'\r\n                                                    : 'bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed'\r\n                                                }`}\r\n                                        >\r\n                                            {isCompleted && mode === 'create' ? (\r\n                                                <CheckCircle className=\"w-5 h-5\" />\r\n                                            ) : (\r\n                                                step.icon\r\n                                            )}\r\n                                        </button>\r\n                                        <span\r\n                                            className={`mt-2 text-xs font-medium text-center hidden md:block ${isCurrentStep || isCompleted || mode === 'edit'\r\n                                                ? 'text-primary'\r\n                                                : 'text-gray-500 dark:text-gray-400'\r\n                                                }`}\r\n                                        >\r\n                                            {step.title}\r\n                                        </span>\r\n                                    </div>\r\n                                    {index < steps.length - 1 && (\r\n                                        <div\r\n                                            className={`flex-1 h-1 mx-2 rounded hidden sm:block ${isCompleted || (mode === 'edit' && step.number < 5)\r\n                                                ? 'bg-primary'\r\n                                                : 'bg-gray-200 dark:bg-gray-700'\r\n                                                }`}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                    {mode === 'edit' && (\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center\">\r\n                            You can navigate to any tab. Changes will be saved when you click \"Save Property\".\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Form Content */}\r\n            <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6\">\r\n\r\n                {/* Step 1: Basic Info */}\r\n                {currentStep === 1 && (\r\n                    <div className=\"space-y-8\">\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Home className=\"w-5 h-5 text-primary\" />\r\n                                Basic Property Information\r\n                            </h2>\r\n\r\n                            {/* Title */}\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                    Property Title *\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.title}\r\n                                    onChange={(e) => handleInputChange('title', e.target.value)}\r\n                                    className={`w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white placeholder-gray-500 ${errors.title ? 'border-red-500' : 'border-gray-200 dark:border-gray-700'\r\n                                        }`}\r\n                                    placeholder=\"e.g., Luxurious 3BR Apartment with Ocean View\"\r\n                                />\r\n                                {errors.title && <p className=\"text-red-500 text-xs mt-1\">{errors.title}</p>}\r\n                            </div>\r\n\r\n                            {/* Property Type */}\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                    Property Type *\r\n                                </label>\r\n                                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3\">\r\n                                    {propertyTypes.map((type) => (\r\n                                        <button\r\n                                            key={type.value}\r\n                                            type=\"button\"\r\n                                            onClick={() => handleInputChange('propertyType', type.value)}\r\n                                            className={`flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all ${formData.propertyType === type.value\r\n                                                ? 'border-primary bg-primary/10 text-primary'\r\n                                                : 'border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600'\r\n                                                }`}\r\n                                        >\r\n                                            {type.icon}\r\n                                            <span className=\"text-sm font-medium\">{type.label}</span>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Listing Type & Status */}\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Listing Type *\r\n                                    </label>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {listingTypes.map((type) => (\r\n                                            <button\r\n                                                key={type.value}\r\n                                                type=\"button\"\r\n                                                onClick={() => handleInputChange('listingType', type.value)}\r\n                                                className={`px-4 py-2 rounded-lg border transition-all ${formData.listingType === type.value\r\n                                                    ? 'border-primary bg-primary text-white'\r\n                                                    : 'border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600'\r\n                                                    }`}\r\n                                            >\r\n                                                {type.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Status *\r\n                                    </label>\r\n                                    <select\r\n                                        value={formData.status}\r\n                                        onChange={(e) => handleInputChange('status', e.target.value as PropertyStatus)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                    >\r\n                                        {statusOptions.map((status) => (\r\n                                            <option key={status.value} value={status.value}>\r\n                                                {status.label}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Pricing */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <DollarSign className=\"w-5 h-5 text-primary\" />\r\n                                Pricing\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Country\r\n                                    </label>\r\n                                    <select\r\n                                        value={formData.countryCode}\r\n                                        onChange={(e) => handleCountryChange(e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                    >\r\n                                        {countries.map((country) => (\r\n                                            <option key={country.code} value={country.code}>\r\n                                                {country.name} ({country.currency})\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Price *\r\n                                    </label>\r\n                                    <div className=\"relative\">\r\n                                        <span className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500\">\r\n                                            {formData.currency}\r\n                                        </span>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            value={formData.priceAmount || ''}\r\n                                            onChange={(e) => handleInputChange('priceAmount', parseFloat(e.target.value) || 0)}\r\n                                            className={`w-full pl-16 pr-10 py-3 bg-gray-50 dark:bg-gray-800 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600 ${errors.priceAmount ? 'border-red-500' : 'border-gray-200 dark:border-gray-700'\r\n                                                }`}\r\n                                            placeholder=\"0\"\r\n                                        />\r\n                                    </div>\r\n                                    {errors.priceAmount && <p className=\"text-red-500 text-xs mt-1\">{errors.priceAmount}</p>}\r\n                                </div>\r\n\r\n                                <div className=\"flex items-end\">\r\n                                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={formData.negotiable}\r\n                                            onChange={(e) => handleInputChange('negotiable', e.target.checked)}\r\n                                            className=\"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary transition-all\"\r\n                                        />\r\n                                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                                            Price is Negotiable\r\n                                        </span>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Featured Toggle */}\r\n                            <div className=\"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n                                <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={formData.featured}\r\n                                        onChange={(e) => handleInputChange('featured', e.target.checked)}\r\n                                        className=\"w-5 h-5 rounded border-yellow-400 text-yellow-600 focus:ring-yellow-500\"\r\n                                    />\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200 flex items-center gap-2\">\r\n                                            <Star className=\"w-4 h-4\" />\r\n                                            Mark as Featured Property\r\n                                        </span>\r\n                                        <p className=\"text-xs text-yellow-600 dark:text-yellow-300 mt-1\">\r\n                                            Featured properties get more visibility and appear at the top of search results\r\n                                        </p>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 2: Location */}\r\n                {currentStep === 2 && (\r\n                    <div className=\"space-y-6\">\r\n                        <AddressSection\r\n                            key={`address-${idValue || 'new'}-${formData.countryId || ''}-${formData.stateId || ''}-${formData.cityId || ''}`}\r\n                            value={{\r\n                                countryId: formData.countryId || '',\r\n                                countryName: formData.country || '',\r\n                                countryCode: formData.countryCode || '',\r\n                                stateId: formData.stateId || '',\r\n                                stateName: formData.state || '',\r\n                                stateCode: formData.stateCode || '',\r\n                                cityId: formData.cityId || '',\r\n                                cityName: formData.city || '',\r\n                                addressLine1: formData.addressLine1 || '',\r\n                                addressLine2: formData.addressLine2 || '',\r\n                                postalCode: formData.postalCode || '',\r\n                                neighborhood: formData.neighborhood || '',\r\n                                landmark: formData.landmark || '',\r\n                            }}\r\n                            onChange={(addressData: AddressFormData) => {\r\n                                setFormData(prev => ({\r\n                                    ...prev,\r\n                                    countryId: addressData.countryId,\r\n                                    country: addressData.countryName,\r\n                                    countryCode: addressData.countryCode,\r\n                                    stateId: addressData.stateId,\r\n                                    state: addressData.stateName,\r\n                                    stateCode: addressData.stateCode,\r\n                                    cityId: addressData.cityId,\r\n                                    city: addressData.cityName,\r\n                                    addressLine1: addressData.addressLine1,\r\n                                    addressLine2: addressData.addressLine2,\r\n                                    postalCode: addressData.postalCode,\r\n                                    neighborhood: addressData.neighborhood,\r\n                                    landmark: addressData.landmark,\r\n                                }));\r\n                                // Only mark as dirty after initial load is complete\r\n                                if (hasInitializedRef.current || mode === 'create') {\r\n                                    setIsDirty(true);\r\n                                }\r\n                            }}\r\n                            errors={errors}\r\n                            disabled={saving}\r\n                            required={true}\r\n                            initialCountry={formData.country}\r\n                            initialCountryCode={formData.countryCode}\r\n                            initialState={formData.state}\r\n                            initialCity={formData.city}\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 3: Property Details */}\r\n                {currentStep === 3 && (\r\n                    <div className=\"space-y-8\">\r\n                        {/* Area & Dimensions */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Maximize className=\"w-5 h-5 text-primary\" />\r\n                                Area & Dimensions\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Total Area *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={formData.totalArea || ''}\r\n                                        onChange={(e) => handleInputChange('totalArea', parseFloat(e.target.value) || 0)}\r\n                                        className={`w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600 ${errors.totalArea ? 'border-red-500' : 'border-gray-200 dark:border-gray-700'\r\n                                            }`}\r\n                                        placeholder=\"0\"\r\n                                    />\r\n                                    {errors.totalArea && <p className=\"text-red-500 text-xs mt-1\">{errors.totalArea}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Carpet Area\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={formData.carpetArea || ''}\r\n                                        onChange={(e) => handleInputChange('carpetArea', parseFloat(e.target.value) || 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                        placeholder=\"0\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Area Unit\r\n                                    </label>\r\n                                    <select\r\n                                        value={formData.areaUnit}\r\n                                        onChange={(e) => handleInputChange('areaUnit', e.target.value as AreaUnit)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                    >\r\n                                        {areaUnits.map((unit) => (\r\n                                            <option key={unit.value} value={unit.value}>\r\n                                                {unit.label}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Year Built\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"1800\"\r\n                                        max={new Date().getFullYear()}\r\n                                        value={formData.yearBuilt || ''}\r\n                                        onChange={(e) => handleInputChange('yearBuilt', parseInt(e.target.value) || 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Rooms */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Bed className=\"w-5 h-5 text-primary\" />\r\n                                Rooms & Spaces\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        <Bed className=\"w-4 h-4 inline mr-1\" /> Bedrooms *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={getNumericDisplayValue(formData.bedrooms)}\r\n                                        onChange={(e) => handleNumericChange('bedrooms', e.target.value, 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        <Bath className=\"w-4 h-4 inline mr-1\" /> Bathrooms *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={getNumericDisplayValue(formData.bathrooms)}\r\n                                        onChange={(e) => handleNumericChange('bathrooms', e.target.value, 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Balconies\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={getNumericDisplayValue(formData.balconies)}\r\n                                        onChange={(e) => handleNumericChange('balconies', e.target.value, 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        <Car className=\"w-4 h-4 inline mr-1\" /> Parking Spaces\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={getNumericDisplayValue(formData.parkingSpaces)}\r\n                                        onChange={(e) => handleNumericChange('parkingSpaces', e.target.value, 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Floor Info */}\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Floor Number\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={getNumericDisplayValue(formData.floorNumber)}\r\n                                        onChange={(e) => handleNumericChange('floorNumber', e.target.value, 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Total Floors\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"1\"\r\n                                        value={getNumericDisplayValue(formData.totalFloors)}\r\n                                        onChange={(e) => handleNumericChange('totalFloors', e.target.value, 1)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Facing Direction\r\n                                    </label>\r\n                                    <select\r\n                                        value={formData.facing}\r\n                                        onChange={(e) => handleInputChange('facing', e.target.value as FacingDirection)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                    >\r\n                                        {facingOptions.map((option) => (\r\n                                            <option key={option.value} value={option.value}>\r\n                                                {option.label}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Condition & Furnishing */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Settings className=\"w-5 h-5 text-primary\" />\r\n                                Condition & Furnishing\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Furnishing Status\r\n                                    </label>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {furnishingOptions.map((option) => (\r\n                                            <button\r\n                                                key={option.value}\r\n                                                type=\"button\"\r\n                                                onClick={() => handleInputChange('furnishing', option.value)}\r\n                                                className={`px-4 py-2 rounded-lg border transition-all ${formData.furnishing === option.value\r\n                                                    ? 'border-primary bg-primary text-white'\r\n                                                    : 'border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:border-gray-300'\r\n                                                    }`}\r\n                                            >\r\n                                                {option.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Property Condition\r\n                                    </label>\r\n                                    <select\r\n                                        value={formData.condition}\r\n                                        onChange={(e) => handleInputChange('condition', e.target.value as PropertyCondition)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                    >\r\n                                        {conditionOptions.map((option) => (\r\n                                            <option key={option.value} value={option.value}>\r\n                                                {option.label}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Description */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <FileText className=\"w-5 h-5 text-primary\" />\r\n                                Description\r\n                            </h2>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Short Description (for cards)\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.shortDescription}\r\n                                        onChange={(e) => handleInputChange('shortDescription', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                        placeholder=\"A brief summary of the property (max 150 chars)\"\r\n                                        maxLength={150}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Full Description\r\n                                    </label>\r\n                                    <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden\">\r\n                                        <div className=\"border-b border-gray-200 dark:border-gray-700 p-2 flex gap-2 flex-wrap bg-gray-50 dark:bg-gray-800\">\r\n                                            <button type=\"button\" className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\">\r\n                                                <Bold className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button type=\"button\" className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\">\r\n                                                <Italic className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button type=\"button\" className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\">\r\n                                                <Underline className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button type=\"button\" className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\">\r\n                                                <List className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button type=\"button\" className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\">\r\n                                                <LinkIcon className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                        <textarea\r\n                                            value={formData.description}\r\n                                            onChange={(e) => handleInputChange('description', e.target.value)}\r\n                                            className=\"w-full p-4 min-h-[200px] focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\r\n                                            placeholder=\"Enter a detailed property description...\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 4: Media & Features */}\r\n                {currentStep === 4 && (\r\n                    <div className=\"space-y-8\">\r\n                        {/* Images */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Camera className=\"w-5 h-5 text-primary\" />\r\n                                Property Images\r\n                            </h2>\r\n\r\n                            <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center hover:border-primary transition-colors\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    id=\"image-upload\"\r\n                                    multiple\r\n                                    accept=\"image/png,image/jpg,image/jpeg,image/webp\"\r\n                                    onChange={handleImageUpload}\r\n                                    className=\"hidden\"\r\n                                />\r\n                                <label htmlFor=\"image-upload\" className=\"cursor-pointer flex flex-col items-center\">\r\n                                    <Upload className=\"w-12 h-12 text-gray-400 mb-4\" />\r\n                                    <p className=\"text-gray-700 dark:text-gray-300 font-medium mb-1\">Click to upload images</p>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">PNG, JPG, JPEG, WEBP up to 10MB each</p>\r\n                                </label>\r\n                            </div>\r\n                            {errors.images && <p className=\"text-red-500 text-xs mt-1\">{errors.images}</p>}\r\n\r\n                            {imagePreviews.length > 0 && (\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">\r\n                                    {imagePreviews.map((preview, index) => (\r\n                                        <div key={index} className=\"relative group rounded-lg overflow-hidden\">\r\n                                            <img\r\n                                                src={preview}\r\n                                                alt={`Preview ${index + 1}`}\r\n                                                className=\"w-full h-32 object-cover\"\r\n                                            />\r\n                                            {index === 0 && (\r\n                                                <span className=\"absolute top-2 left-2 px-2 py-1 bg-primary text-white text-xs rounded\">\r\n                                                    Primary\r\n                                                </span>\r\n                                            )}\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => removeImage(index)}\r\n                                                className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                            >\r\n                                                <X className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Videos */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Video className=\"w-5 h-5 text-primary\" />\r\n                                Property Videos\r\n                            </h2>\r\n\r\n                            <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center hover:border-primary transition-colors\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    id=\"video-upload\"\r\n                                    multiple\r\n                                    accept=\"video/mp4,video/mov,video/avi\"\r\n                                    onChange={handleVideoUpload}\r\n                                    className=\"hidden\"\r\n                                />\r\n                                <label htmlFor=\"video-upload\" className=\"cursor-pointer flex flex-col items-center\">\r\n                                    <Video className=\"w-12 h-12 text-gray-400 mb-4\" />\r\n                                    <p className=\"text-gray-700 dark:text-gray-300 font-medium mb-1\">Click to upload videos</p>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">MP4, MOV, AVI up to 50MB each</p>\r\n                                </label>\r\n                            </div>\r\n\r\n                            {videoPreviews.length > 0 && (\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n                                    {videoPreviews.map((preview, index) => (\r\n                                        <div key={index} className=\"relative group rounded-lg overflow-hidden\">\r\n                                            <video src={preview} className=\"w-full h-48 object-cover\" controls />\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => removeVideo(index)}\r\n                                                className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                            >\r\n                                                <X className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Virtual Tour */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Globe className=\"w-5 h-5 text-primary\" />\r\n                                Virtual Tour\r\n                            </h2>\r\n\r\n                            <input\r\n                                type=\"url\"\r\n                                value={formData.virtualTourUrl}\r\n                                onChange={(e) => handleInputChange('virtualTourUrl', e.target.value)}\r\n                                className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                placeholder=\"https://your-virtual-tour-url.com\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Amenities */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Star className=\"w-5 h-5 text-primary\" />\r\n                                Amenities & Features\r\n                            </h2>\r\n\r\n                            {Object.entries(amenitiesGroups).map(([category, amenities]) => (\r\n                                <div key={category} className=\"mb-6\">\r\n                                    <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 capitalize\">\r\n                                        {category.replace('_', ' ')} Features\r\n                                    </h3>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {amenities.map((amenity) => (\r\n                                            <button\r\n                                                key={amenity.id}\r\n                                                type=\"button\"\r\n                                                onClick={() => toggleAmenity(category as keyof typeof amenitiesGroups, amenity.id)}\r\n                                                className={`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${formData.amenities[category as keyof typeof amenitiesGroups]?.includes(amenity.id)\r\n                                                    ? 'border-primary bg-primary text-white'\r\n                                                    : 'border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:border-gray-300'\r\n                                                    }`}\r\n                                            >\r\n                                                {amenity.icon}\r\n                                                {amenity.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 5: Contact & Publish */}\r\n                {currentStep === 5 && (\r\n                    <div className=\"space-y-8\">\r\n                        {/* Contact Information */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <User className=\"w-5 h-5 text-primary\" />\r\n                                Contact Information\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Contact Name *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.contactName}\r\n                                        onChange={(e) => handleInputChange('contactName', e.target.value)}\r\n                                        className={`w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white ${errors.contactName ? 'border-red-500' : 'border-gray-200 dark:border-gray-700'\r\n                                            }`}\r\n                                        placeholder=\"Enter contact name\"\r\n                                    />\r\n                                    {errors.contactName && <p className=\"text-red-500 text-xs mt-1\">{errors.contactName}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Email Address *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={formData.contactEmail}\r\n                                        onChange={(e) => handleInputChange('contactEmail', e.target.value)}\r\n                                        className={`w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white ${errors.contactEmail ? 'border-red-500' : 'border-gray-200 dark:border-gray-700'\r\n                                            }`}\r\n                                        placeholder=\"Enter email address\"\r\n                                    />\r\n                                    {errors.contactEmail && <p className=\"text-red-500 text-xs mt-1\">{errors.contactEmail}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Phone Number *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        value={formData.contactPhone}\r\n                                        onChange={(e) => handleInputChange('contactPhone', e.target.value)}\r\n                                        className={`w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white ${errors.contactPhone ? 'border-red-500' : 'border-gray-200 dark:border-gray-700'\r\n                                            }`}\r\n                                        placeholder=\"+1 (555) 000-0000\"\r\n                                    />\r\n                                    {errors.contactPhone && <p className=\"text-red-500 text-xs mt-1\">{errors.contactPhone}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Alternate Phone\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        value={formData.alternatePhone}\r\n                                        onChange={(e) => handleInputChange('alternatePhone', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                        placeholder=\"+1 (555) 000-0000 (optional)\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Company Name\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.company}\r\n                                        onChange={(e) => handleInputChange('company', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                        placeholder=\"Real estate agency (optional)\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        License Number\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.licenseNumber}\r\n                                        onChange={(e) => handleInputChange('licenseNumber', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                        placeholder=\"Agent license number (optional)\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Availability & Terms */}\r\n                        <div>\r\n                            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <Calendar className=\"w-5 h-5 text-primary\" />\r\n                                Availability & Terms\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Available From\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={formData.availableFrom}\r\n                                        onChange={(e) => handleInputChange('availableFrom', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                    />\r\n                                </div>\r\n\r\n                                {(formData.listingType === 'rent' || formData.listingType === 'lease') && (\r\n                                    <div>\r\n                                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                            Minimum Lease (months)\r\n                                        </label>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            min=\"1\"\r\n                                            value={formData.minimumLease}\r\n                                            onChange={(e) => handleInputChange('minimumLease', parseInt(e.target.value) || 1)}\r\n                                            className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Security Deposit ({formData.currency})\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={formData.deposit || ''}\r\n                                        onChange={(e) => handleInputChange('deposit', parseFloat(e.target.value) || 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                        placeholder=\"0\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Maintenance Charges ({formData.currency}/month)\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={formData.maintenanceCharges || ''}\r\n                                        onChange={(e) => handleInputChange('maintenanceCharges', parseFloat(e.target.value) || 0)}\r\n                                        className=\"w-full px-4 py-3 pr-10 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white transition-all hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                        placeholder=\"0\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Inclusions\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.inclusions}\r\n                                        onChange={(e) => handleInputChange('inclusions', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                        placeholder=\"e.g., Appliances, furniture, utilities\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                        Exclusions\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.exclusions}\r\n                                        onChange={(e) => handleInputChange('exclusions', e.target.value)}\r\n                                        className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-900 dark:text-white\"\r\n                                        placeholder=\"e.g., Parking fees, utility bills\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Ready to Save/Publish */}\r\n                        <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6\">\r\n                            <div className=\"flex items-start gap-4\">\r\n                                <div className=\"w-12 h-12 bg-green-100 dark:bg-green-900/40 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                    <CheckCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-green-800 dark:text-green-200 font-medium text-lg\">\r\n                                        {mode === 'edit' ? 'Ready to Save!' : 'Ready to Publish!'}\r\n                                    </p>\r\n                                    <p className=\"text-green-700 dark:text-green-300 text-sm mt-1\">\r\n                                        {mode === 'edit'\r\n                                            ? 'Review your changes and click \"Save Property\" to update the listing. You can also save as draft if the listing is not ready.'\r\n                                            : 'Your property listing is complete. Review the details and publish when ready. You can also save as draft and publish later.'\r\n                                        }\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Navigation Buttons */}\r\n                <div className=\"flex flex-col sm:flex-row justify-between gap-3 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handlePrevious}\r\n                        disabled={currentStep === 1}\r\n                        className={`px-6 py-3 border border-gray-300 dark:border-gray-700 rounded-lg flex items-center justify-center gap-2 transition-all ${currentStep === 1\r\n                            ? 'opacity-50 cursor-not-allowed'\r\n                            : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800'\r\n                            }`}\r\n                    >\r\n                        <ChevronLeft className=\"w-5 h-5\" />\r\n                        Previous\r\n                    </button>\r\n\r\n                    {currentStep < 5 ? (\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={handleNext}\r\n                            className=\"px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg flex items-center justify-center gap-2 transition-all shadow-lg\"\r\n                        >\r\n                            Next: {steps[currentStep]?.title}\r\n                            <ChevronRight className=\"w-5 h-5\" />\r\n                        </button>\r\n                    ) : (\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleSaveDraft}\r\n                                disabled={saving}\r\n                                className=\"px-6 py-3 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all disabled:opacity-50\"\r\n                            >\r\n                                Save as Draft\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleSaveOrPublish}\r\n                                disabled={saving}\r\n                                className=\"px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-all shadow-lg disabled:opacity-50 flex items-center gap-2\"\r\n                            >\r\n                                {formData.featured && <Star className=\"w-4 h-4\" />}\r\n                                {primaryButtonIcon}\r\n                                {primaryButtonLabel}\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Toast Notification */}\r\n            <Toast\r\n                id={toast.id}\r\n                message={toast.message}\r\n                type={toast.type}\r\n                isVisible={toast.visible}\r\n                onClose={hideToast}\r\n                duration={3000}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":["__iconNode","Bold","createLucideIcon","Dumbbell","Italic","Link","TreePine","Underline","Waves","Wifi","MOCK_COUNTRIES","MOCK_STATES","MOCK_CITIES","getCountries","getStatesByCountry","countryId","getCitiesByState","stateId","resolveAddressToIds","countryName","countryCode","stateName","cityName","AddressSection","value","onChange","errors","disabled","required","initialCountry","initialCountryCode","initialState","initialCity","countries","setCountries","useState","states","setStates","cities","setCities","loadingCountries","setLoadingCountries","loadingStates","setLoadingStates","loadingCities","setLoadingCities","countryError","setCountryError","stateError","setStateError","cityError","setCityError","initializedRef","useRef","initialLoadComplete","setInitialLoadComplete","useEffect","data","error","idKey","country","c","statesData","citiesData","citiesResult","state","s","city","cityId","cityData","resolvedIdKey","loadStates","citiesError","isMounted","loadCities","handleCountryChange","useCallback","handleStateChange","handleCityChange","handleTextChange","field","fieldValue","handlePostalCodeChange","e","numericValue","retryCountries","retryStates","retryCities","isStateDisabled","useMemo","isCityDisabled","renderSelect","id","label","options","isLoading","isDisabled","onRetry","placeholder","validationError","jsxs","jsx","option","Loader2","ChevronDown","AlertCircle","RefreshCw","MapPin","propertyTypes","Building","Home","listingTypes","statusOptions","furnishingOptions","conditionOptions","facingOptions","areaUnits","amenitiesGroups","Shield","Camera","Phone","Video","Settings","initialFormData","AddPropertyPage","navigate","useNavigate","useParams","idValue","addProperty","updateProperty","getProperty","formatPrice","formatArea","uploadImages","uploadVideos","fetchProperties","contextLoading","useProperties","mode","isEditMode","currentStep","setCurrentStep","formData","setFormData","originalFormData","setOriginalFormData","setErrors","imagePreviews","setImagePreviews","videoPreviews","setVideoPreviews","saving","setSaving","loadingProperty","setLoadingProperty","propertyNotFound","setPropertyNotFound","isDirty","setIsDirty","hasInitializedRef","toast","setToast","showToast","message","type","hideToast","prev","handleBeforeUnload","path","property","loadedFormData","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_A","_B","_C","_D","_E","_F","_G","_H","_I","_J","_K","previews","img","steps","FileText","validateStep","step","newErrors","handleNext","handlePrevious","validateAllFields","allErrors","getFirstErrorStep","errorFields","handleInputChange","handleNumericChange","defaultValue","numValue","getNumericDisplayValue","handleTabClick","stepNumber","toggleAmenity","category","amenityId","current","updated","a","handleImageUpload","file","reader","event","handleVideoUpload","removeImage","index","_","removeVideo","processImages","files","existingUrls","newFiles","uploadedUrls","err","base64","resolve","reject","processVideos","buildPropertyData","images","videos","url","handleSaveDraft","propertyData","handleSaveOrPublish","firstErrorStep","primaryButtonLabel","primaryButtonIcon","Save","ArrowLeft","Star","isCurrentStep","isCompleted","isAccessible","CheckCircle","status","DollarSign","addressData","Maximize","unit","Bed","Bath","Car","List","LinkIcon","Upload","preview","X","Globe","amenities","amenity","User","Calendar","ChevronLeft","ChevronRight","Toast"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}