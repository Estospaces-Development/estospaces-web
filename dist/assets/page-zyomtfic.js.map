{"version":3,"file":"page-zyomtfic.js","sources":["../../node_modules/lucide-react/dist/esm/icons/circle-plus.js","../../src/components/dashboard/messaging/ConversationListSkeleton.tsx","../../src/pages/user/dashboard/messages/page.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M8 12h8\", key: \"1wcyev\" }],\n  [\"path\", { d: \"M12 8v8\", key: \"napkw2\" }]\n];\nconst CirclePlus = createLucideIcon(\"circle-plus\", __iconNode);\n\nexport { __iconNode, CirclePlus as default };\n//# sourceMappingURL=circle-plus.js.map\n","\"use client\";\r\n\r\nimport React from 'react';\r\n\r\nexport default function ConversationListSkeleton() {\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-white dark:bg-gray-800 animate-pulse\">\r\n            <div className=\"p-4 border-b dark:border-gray-700\">\r\n                <div className=\"h-10 bg-gray-100 dark:bg-gray-700 rounded-xl\"></div>\r\n            </div>\r\n            <div className=\"flex-1 space-y-1\">\r\n                {[...Array(5)].map((_, i) => (\r\n                    <div key={i} className=\"p-4 flex items-center gap-3 border-b dark:border-gray-700\">\r\n                        <div className=\"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex-shrink-0\"></div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <div className=\"h-4 w-1/3 bg-gray-100 dark:bg-gray-700 rounded\"></div>\r\n                                <div className=\"h-3 w-12 bg-gray-100 dark:bg-gray-700 rounded\"></div>\r\n                            </div>\r\n                            <div className=\"h-3 w-2/3 bg-gray-100 dark:bg-gray-700 rounded\"></div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect, Suspense } from 'react';\r\nimport { MessageSquare, AlertCircle, ArrowLeft, Search, PlusCircle } from 'lucide-react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useMessages } from '@/contexts/MessagesContext';\r\nimport ConversationList from '@/components/dashboard/messaging/ConversationList';\r\nimport ConversationThread from '@/components/dashboard/messaging/ConversationThread';\r\nimport MessageInput from '@/components/dashboard/messaging/MessageInput';\r\nimport ConversationListSkeleton from '@/components/dashboard/messaging/ConversationListSkeleton';\r\nimport ConversationThreadSkeleton from '@/components/dashboard/messaging/ConversationThreadSkeleton';\r\n\r\nfunction MessagesContent() {\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const {\r\n        conversations,\r\n        isLoading,\r\n        selectedConversationId,\r\n        setSelectedConversationId,\r\n        sendMessage,\r\n    } = useMessages();\r\n\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Handle new conversation from query params\r\n    useEffect(() => {\r\n        const newContactName = searchParams.get('newConversationWith');\r\n        if (newContactName) {\r\n            const existing = conversations.find((c: any) =>\r\n                c.agentName === newContactName ||\r\n                c.participants?.some((p: any) => p.name === newContactName)\r\n            );\r\n\r\n            if (existing) {\r\n                setSelectedConversationId(existing.id);\r\n            } else {\r\n                console.log(`Starting new conversation with ${newContactName}`);\r\n            }\r\n        }\r\n    }, [searchParams, conversations, setSelectedConversationId]);\r\n\r\n    const handleSend = async (conversationId: string, text: string, attachments: any[]) => {\r\n        try {\r\n            await sendMessage(conversationId, text, attachments);\r\n            setError(null);\r\n        } catch (err) {\r\n            setError('Failed to send message. Please try again.');\r\n            console.error('Error sending message:', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 pb-12\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                {/* Header Area */}\r\n                <div className=\"mb-8\">\r\n                    <button\r\n                        onClick={() => navigate('/user/dashboard')}\r\n                        className=\"mb-4 flex items-center gap-2 text-gray-500 hover:text-orange-500 transition-colors group\"\r\n                    >\r\n                        <ArrowLeft size={18} className=\"group-hover:-translate-x-1 transition-transform\" />\r\n                        <span>Back to Dashboard</span>\r\n                    </button>\r\n\r\n                    <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6\">\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3\">\r\n                                <MessageSquare className=\"text-orange-500\" />\r\n                                Messages\r\n                            </h1>\r\n                            <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\r\n                                Chat with agents and property managers directly\r\n                            </p>\r\n                        </div>\r\n\r\n                        <button\r\n                            className=\"flex items-center gap-2 px-6 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-xl font-bold hover:shadow-lg transition-all active:scale-95\"\r\n                        >\r\n                            <PlusCircle size={20} />\r\n                            New Enquiry\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Error Message */}\r\n                {error && (\r\n                    <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-2 text-sm text-red-700 dark:text-red-400\">\r\n                        <AlertCircle size={18} />\r\n                        <span>{error}</span>\r\n                        <button\r\n                            onClick={() => setError(null)}\r\n                            className=\"ml-auto text-xl font-bold\"\r\n                        >\r\n                            Ã—\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Messaging Layout */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6 h-[700px]\">\r\n                    {/* Conversation List */}\r\n                    <div className=\"lg:col-span-4 bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden\">\r\n                        {isLoading ? (\r\n                            <ConversationListSkeleton />\r\n                        ) : (\r\n                            <ConversationList\r\n                                onSelectConversation={setSelectedConversationId}\r\n                                selectedConversationId={selectedConversationId}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Conversation Thread */}\r\n                    <div className=\"lg:col-span-8 bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden flex flex-col\">\r\n                        {selectedConversationId ? (\r\n                            <>\r\n                                <ConversationThread conversationId={selectedConversationId} />\r\n                                <MessageInput\r\n                                    conversationId={selectedConversationId}\r\n                                    onSend={handleSend}\r\n                                />\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"flex-1 flex flex-col items-center justify-center p-8 text-center bg-gray-50/30 dark:bg-gray-900/30\">\r\n                                <div className=\"mb-6 bg-white dark:bg-gray-800 w-24 h-24 rounded-full shadow-2xl flex items-center justify-center relative\">\r\n                                    <MessageSquare size={40} className=\"text-orange-500\" />\r\n                                    <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-orange-100 rounded-full animate-ping\"></div>\r\n                                </div>\r\n                                <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                                    Select an enquiry\r\n                                </h3>\r\n                                <p className=\"text-gray-500 dark:text-gray-400 max-w-sm mx-auto\">\r\n                                    Pick a conversation from the sidebar to view your messages and updates from property agents.\r\n                                </p>\r\n                                <button\r\n                                    onClick={() => navigate('/user/dashboard/discover')}\r\n                                    className=\"mt-8 px-8 py-3 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-all shadow-lg shadow-orange-500/30\"\r\n                                >\r\n                                    Find Property to Enquiry\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function MessagesPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\"><div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500\"></div></div>}>\r\n            <MessagesContent />\r\n        </Suspense>\r\n    );\r\n}\r\n\r\n"],"names":["__iconNode","CirclePlus","createLucideIcon","ConversationListSkeleton","jsxs","jsx","_","i","MessagesContent","navigate","useNavigate","searchParams","useSearchParams","conversations","isLoading","selectedConversationId","setSelectedConversationId","sendMessage","useMessages","error","setError","useState","useEffect","newContactName","existing","c","_a","p","handleSend","conversationId","text","attachments","err","ArrowLeft","MessageSquare","PlusCircle","AlertCircle","ConversationList","Fragment","ConversationThread","MessageInput","MessagesPage","Suspense"],"mappings":"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","x_google_ignoreList":[0]}