{"version":3,"file":"page-DtOwUmi8.js","sources":["../../src/pages/auth/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useAuth, getRedirectPath } from '@/contexts/AuthContext';\r\nimport AuthLayout from '@/components/auth/AuthLayout';\r\nimport { Eye, EyeOff, AlertCircle, ArrowLeft } from 'lucide-react';\r\n\r\nexport default function LoginPage() {\r\n  const navigate = useNavigate();\r\n  const { isAuthenticated, loading: authLoading, getRole, login } = useAuth();\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [emailError, setEmailError] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n  const [generalError, setGeneralError] = useState('');\r\n\r\n  // Redirect if already authenticated\r\n  useEffect(() => {\r\n    if (isAuthenticated && !authLoading) {\r\n      const role = getRole();\r\n      navigate(getRedirectPath(role));\r\n    }\r\n  }, [isAuthenticated, authLoading, getRole, navigate]);\r\n\r\n  const validateEmail = (value: string) => {\r\n    if (!value) return 'Email is required';\r\n    if (!/^\\S+@\\S+\\.\\S+$/.test(value)) return 'Enter a valid email';\r\n    return '';\r\n  };\r\n\r\n  const validatePassword = (value: string) => {\r\n    if (!value) return 'Password is required';\r\n    if (value.length < 6) return 'Password must be at least 6 characters';\r\n    return '';\r\n  };\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (loading) return;\r\n\r\n    const emailErr = validateEmail(email);\r\n    const passErr = validatePassword(password);\r\n\r\n    setEmailError(emailErr);\r\n    setPasswordError(passErr);\r\n    setGeneralError('');\r\n\r\n    if (emailErr || passErr) return;\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const result = await login(email, password);\r\n\r\n      if (!result.success) {\r\n        setGeneralError(result.error || 'Login failed. Please try again.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Successfully logged in — redirect\r\n      const role = getRole();\r\n      navigate(getRedirectPath(role));\r\n    } catch {\r\n      setGeneralError('An unexpected error occurred. Please try again.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <AuthLayout>\r\n        <div className=\"flex flex-col items-center justify-center min-h-[300px]\">\r\n          <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mb-4\"></div>\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-sm\">Checking session...</p>\r\n        </div>\r\n      </AuthLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthLayout>\r\n      <div className=\"flex flex-col items-center\">\r\n        {/* Logo */}\r\n        <div className=\"mb-8\">\r\n          <img src=\"/images/auth/logo.jpg\" alt=\"Estospaces\" width={160} height={40} className=\"h-10 w-auto\" />\r\n        </div>\r\n\r\n        <h2 className=\"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 text-center\">\r\n          Sign in to Estospaces\r\n        </h2>\r\n\r\n        <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-8 text-center\">\r\n          Enter your email and password to continue\r\n        </p>\r\n\r\n        <form onSubmit={handleLogin} className=\"w-full\">\r\n          {/* Email Input */}\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              value={email}\r\n              onChange={(e) => {\r\n                setEmail(e.target.value);\r\n                setEmailError('');\r\n              }}\r\n              className={`w-full px-4 py-3 border rounded-md outline-none transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 ${emailError ? 'border-red-400 focus:border-red-500' : 'border-gray-300 dark:border-gray-600 focus:border-primary'\r\n                }`}\r\n            />\r\n            {emailError && <p className=\"text-red-500 text-xs mt-1\">{emailError}</p>}\r\n          </div>\r\n\r\n          {/* Password Input */}\r\n          <div className=\"mb-2\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Password</label>\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showPassword ? 'text' : 'password'}\r\n                placeholder=\"Enter your password\"\r\n                value={password}\r\n                onChange={(e) => {\r\n                  setPassword(e.target.value);\r\n                  setPasswordError('');\r\n                }}\r\n                className={`w-full px-4 py-3 pr-12 border rounded-md outline-none transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 ${passwordError ? 'border-red-400 focus:border-red-500' : 'border-gray-300 dark:border-gray-600 focus:border-primary'\r\n                  }`}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n              >\r\n                {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n              </button>\r\n            </div>\r\n            {passwordError && <p className=\"text-red-500 text-xs mt-1\">{passwordError}</p>}\r\n          </div>\r\n\r\n          {/* Forgot Password Link */}\r\n          <div className=\"text-right mb-6\">\r\n            <span className=\"text-primary text-sm font-medium cursor-pointer hover:underline\">\r\n              Forgot Password?\r\n            </span>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full py-3 bg-primary text-white font-medium rounded-md hover:bg-opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {loading ? 'Signing in...' : 'Sign In'}\r\n          </button>\r\n\r\n          {/* General Error Message */}\r\n          {generalError && (\r\n            <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md flex items-center gap-2\">\r\n              <AlertCircle className=\"text-red-500 dark:text-red-400 flex-shrink-0\" size={18} />\r\n              <p className=\"text-red-600 dark:text-red-400 text-sm\">{generalError}</p>\r\n            </div>\r\n          )}\r\n        </form>\r\n\r\n        {/* Demo credentials hint */}\r\n        <div className=\"mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-md w-full\">\r\n          <p className=\"text-orange-700 dark:text-orange-300 text-xs font-medium mb-1\">Demo Credentials:</p>\r\n          <p className=\"text-orange-600 dark:text-orange-400 text-xs\">Manager: manager@gmail.com / Estospaces@123</p>\r\n          <p className=\"text-orange-600 dark:text-orange-400 text-xs\">User: user@gmail.com / Estospaces@123</p>\r\n        </div>\r\n\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-6\">\r\n          Don&apos;t have an account?{' '}\r\n          <Link to=\"/register\" className=\"text-primary font-medium hover:underline\">\r\n            Sign Up\r\n          </Link>\r\n        </p>\r\n\r\n        <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-12 text-center leading-relaxed\">\r\n          By continuing you agree to Estospaces<br />\r\n          <Link to=\"/terms\" className=\"text-primary hover:underline\">terms &amp; conditions</Link>\r\n          {' · '}\r\n          <Link to=\"/privacy\" className=\"text-primary hover:underline\">privacy policy</Link>\r\n        </p>\r\n      </div>\r\n    </AuthLayout>\r\n  );\r\n}\r\n\r\n"],"names":["LoginPage","navigate","useNavigate","isAuthenticated","authLoading","getRole","login","useAuth","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","loading","setLoading","emailError","setEmailError","passwordError","setPasswordError","generalError","setGeneralError","useEffect","role","getRedirectPath","validateEmail","value","validatePassword","handleLogin","e","emailErr","passErr","result","jsx","AuthLayout","jsxs","EyeOff","Eye","AlertCircle","Link"],"mappings":"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"}