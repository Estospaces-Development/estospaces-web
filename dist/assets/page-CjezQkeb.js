import{r as l,j as e,G,a as T,H as R,X as A,B as Q,u as E,am as V,ao as q,T as H,S as $,a0 as K,q as U}from"./index-D9fuy-ar.js";import W from"./PropertyCard-CPXXlEvn.js";import{P as X}from"./PropertyCardSkeleton-B3DegnhR.js";import{L as J}from"./layers-DKheOhlI.js";import{A as O}from"./arrow-left-BaPK0xsr.js";import{G as Y}from"./grid-3x3-BadKZdXp.js";import{M as Z}from"./map-BfPghkKA.js";import"./ShareModal-DEtDfKka.js";import"./share-2-HEVtKF6m.js";import"./twitter-D1XJVDGg.js";import"./message-circle-Bh_ZnSbQ.js";import"./eye-Dzbd2rxv.js";import"./maximize-DMYfH0UC.js";import"./star-Xdww4Nds.js";const ee=({houses:j=[],agencies:b=[]})=>{const[n,c]=l.useState("standard"),[s,m]=l.useState(null),u={standard:{bg:"bg-gradient-to-br from-blue-50 via-green-50 to-blue-50 dark:from-blue-900/10 dark:via-green-900/10 dark:to-blue-900/10",pattern:"radial-gradient(circle, #3b82f6 1px, transparent 1px)",opacity:.2},satellite:{bg:"bg-gray-900",pattern:"radial-gradient(circle, #ffffff 1px, transparent 1px)",opacity:.15,overlay:"linear-gradient(to bottom right, rgba(17, 24, 39, 0.9), rgba(31, 41, 55, 0.8))"}}[n],d=(t,i)=>{m({...t,type:i})},g=()=>{m(null)};return e.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-20 flex bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-1",children:[e.jsxs("button",{onClick:()=>c("standard"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${n==="standard"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(J,{size:16}),"Standard"]}),e.jsxs("button",{onClick:()=>c("satellite"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${n==="satellite"?"bg-gray-800 dark:bg-white text-white dark:text-gray-900":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(G,{size:16}),"Satellite"]})]}),e.jsxs("div",{className:`relative w-full h-full transition-colors duration-500 ${u.bg}`,children:[e.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{opacity:u.opacity},children:e.jsx("div",{className:"w-full h-full",style:{backgroundImage:u.pattern,backgroundSize:"40px 40px"}})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm px-6 py-4 rounded-lg shadow-lg border border-gray-100 dark:border-gray-700",children:[e.jsx(T,{size:48,className:"mx-auto mb-2 text-orange-500"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-medium text-lg",children:"Interactive Map View"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Click markers to view details"})]})}),e.jsxs("div",{className:"absolute inset-0",children:[j.map((t,i)=>{const x=[{left:"25%",top:"35%"},{left:"65%",top:"45%"},{left:"45%",top:"65%"},{left:"15%",top:"75%"},{left:"85%",top:"25%"}],y=x[i%x.length];return e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-10",style:y,children:e.jsxs("button",{onClick:()=>d(t,"house"),className:"relative group focus:outline-none",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full border-2 border-white dark:border-gray-800 shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer",children:e.jsx(R,{size:20,className:"text-white"})}),(s==null?void 0:s.id)===t.id&&(s==null?void 0:s.type)==="house"&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-20 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm line-clamp-1",children:t.name||t.title}),e.jsx("button",{onClick:o=>{o.stopPropagation(),g()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:e.jsx(A,{size:16})})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 line-clamp-1",children:t.address}),e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:t.price})]})]})},`house-${t.id}`)}),b.map((t,i)=>{const x=[{left:"50%",top:"30%"},{left:"30%",top:"60%"},{left:"70%",top:"55%"}],y=x[i%x.length];return e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-10",style:y,children:e.jsxs("button",{onClick:()=>d(t,"agency"),className:"relative group focus:outline-none",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800 shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer",children:e.jsx(Q,{size:20,className:"text-white"})}),(s==null?void 0:s.id)===t.id&&(s==null?void 0:s.type)==="agency"&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-20 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm line-clamp-1",children:t.name}),e.jsx("button",{onClick:o=>{o.stopPropagation(),g()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:e.jsx(A,{size:16})})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-1",children:t.address})]})]})},`agency-${t.id}`)})]}),e.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg p-3 border border-gray-200 dark:border-gray-700 z-10",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Properties"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Agencies"})]})]})}),s&&e.jsx("div",{className:"absolute inset-0 z-0",onClick:g})]})]})};function re(){const j=E(),[b]=V(),{activeTab:n,setActiveTab:c}=q(),[s,m]=l.useState(!0),[v,u]=l.useState([]),[d,g]=l.useState(""),[t,i]=l.useState(""),[x,y]=l.useState("all"),[o,k]=l.useState({min:"",max:""}),[p,z]=l.useState(""),[f,B]=l.useState(""),[w,L]=l.useState("grid"),[h,N]=l.useState(1),C=8;l.useEffect(()=>{const r=b.get("type");r==="rent"?c("rent"):r==="buy"&&c("buy"),_()},[b,c]);const _=async()=>{m(!0);const{data:r}=await H();r&&u(r),m(!1)},S=l.useMemo(()=>v.filter(r=>{if(n==="buy"&&r.property_type!=="sale"||n==="rent"&&r.property_type!=="rent")return!1;if(d.trim()){const a=d.toLowerCase();if(!(r.title.toLowerCase().includes(a)||r.address_line_1.toLowerCase().includes(a)||r.city.toLowerCase().includes(a)||r.postcode.toLowerCase().includes(a)))return!1}if(t.trim()){const a=t.toLowerCase();if(!(r.city.toLowerCase().includes(a)||r.postcode.toLowerCase().includes(a)))return!1}return!(o.min&&r.price<parseInt(o.min)||o.max&&r.price>parseInt(o.max)||p&&r.bedrooms<parseInt(p)||f&&r.bathrooms<parseInt(f))}),[v,n,d,t,o,p,f]),P=Math.ceil(S.length/C),F=S.slice((h-1)*C,h*C),M=()=>{g(""),i(""),k({min:"",max:""}),z(""),B(""),N(1)},I=r=>r.filter(a=>a.latitude&&a.longitude).map(a=>({id:a.id,title:a.title,lat:parseFloat(a.latitude||"0"),lng:parseFloat(a.longitude||"0"),price:`Â£${a.price.toLocaleString()}`,address:a.address_line_1}));return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>j("/user/dashboard"),className:"mb-6 flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors group",children:[e.jsx(O,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Discover Properties"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n==="buy"?"Showing properties for sale":n==="rent"?"Showing properties for rent":"Find your next home across the UK"})]}),e.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 p-1 rounded-xl shadow-sm",children:[e.jsxs("button",{onClick:()=>L("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${w==="grid"?"bg-orange-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Y,{size:18}),e.jsx("span",{children:"Grid"})]}),e.jsxs("button",{onClick:()=>L("map"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${w==="map"?"bg-orange-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Z,{size:18}),e.jsx("span",{children:"Map"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Postcode, street, or property name...",value:d,onChange:r=>g(r.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none transition-all text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"City or Town",value:t,onChange:r=>i(r.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none transition-all text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Price Range"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:o.min,onChange:r=>k({...o,min:r.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:o.max,onChange:r=>k({...o,max:r.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bedrooms"}),e.jsxs("select",{value:p,onChange:r=>z(r.target.value),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Any Beds"}),e.jsx("option",{value:"1",children:"1+ Bed"}),e.jsx("option",{value:"2",children:"2+ Beds"}),e.jsx("option",{value:"3",children:"3+ Beds"}),e.jsx("option",{value:"4",children:"4+ Beds"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bathrooms"}),e.jsxs("select",{value:f,onChange:r=>B(r.target.value),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Any Baths"}),e.jsx("option",{value:"1",children:"1+ Bath"}),e.jsx("option",{value:"2",children:"2+ Baths"}),e.jsx("option",{value:"3",children:"3+ Baths"})]})]}),e.jsx("div",{className:"flex items-end lg:col-span-2",children:e.jsx("button",{onClick:M,className:"text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 text-sm font-medium h-12 px-6",children:"Clear All Filters"})})]})}),w==="map"?e.jsx("div",{className:"h-[700px] rounded-2xl overflow-hidden shadow-xl",children:e.jsx(ee,{houses:I(S)})}):e.jsxs(e.Fragment,{children:[s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((r,a)=>e.jsx(X,{},a))}):F.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:F.map(r=>e.jsx(W,{property:r},r.id))}):e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-3xl shadow-sm",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-6 bg-gray-100 dark:bg-gray-700 rounded-full mb-6",children:e.jsx($,{className:"text-gray-400",size:48})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"No properties match your search"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 max-w-md mx-auto",children:"Try adjusting your filters or search terms. We're constantly adding new listings across the UK."}),e.jsx("button",{onClick:M,className:"mt-8 px-8 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-all shadow-md active:scale-95",children:"Clear Filters"})]}),P>1&&e.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4",children:[e.jsx("button",{disabled:h===1,onClick:()=>N(r=>r-1),className:"p-2 rounded-xl bg-white dark:bg-gray-800 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm",children:e.jsx(K,{size:24})}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:["Page ",e.jsx("span",{className:"text-gray-900 dark:text-white",children:h})," of ",P]}),e.jsx("button",{disabled:h>=P,onClick:()=>N(r=>r+1),className:"p-2 rounded-xl border dark:border-gray-700 bg-white dark:bg-gray-800 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm",children:e.jsx(U,{size:24})})]})]})]})})}function be(){return e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}),children:e.jsx(re,{})})}export{be as default};
//# sourceMappingURL=page-CjezQkeb.js.map
