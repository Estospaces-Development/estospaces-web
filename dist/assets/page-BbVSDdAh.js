const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SatelliteMap-Bd9rE5Wr.js","assets/index-D9fuy-ar.js","assets/index-DynsSHwj.css","assets/funnel-BFpuJI0k.js","assets/car-Dlt1cI6o.js","assets/index-DRtMzFzR.js","assets/SatelliteMap-CIGW-MKW.css"])))=>i.map(i=>d[i]);
import{c as k,h as R,u as j,r as o,j as e,Z as _,J as $,_ as D,K as z,B as L,m as I,F as B,o as V,X as U,U as E,a as C,P as F,M as O,x as H,H as P,k as W,C as G,O as q,Q as J,R as Y,T as Z}from"./index-D9fuy-ar.js";import{g as A}from"./analyticsService-DSIngNu1.js";import{P as M}from"./plus-wruqDZww.js";import{S as N}from"./StatCard-CYwQrOFL.js";import{g as K}from"./applicationsService-CXOy1XaX.js";import{S as Q}from"./star-Xdww4Nds.js";import{A as T}from"./arrow-right-BYDXxbCW.js";import{C as X}from"./clock-D-pnzsNv.js";import{E as w}from"./eye-Dzbd2rxv.js";import{B as ee,a as ae,M as te}from"./maximize-DMYfH0UC.js";import{S as se}from"./square-pen-8EbQGg23.js";import{D as re}from"./dollar-sign-CqDN36Ty.js";import{U as ie}from"./user-check-BQ5ngFC1.js";import{F as ne}from"./funnel-BFpuJI0k.js";import{D as oe}from"./download-CwJzrRjy.js";import"./trending-up-Cau2qQQ4.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],le=k("bell-ring",de);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ge=k("bot",ce);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],me=k("ellipsis",xe),he=()=>{var s;const{getDisplayName:a,user:i}=R(),c=j(),[r,d]=o.useState({activeProperties:0,activeLeads:0,totalApplications:0}),[t,g]=o.useState(!0),n=a&&typeof a=="function"?a():((s=i==null?void 0:i.email)==null?void 0:s.split("@")[0])||"User";return o.useEffect(()=>{(async()=>{var h,p,y;if(i){g(!0);try{const u=await A();u.data&&d({activeProperties:((h=u.data.leadAnalytics)==null?void 0:h.totalProperties)||0,activeLeads:((p=u.data.leadAnalytics)==null?void 0:p.totalLeads)||0,totalApplications:((y=u.data.propertyPerformance)==null?void 0:y.reduce((m,x)=>m+x.applications,0))||0})}catch(u){console.error("Error fetching dashboard stats:",u)}finally{g(!1)}}})()},[i]),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Welcome ",n]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage Your Properties, ideas, and grow your business"})]}),e.jsxs("button",{onClick:()=>c("/manager/dashboard/properties/add"),className:"bg-primary hover:bg-primary-dark text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors shadow-lg shadow-primary/20",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Property"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 mt-4 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t?"...":`${r.activeProperties} Active Properties`})]}),e.jsx("div",{className:"hidden sm:block w-px h-4 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t?"...":`${r.activeLeads} Active Leads`})]}),e.jsx("div",{className:"hidden sm:block w-px h-4 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t?"...":`${r.totalApplications} Applications`})]})]})]})},pe=o.lazy(()=>D(()=>import("./SatelliteMap-Bd9rE5Wr.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ue=()=>{const[a,i]=o.useState([]),[c,r]=o.useState(!0);return o.useEffect(()=>{(async()=>{r(!0);try{const[t,g]=await Promise.all([$(),K()]),n=[];t.data&&t.data.forEach(s=>{var l;n.push({id:`lead-${s.id}`,type:"New Lead",name:s.name||"Interested User",property:((l=s.property)==null?void 0:l.title)||"General Interest",date:new Date(s.created_at).toLocaleDateString(),timestamp:new Date(s.created_at)})}),g.data&&g.data.forEach(s=>{n.push({id:`app-${s.id}`,type:"Application Submitted",name:s.name||"Anonymous Applicant",property:s.propertyInterested||"Property Application",date:new Date(s.created_at).toLocaleDateString(),timestamp:new Date(s.created_at)})}),n.sort((s,l)=>l.timestamp.getTime()-s.timestamp.getTime()),i(n.slice(0,5))}catch(t){console.error("Error fetching activities:",t),i([])}finally{r(!1)}})()},[]),e.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-sm p-6 relative overflow-hidden group transition-all duration-300 hover:shadow-xl hover:scale-[1.01] hover:brightness-105 dark:hover:brightness-110",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-r from-transparent via-white/10 dark:via-white/5 to-transparent transform -skew-x-12 translate-x-[-100%] group-hover:translate-x-[200%] transition-transform duration-1000 ease-in-out"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{className:"w-5 h-5 text-blue-500 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12"}),e.jsx("h3",{className:"section-heading text-gray-800 dark:text-white transition-colors duration-300 group-hover:text-primary dark:group-hover:text-primary-light",children:"Recent Activity"})]}),e.jsx("div",{className:"space-y-4 mb-6",children:c?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Loading activities..."}):a.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No recent activity"}):a.map((d,t)=>e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg transition-all duration-300 hover:bg-gray-50 dark:hover:bg-gray-900/50 hover:scale-[1.02] cursor-pointer group/item",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0 transition-all duration-300 group-hover/item:scale-150 group-hover/item:shadow-lg group-hover/item:shadow-blue-500/50"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"body-text font-medium text-gray-800 dark:text-white transition-colors duration-300 group-hover/item:text-blue-600 dark:group-hover/item:text-blue-400",children:d.type}),e.jsxs("p",{className:"body-text text-gray-600 dark:text-gray-400 transition-colors duration-300 group-hover/item:text-gray-800 dark:group-hover/item:text-gray-300",children:[d.name," - ",d.property]}),d.date&&e.jsx("p",{className:"caption text-gray-500 dark:text-gray-500 mt-1",children:d.date})]})]},t))}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg h-[500px] md:h-[650px] lg:h-[800px] relative overflow-hidden",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading map..."}),children:e.jsx(pe,{})})})]})]})},be=()=>{const{user:a}=R(),[i,c]=o.useState([]),[r,d]=o.useState(!0);return o.useEffect(()=>{(async()=>{d(!0);try{const g=await A();if(g.data&&g.data.propertyPerformance){const n=g.data.propertyPerformance.map(s=>({id:s.property,name:s.property,price:"$0.00",views:s.views,inquiries:s.applications,status:"Active"}));c(n.slice(0,3))}else c([])}catch(g){console.error("Error fetching top properties:",g),c([])}finally{d(!1)}})()},[a]),e.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Q,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"section-heading text-gray-800 dark:text-white",children:"Top Performing properties"})]}),r?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"rounded-lg p-4 bg-white dark:bg-black animate-pulse shadow-sm",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3"})]},t))}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"No properties found. Add properties to see top performers here."})}):e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"rounded-lg p-4 bg-white dark:bg-black shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"body-text font-semibold text-gray-800 dark:text-white",children:t.name}),e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 caption rounded-full whitespace-nowrap text-xs",children:t.status})]}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:t.price}),e.jsxs("div",{className:"flex items-center gap-4 secondary-label text-gray-600 dark:text-gray-400 text-sm",children:[e.jsxs("span",{children:[t.views," ",t.views===1?"view":"views"]}),e.jsxs("span",{children:[t.inquiries," ",t.inquiries===1?"Inquiry":"Inquiries"]})]})]},t.id))})]})},ye=({activeTab:a,onTabChange:i})=>{const c=[{id:"overview",label:"Overview",icon:z},{id:"properties",label:"Properties",icon:L},{id:"leads",label:"Leads",icon:I},{id:"application",label:"Application",icon:B},{id:"analytics",label:"Analytics",icon:V}];return e.jsx("div",{className:"mb-8 overflow-x-auto pb-1 scrollbars-none",children:e.jsx("div",{className:"inline-flex p-1.5 bg-gray-100/80 dark:bg-gray-900/50 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-800/50 shadow-inner min-w-max",children:c.map(r=>{const d=r.icon,t=a===r.id;return e.jsxs("button",{onClick:()=>i(r.id),className:`relative flex items-center gap-2.5 px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 ease-out outline-none focus-visible:ring-2 focus-visible:ring-orange-500 ${t?"bg-white dark:bg-gray-800 text-orange-600 dark:text-orange-500 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-black/5 dark:hover:bg-white/5"}`,children:[e.jsx(d,{className:`w-4 h-4 transition-transform duration-300 ${t?"scale-110":""}`,strokeWidth:t?2.5:2}),e.jsx("span",{children:r.label})]},r.id)})})})},fe=({isOpen:a,onClose:i,clientName:c,avatar:r,clientId:d="1"})=>{const t=j();if(!a)return null;const g=()=>{t("/manager/leads")},n=()=>{t("/manager/messages")};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-md overflow-hidden relative animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"h-24 bg-gradient-to-r from-blue-500 to-indigo-600"}),e.jsx("button",{onClick:i,className:"absolute top-4 right-4 bg-black/20 hover:bg-black/40 text-white rounded-full p-1 transition-colors",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("div",{className:"px-6 pb-6 mt-[-3rem]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-900 overflow-hidden bg-gray-100 mb-4",children:r?e.jsx("img",{src:r,alt:c,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-800 text-gray-500",children:e.jsx(E,{className:"w-10 h-10"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:c}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400 mb-6",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Mumbai, India"})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx(F,{className:"w-3 h-3"}),e.jsx("span",{children:"Phone"})]}),e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"+91 98765 43210"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsx("span",{children:"Email"})]}),e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:"client@example.com"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx(H,{className:"w-3 h-3"}),e.jsx("span",{children:"Member Since"})]}),e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Jan 2024"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx(P,{className:"w-3 h-3"}),e.jsx("span",{children:"Interested In"})]}),e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Rent, Buy"})]})]}),e.jsxs("div",{className:"w-full flex gap-3",children:[e.jsx("button",{onClick:g,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-lg font-medium transition-colors",children:"View History"}),e.jsx("button",{onClick:n,className:"flex-1 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 py-2.5 rounded-lg font-medium transition-colors",children:"Message"})]})]})})]})})},ve=({request:a,onRespond:i})=>{const c=j(),[r,d]=o.useState(!1),[t,g]=o.useState(()=>{if(a.status!=="pending")return 0;const f=600-Math.floor((new Date().getTime()-a.timestamp.getTime())/1e3);return f>0?f:0}),[n,s]=o.useState(a.status);o.useEffect(()=>{if(n!=="pending")return;if(t<=0){s("expired");return}const m=setInterval(()=>{g(x=>x<=1?(s("expired"),0):x-1)},1e3);return()=>clearInterval(m)},[t,n]),o.useEffect(()=>{a.status!=="pending"&&s(a.status)},[a.status]);const l=m=>{m.stopPropagation(),s("responded"),i(a.id),c("/manager/messages")},h=m=>{m.stopPropagation(),c("/manager/dashboard/properties")},p=m=>{const x=Math.floor(m/60),f=m%60;return`${x}:${f.toString().padStart(2,"0")}`},y=()=>t<60?"bg-red-500":t<300?"bg-yellow-500":"bg-green-500",u=()=>{switch(n){case"responded":return e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:[e.jsx(G,{className:"w-3 h-3"}),"Responded"]});case"expired":return e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:[e.jsx(W,{className:"w-3 h-3"}),"Expired"]});default:return e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",children:[e.jsx(X,{className:"w-3 h-3"}),"Pending"]})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>d(!0),className:`p-4 rounded-lg border transition-all duration-300 cursor-pointer ${n==="expired"?"bg-gray-50 border-gray-200 dark:bg-gray-900/50 dark:border-gray-800 opacity-75":"bg-white border-gray-200 dark:bg-black dark:border-gray-800 hover:shadow-md hover:scale-[1.01]"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[a.brokerAvatar?e.jsx("img",{src:a.brokerAvatar,alt:a.brokerName,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-700"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/10 flex items-center justify-center text-orange-600",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-black rounded-full p-0.5",children:e.jsx("div",{className:`w-3 h-3 rounded-full border-2 border-white dark:border-black ${n==="responded"?"bg-green-500":n==="pending"?"bg-yellow-500":"bg-gray-400"}`})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm hover:text-orange-500 transition-colors",children:a.brokerName}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsx("span",{children:a.distance})]})]})]}),e.jsx("div",{children:u()})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 line-clamp-1",children:a.propertyName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requested ",a.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),n==="pending"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-medium",children:[e.jsx("span",{className:`${t<60?"text-red-600 animate-pulse":"text-gray-600 dark:text-gray-300"}`,children:"Response required in:"}),e.jsx("span",{className:`font-mono text-sm ${t<60?"text-red-600 font-bold":"text-gray-800 dark:text-white"}`,children:p(t)})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 ease-linear ${y()}`,style:{width:`${t/600*100}%`}})}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:l,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white text-xs font-medium py-2 px-3 rounded-md transition-colors flex items-center justify-center gap-1 group relative z-10",children:[e.jsx("span",{children:"Respond Now"}),e.jsx(T,{className:"w-3 h-3 transition-transform group-hover:translate-x-0.5"})]}),e.jsx("button",{onClick:h,className:"px-3 py-2 text-xs font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors border border-gray-200 dark:border-gray-700 relative z-10",children:"View Properties"})]})]}),n!=="pending"&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-800 flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:n==="responded"?"Response sent":"Time limit exceeded"}),e.jsx("button",{onClick:h,className:"text-orange-500 hover:underline relative z-10",children:"View Properties"})]})]}),e.jsx(fe,{isOpen:r,onClose:()=>d(!1),clientName:a.brokerName,avatar:a.brokerAvatar})]})},je=()=>{const a=j(),[i,c]=o.useState([]),[r,d]=o.useState(!0),t=async()=>{d(!0);try{const s=await J("pending");if(s.data){const l=s.data.map(h=>{var p,y;return{id:h.id,propertyName:((p=h.property)==null?void 0:p.title)||"Unknown Property",brokerName:((y=h.property)==null?void 0:y.agent_name)||"Assigned Broker",distance:"Nearby",timestamp:new Date(h.created_at),status:h.status||"pending"}});c(l.slice(0,4))}}catch(s){console.error("Error fetching broker leads:",s)}finally{d(!1)}};o.useEffect(()=>{t()},[]);const g=async s=>{try{(await Y(s,"message","I am looking into your request.")).data&&c(h=>h.map(p=>p.id===s?{...p,status:"responded"}:p))}catch(l){console.error("Error responding to lead:",l)}},n=i.filter(s=>s.status==="pending").length;return e.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-sm border border-gray-200 dark:border-gray-800 p-6 ring-2 ring-blue-500/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg animate-pulse",children:e.jsx(le,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"section-heading text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-500",children:"Live"})," Response Tracker",n>0&&e.jsxs("span",{className:"bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full animate-bounce",children:[n," URGENT"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Real-time emergency assistance requests"})]})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(me,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:r?e.jsx("div",{className:"col-span-full py-8 text-center text-gray-400",children:"Loading requests..."}):i.length>0?i.map(s=>e.jsx(ve,{request:s,onRespond:g},s.id)):e.jsx("div",{className:"col-span-full py-8 text-center text-gray-400",children:"No active requests."})}),e.jsxs("div",{className:"mt-6 flex justify-between items-center text-xs text-gray-500 border-t border-gray-100 dark:border-gray-800 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"USP: Guaranteed 10-minute response time active."})]}),e.jsxs("button",{onClick:()=>a("/manager/messages"),className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 font-medium group",children:["View All Requests",e.jsx(T,{className:"w-3 h-3 transition-transform group-hover:translate-x-0.5"})]})]})]})},Ne=({property:a,onEdit:i,onView:c})=>{var u,m;const r=a.title||a.name||"Untitled Property",d=a.address||(typeof a.location=="string"?a.location:(u=a.location)==null?void 0:u.addressLine1)||"No Address",t=a.bedrooms||0,g=a.bathrooms||0,n=a.area||a.sqft||0,l=(()=>{var x,f,b;return a.images&&Array.isArray(a.images)&&a.images.length>0?a.images[0]:a.image?a.image:(b=(f=(x=a.media)==null?void 0:x.images)==null?void 0:f[0])!=null&&b.url?a.media.images[0].url:null})(),p=(x=>{switch((x==null?void 0:x.toLowerCase())||"draft"){case"online":case"active":case"published":return{bg:"bg-emerald-500/10",text:"text-emerald-600",dot:"bg-emerald-500"};case"draft":return{bg:"bg-gray-500/10",text:"text-gray-600",dot:"bg-gray-500"};case"under_offer":return{bg:"bg-orange-500/10",text:"text-orange-600",dot:"bg-orange-500"};case"sold":return{bg:"bg-blue-500/10",text:"text-blue-600",dot:"bg-blue-500"};case"let":return{bg:"bg-purple-500/10",text:"text-purple-600",dot:"bg-purple-500"};default:return{bg:"bg-gray-500/10",text:"text-gray-600",dot:"bg-gray-500"}}})(a.status),y=((m=a.status)==null?void 0:m.replace(/_/g," "))||"Draft";return e.jsxs("div",{className:"bg-white dark:bg-black rounded-xl overflow-hidden group hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100 dark:bg-gray-900",children:[l?e.jsx("img",{src:l,alt:r,className:"object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(P,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-white/90 backdrop-blur-sm shadow-sm ${p.text}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${p.dot}`}),e.jsx("span",{className:"capitalize",children:y})]})}),a.view_count!==void 0&&e.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/50 backdrop-blur-sm text-white px-2 py-1 rounded-md text-xs flex items-center gap-1",children:[e.jsx(w,{size:12}),a.view_count]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white truncate flex-1 pr-2",children:r}),a.price!==void 0&&e.jsxs("p",{className:"font-display font-bold text-lg text-orange-600 dark:text-orange-500 whitespace-nowrap",children:["Â£",a.price.toLocaleString()]})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex items-center gap-1.5 truncate",children:[e.jsx(C,{size:14,className:"flex-shrink-0 text-gray-400"}),d]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-5 py-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",title:"Bedrooms",children:[e.jsx(ee,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"font-medium",children:t})," ",e.jsx("span",{className:"text-xs text-gray-400 hidden sm:inline",children:"Beds"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-800"}),e.jsxs("div",{className:"flex items-center gap-1.5",title:"Bathrooms",children:[e.jsx(ae,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"font-medium",children:g})," ",e.jsx("span",{className:"text-xs text-gray-400 hidden sm:inline",children:"Baths"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-800"}),e.jsxs("div",{className:"flex items-center gap-1.5",title:"Area",children:[e.jsx(te,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"font-medium",children:n})," ",e.jsx("span",{className:"text-xs text-gray-400 hidden sm:inline",children:"sqft"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:x=>{x.stopPropagation(),i&&i(a.id)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl text-sm font-semibold transition-colors",children:[e.jsx(se,{size:16}),"Edit"]}),e.jsxs("button",{onClick:x=>{x.stopPropagation(),c&&c(a.id)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-900 dark:bg-white text-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-100 rounded-xl text-sm font-bold transition-all shadow-lg shadow-gray-200 dark:shadow-none",children:[e.jsx(w,{size:16}),"View"]})]})]})]})};function we(){var u,m,x,f;const a=j(),[i,c]=o.useState("overview"),[r,d]=o.useState(null),[t,g]=o.useState([]),[n,s]=o.useState(!0);o.useEffect(()=>{(async()=>{s(!0);try{const[v,S]=await Promise.all([A(),Z({limit:3})]);v.data&&d(v.data),S.data&&g(S.data)}catch(v){console.error("Error fetching dashboard data:",v)}finally{s(!1)}})()},[]);const l={monthlyRevenue:"0.00",monthlyRevenueChange:"0%",activeProperties:((m=(u=r==null?void 0:r.leadAnalytics)==null?void 0:u.totalProperties)==null?void 0:m.toString())||"0",activeListingsChange:"+0",totalViews:((x=r==null?void 0:r.propertyPerformance)==null?void 0:x.reduce((b,v)=>b+(v.views||0),0).toString())||"0",totalViewsChange:"0%",conversionRate:((f=r==null?void 0:r.leadAnalytics)!=null&&f.conversionRate?r.leadAnalytics.conversionRate.toFixed(1):"0")+"%",conversionRateChange:"+0%"},h=b=>{},p=b=>{a(`/manager/dashboard/properties/edit/${b}`)},y=b=>{a(`/manager/dashboard/properties/${b}`)};return e.jsxs("div",{className:"space-y-6 relative min-h-screen pb-20",children:[e.jsx(he,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(N,{title:"Monthly Revenue",value:`$${l.monthlyRevenue}`,change:l.monthlyRevenueChange,icon:re,iconColor:"bg-green-500",trendColor:"text-green-600"}),e.jsx(N,{title:"Active Listings",value:l.activeProperties,change:l.activeListingsChange,icon:L,iconColor:"bg-blue-500",trendColor:"text-blue-600"}),e.jsx(N,{title:"Total Views",value:l.totalViews,change:l.totalViewsChange,icon:w,iconColor:"bg-purple-500",trendColor:"text-purple-600"}),e.jsx(N,{title:"Conversion Rate",value:l.conversionRate,change:l.conversionRateChange,icon:ie,iconColor:"bg-orange-500",trendColor:"text-orange-600"})]}),e.jsx(ye,{activeTab:i,onTabChange:h}),i==="overview"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx(je,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ue,{})}),e.jsx("div",{children:e.jsx(be,{})})]}),e.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-sm border border-gray-200 dark:border-gray-800 p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-r from-transparent via-white/5 to-transparent transform -skew-x-12 translate-x-[-100%] group-hover:translate-x-[200%] transition-transform duration-1000 ease-in-out pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Your Properties"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors text-sm font-medium",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors text-sm font-medium",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>a("/manager/dashboard/properties/add"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors text-sm font-medium shadow-lg shadow-orange-500/20",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Property"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length>0?t.map(b=>e.jsx(Ne,{property:b,onEdit:p,onView:y},b.id)):e.jsx("div",{className:"col-span-full py-12 text-center text-gray-500",children:"No properties found. Start by adding one!"})})]})]})]}),e.jsxs("button",{className:"fixed bottom-6 right-6 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-xl flex items-center gap-2 px-4 py-3 z-50 transition-all duration-300 hover:scale-105 group",children:[e.jsx(ge,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),e.jsx("span",{className:"font-medium",children:"Ask Lakshmi"})]})]})}function Ve(){return e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"h-48 flex items-center justify-center font-bold",children:"Loading Dashboard..."}),children:e.jsx(we,{})})}export{Ve as default};
//# sourceMappingURL=page-BbVSDdAh.js.map
