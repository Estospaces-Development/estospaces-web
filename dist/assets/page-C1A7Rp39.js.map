{"version":3,"file":"page-C1A7Rp39.js","sources":["../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../src/components/dashboard/ContractViewer.tsx","../../src/components/dashboard/SignatureModal.tsx","../../src/pages/user/dashboard/contracts/page.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n];\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", __iconNode);\n\nexport { __iconNode, RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FileText, Download, X } from 'lucide-react';\r\n\r\ninterface Contract {\r\n    id?: string;\r\n    name?: string;\r\n    property?: string;\r\n    type?: string;\r\n    location?: string;\r\n    category?: string;\r\n}\r\n\r\ninterface ContractViewerProps {\r\n    contract: Contract;\r\n    onClose: () => void;\r\n}\r\n\r\nconst ContractViewer = ({ contract, onClose }: ContractViewerProps) => {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => setIsLoading(false), 800);\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    const currentDate = new Date().toLocaleDateString('en-GB', {\r\n        day: 'numeric',\r\n        month: 'long',\r\n        year: 'numeric',\r\n    });\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\">\r\n            <div className=\"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-5xl h-[85vh] flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between p-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <FileText className=\"text-orange-600\" size={24} />\r\n                        <div>\r\n                            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">{contract.name || contract.property}</h2>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{contract.type || 'Document'}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <button onClick={() => { const link = document.createElement('a'); link.href = '#'; link.download = `${contract.name || 'document'}.pdf`; link.click(); }} className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors\" title=\"Download\">\r\n                            <Download size={20} className=\"text-gray-600 dark:text-gray-400\" />\r\n                        </button>\r\n                        <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors\">\r\n                            <X size={24} className=\"text-gray-600 dark:text-gray-400\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Document Content */}\r\n                <div className=\"flex-1 overflow-y-auto bg-gray-100 dark:bg-gray-950 p-8\">\r\n                    {isLoading ? (\r\n                        <div className=\"flex items-center justify-center h-full\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"></div>\r\n                                <p className=\"text-gray-600 dark:text-gray-400\">Loading document...</p>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"max-w-3xl mx-auto bg-white dark:bg-gray-900 shadow-lg min-h-[800px] p-12\">\r\n                            {/* Document Header */}\r\n                            <div className=\"text-center mb-12 pb-8\">\r\n                                <div className=\"flex items-center justify-center gap-2 mb-4\">\r\n                                    <div className=\"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center text-white font-bold\">E</div>\r\n                                    <span className=\"text-xl font-bold text-gray-900 dark:text-white\">ESTOSPACES</span>\r\n                                </div>\r\n                                <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2 uppercase tracking-wide\">\r\n                                    {contract.type || 'AGREEMENT'}\r\n                                </h1>\r\n                                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Document Reference: {contract.id?.toUpperCase() || 'REF-001'}</p>\r\n                                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Date: {currentDate}</p>\r\n                            </div>\r\n\r\n                            {/* Document Body */}\r\n                            <div className=\"space-y-6 text-gray-800 dark:text-gray-200 text-justify leading-relaxed font-serif\">\r\n                                <p>\r\n                                    <strong>THIS AGREEMENT</strong> is made on this day, {currentDate}, between <strong>ESTOSPACES PROPERTY MANAGEMENT</strong> (&quot;The Agent&quot;) and the undersigned party (&quot;The Tenant/Applicant&quot;).\r\n                                </p>\r\n                                <h3 className=\"font-bold text-lg mt-6 mb-2\">1. PROPERTY DETAILS</h3>\r\n                                <p>\r\n                                    The property subject to this agreement is located at: <strong>{contract.location || '123 Example Street, London, UK'}</strong>.\r\n                                    The property is being offered for {contract.category === 'sale' ? 'sale' : 'lease'} under the terms specified herein.\r\n                                </p>\r\n                                <h3 className=\"font-bold text-lg mt-6 mb-2\">2. TERMS AND CONDITIONS</h3>\r\n                                <p>\r\n                                    The Tenant/Applicant agrees to the following terms:<br />\r\n                                    (a) To maintain the property in good condition.<br />\r\n                                    (b) To pay all applicable fees and rent on time.<br />\r\n                                    (c) To comply with all building regulations and local laws.\r\n                                </p>\r\n                                <h3 className=\"font-bold text-lg mt-6 mb-2\">3. {contract.type === 'Pet Policy Agreement' ? 'PET POLICY' : 'GENERAL PROVISIONS'}</h3>\r\n                                <p>\r\n                                    {contract.type === 'Pet Policy Agreement'\r\n                                        ? \"The Tenant is permitted to keep pets on the premises subject to the landlord's approval and adherence to the building's pet policy rules. The Tenant accepts full responsibility for any damage caused by the pet.\"\r\n                                        : 'This agreement constitutes the entire understanding between the parties and supersedes all prior discussions, agreements, or understandings of any kind. This agreement may not be amended or modified except in writing signed by both parties.'}\r\n                                </p>\r\n                                <p className=\"mt-8 text-sm text-gray-500 dark:text-gray-400 italic\">\r\n                                    * This is a sample document generated for demonstration purposes. The content herein is not legally binding in this context.\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Signature Section */}\r\n                            <div className=\"mt-16 pt-8\">\r\n                                <div className=\"grid grid-cols-2 gap-12\">\r\n                                    <div>\r\n                                        <div className=\"h-16 border-b border-gray-300 dark:border-gray-700 mb-2\"></div>\r\n                                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">Signature of Agent</p>\r\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Authorized Representative</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"h-16 border-b border-gray-300 dark:border-gray-700 mb-2\"></div>\r\n                                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">Signature of Applicant</p>\r\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Tenant / Buyer</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContractViewer;\r\n","'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { X, Check, RotateCcw } from 'lucide-react';\r\n\r\ninterface Contract {\r\n    id?: string;\r\n    name?: string;\r\n    property?: string;\r\n}\r\n\r\ninterface SignatureModalProps {\r\n    contract: Contract;\r\n    onClose: () => void;\r\n    onSign: (contractId: string, signature: string) => void;\r\n}\r\n\r\nconst SignatureModal = ({ contract, onClose, onSign }: SignatureModalProps) => {\r\n    const [signature, setSignature] = useState('');\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const [hasSigned, setHasSigned] = useState(false);\r\n\r\n    const getCoordinates = (e: React.MouseEvent | React.TouchEvent) => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return { x: 0, y: 0 };\r\n        const rect = canvas.getBoundingClientRect();\r\n        const scaleX = canvas.width / rect.width;\r\n        const scaleY = canvas.height / rect.height;\r\n\r\n        if ('touches' in e && e.touches[0]) {\r\n            return {\r\n                x: (e.touches[0].clientX - rect.left) * scaleX,\r\n                y: (e.touches[0].clientY - rect.top) * scaleY,\r\n            };\r\n        }\r\n        if ('clientX' in e) {\r\n            return {\r\n                x: (e.clientX - rect.left) * scaleX,\r\n                y: (e.clientY - rect.top) * scaleY,\r\n            };\r\n        }\r\n        return { x: 0, y: 0 };\r\n    };\r\n\r\n    const handleStartDrawing = (e: React.MouseEvent | React.TouchEvent) => {\r\n        e.preventDefault();\r\n        setIsDrawing(true);\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n        const coords = getCoordinates(e);\r\n        ctx.beginPath();\r\n        ctx.moveTo(coords.x, coords.y);\r\n    };\r\n\r\n    const handleDraw = (e: React.MouseEvent | React.TouchEvent) => {\r\n        e.preventDefault();\r\n        if (!isDrawing) return;\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n        const coords = getCoordinates(e);\r\n        ctx.lineWidth = 2;\r\n        ctx.lineCap = 'round';\r\n        ctx.lineJoin = 'round';\r\n        ctx.strokeStyle = '#1f2937';\r\n        ctx.lineTo(coords.x, coords.y);\r\n        ctx.stroke();\r\n    };\r\n\r\n    const handleStopDrawing = (e: React.MouseEvent | React.TouchEvent) => {\r\n        e.preventDefault();\r\n        if (!isDrawing) return;\r\n        setIsDrawing(false);\r\n        const canvas = canvasRef.current;\r\n        if (canvas) {\r\n            const dataURL = canvas.toDataURL();\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n                const hasContent = imageData.data.some((channel, index) => {\r\n                    return index % 4 !== 3 && channel !== 255 && channel !== 0;\r\n                });\r\n                if (hasContent) setSignature(dataURL);\r\n            }\r\n        }\r\n    };\r\n\r\n    const clearSignature = () => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        if (ctx) ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        setSignature('');\r\n    };\r\n\r\n    const handleAcceptAndSign = () => {\r\n        if (!signature) {\r\n            alert('Please provide your signature');\r\n            return;\r\n        }\r\n        const signedContracts = JSON.parse(localStorage.getItem('signedContracts') || '[]');\r\n        signedContracts.push({\r\n            contractId: contract.id,\r\n            signedAt: new Date().toISOString(),\r\n            signature: signature,\r\n        });\r\n        localStorage.setItem('signedContracts', JSON.stringify(signedContracts));\r\n        setHasSigned(true);\r\n        setTimeout(() => {\r\n            onSign(contract.id || '', signature);\r\n            onClose();\r\n        }, 1500);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (canvas) {\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n                ctx.strokeStyle = '#1f2937';\r\n                ctx.lineWidth = 2;\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n            }\r\n            const rect = canvas.getBoundingClientRect();\r\n            canvas.width = rect.width;\r\n            canvas.height = rect.height;\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\">\r\n            <div className=\"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col\">\r\n                <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-800\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Sign Contract</h2>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{contract?.name || contract?.property}</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors\">\r\n                        <X size={24} className=\"text-gray-600 dark:text-gray-400\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {hasSigned ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-12\">\r\n                            <div className=\"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4\">\r\n                                <Check size={32} className=\"text-green-600 dark:text-green-400\" />\r\n                            </div>\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">Contract Signed!</h3>\r\n                            <p className=\"text-gray-600 dark:text-gray-400 text-center\">\r\n                                Your signature has been recorded and the contract is now active.\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n                                <label className=\"flex items-start gap-3 cursor-pointer\">\r\n                                    <input type=\"checkbox\" className=\"mt-1 w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500\" required />\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">I agree to the terms and conditions of this contract</p>\r\n                                        <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">By signing, I acknowledge that I have read and understood all the terms.</p>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Your Signature</label>\r\n                                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800\">\r\n                                    <canvas\r\n                                        ref={canvasRef}\r\n                                        className=\"w-full h-48 bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 cursor-crosshair touch-none\"\r\n                                        onMouseDown={handleStartDrawing}\r\n                                        onMouseMove={handleDraw}\r\n                                        onMouseUp={handleStopDrawing}\r\n                                        onMouseLeave={handleStopDrawing}\r\n                                        onTouchStart={handleStartDrawing}\r\n                                        onTouchMove={handleDraw}\r\n                                        onTouchEnd={handleStopDrawing}\r\n                                    />\r\n                                    <div className=\"mt-2 flex items-center justify-between\">\r\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Draw your signature above</p>\r\n                                        <button onClick={clearSignature} className=\"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\">\r\n                                            <RotateCcw size={16} />\r\n                                            Clear\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Or Type Your Name</label>\r\n                                <input type=\"text\" placeholder=\"Type your full name\" className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\" onChange={(e) => { if (e.target.value) { clearSignature(); setSignature(e.target.value); } }} />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {!hasSigned && (\r\n                    <div className=\"p-6 border-t border-gray-200 dark:border-gray-800 flex gap-3\">\r\n                        <button onClick={onClose} className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg font-medium transition-colors\">\r\n                            Cancel\r\n                        </button>\r\n                        <button onClick={handleAcceptAndSign} disabled={!signature} className=\"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\">\r\n                            <Check size={18} />\r\n                            Accept & Sign\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SignatureModal;\r\n","\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    FileText, Download, Eye, CheckCircle, Clock, AlertCircle, FileCheck,\r\n    Search, Filter, SortAsc, SortDesc, List, Grid, Calendar, MapPin,\r\n    MoreVertical, Copy, Share2, X, ChevronRight, Loader2, TrendingUp, Bell, ArrowLeft\r\n} from 'lucide-react';\r\nimport ContractViewer from '@/components/dashboard/ContractViewer';\r\nimport SignatureModal from '@/components/dashboard/SignatureModal';\r\n\r\n// Services\r\nimport { bookingsService, Contract } from '@/services/bookingsService';\r\n\r\n\r\n\r\nexport default function ContractsPage() {\r\n    const navigate = useNavigate();\r\n    const [viewMode, setViewMode] = useState<'list' | 'grid'>('grid');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [selectedContract, setSelectedContract] = useState<any>(null);\r\n    const [showViewer, setShowViewer] = useState(false);\r\n    const [showSignatureModal, setShowSignatureModal] = useState(false);\r\n    const [contracts, setContracts] = useState<any[]>([]);\r\n    const [templates, setTemplates] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchContracts = React.useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const result = await bookingsService.getContracts();\r\n            if (result.data) {\r\n                const mapped = result.data.map((c: Contract) => ({\r\n                    ...c,\r\n                    name: c.contract_type === 'rental' ? 'Lease Agreement' : 'Purchase Agreement',\r\n                    property: 'Property ID: ' + c.property_id, // Ideally join title\r\n                    type: c.contract_type === 'rental' ? 'Rental' : 'Purchase',\r\n                    date: c.created_at?.split('T')[0] || 'N/A',\r\n                    amount: c.monthly_rent || c.deposit_amount || 0,\r\n                    status: c.status === 'sent' ? 'pending' : (c.status === 'signed' || c.status === 'active' ? 'signed' : c.status)\r\n                }));\r\n                setContracts(mapped);\r\n            }\r\n        } catch (err) {\r\n            console.error('[Contracts] Error fetching:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        fetchContracts();\r\n        const fetchTemplates = async () => {\r\n            try {\r\n                const res = await bookingsService.getContractTemplates();\r\n                if (res.data) setTemplates(res.data);\r\n            } catch (err) {\r\n                console.error('[Templates] Error fetching:', err);\r\n            }\r\n        };\r\n        fetchTemplates();\r\n    }, [fetchContracts]);\r\n\r\n    const getStatusConfig = (status: string) => {\r\n        const configs: any = {\r\n            signed: { label: 'Signed', icon: CheckCircle, color: 'text-green-600 bg-green-50 dark:bg-green-900/20' },\r\n            pending: { label: 'Pending Signature', icon: Clock, color: 'text-orange-600 bg-orange-50 dark:bg-orange-900/20' },\r\n            expired: { label: 'Expired', icon: AlertCircle, color: 'text-red-600 bg-red-50 dark:bg-red-900/20' },\r\n        };\r\n        return configs[status] || { label: status, icon: FileText, color: 'text-gray-600 bg-gray-50' };\r\n    };\r\n\r\n    const formatCurrency = (amount: number) => `Â£${amount.toLocaleString('en-GB')}`;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20\">\r\n            <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                {/* Header */}\r\n                <div className=\"mb-10\">\r\n                    <button\r\n                        onClick={() => navigate('/user/dashboard')}\r\n                        className=\"mb-6 flex items-center gap-2 text-gray-400 hover:text-orange-500 transition-all group\"\r\n                    >\r\n                        <div className=\"p-2 rounded-xl group-hover:bg-orange-50 dark:group-hover:bg-orange-900/20 transition-all\">\r\n                            <ArrowLeft size={18} />\r\n                        </div>\r\n                        <span className=\"font-bold text-sm\">Dashboard</span>\r\n                    </button>\r\n\r\n                    <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6\">\r\n                        <div>\r\n                            <h1 className=\"text-4xl font-black text-gray-900 dark:text-white tracking-tight\">\r\n                                Contracts\r\n                            </h1>\r\n                            <p className=\"text-gray-500 dark:text-gray-400 mt-2 font-medium\">\r\n                                Review and sign your legal documents digitally\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex bg-white dark:bg-gray-800 p-1.5 rounded-2xl shadow-sm\">\r\n                            <button\r\n                                onClick={() => setViewMode('grid')}\r\n                                className={`p-2.5 rounded-xl transition-all ${viewMode === 'grid' ? 'bg-orange-500 text-white shadow-lg' : 'text-gray-400'}`}\r\n                            >\r\n                                <Grid size={20} />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setViewMode('list')}\r\n                                className={`p-2.5 rounded-xl transition-all ${viewMode === 'list' ? 'bg-orange-500 text-white shadow-lg' : 'text-gray-400'}`}\r\n                            >\r\n                                <List size={20} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"mb-12\">\r\n                    <h2 className=\"text-2xl font-black text-gray-900 dark:text-white mb-6 flex items-center gap-3\">\r\n                        <FileCheck className=\"text-orange-500\" size={28} />\r\n                        Mandatory Forms\r\n                    </h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                        {templates.map((form) => (\r\n                            <div key={form.id} className=\"bg-white dark:bg-gray-800 rounded-[2rem] p-6 shadow-xl shadow-gray-200/50 dark:shadow-none group hover:scale-[1.02] transition-all\">\r\n                                <div className=\"flex justify-between items-start mb-4\">\r\n                                    <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl text-blue-600\">\r\n                                        <FileText size={20} />\r\n                                    </div>\r\n                                    {form.isMandatory && (\r\n                                        <span className=\"px-3 py-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 text-[10px] font-black uppercase tracking-widest rounded-full\">\r\n                                            Mandatory\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                                <h3 className=\"font-bold text-gray-900 dark:text-white mb-1\">{form.name}</h3>\r\n                                <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-6 font-medium leading-relaxed\">{form.description}</p>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => { setSelectedContract(form); setShowViewer(true); }}\r\n                                        className=\"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl font-bold text-xs hover:bg-gray-200 transition-all\"\r\n                                    >\r\n                                        View\r\n                                    </button>\r\n                                    <button className=\"p-3 bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-orange-500 rounded-xl transition-all\">\r\n                                        <Download size={16} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <h2 className=\"text-2xl font-black text-gray-900 dark:text-white mb-6\">Property Contracts</h2>\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8 mb-10\">\r\n                    <div className=\"lg:col-span-8\">\r\n                        <div className=\"relative group\">\r\n                            <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-orange-500 transition-colors\" size={20} />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search by property, contract type...\"\r\n                                className=\"w-full bg-white dark:bg-gray-800 border-2 border-transparent dark:border-gray-700 focus:border-orange-500 rounded-3xl pl-14 pr-6 py-5 outline-none font-bold text-gray-900 dark:text-white shadow-xl shadow-gray-200/50 dark:shadow-none transition-all\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"lg:col-span-4 flex gap-4\">\r\n                        <div className=\"flex-1 bg-white dark:bg-gray-800 rounded-3xl p-5 shadow-xl shadow-gray-200/50 dark:shadow-none flex items-center gap-4\">\r\n                            <div className=\"w-12 h-12 bg-orange-50 dark:bg-orange-900/20 rounded-2xl flex items-center justify-center text-orange-500\">\r\n                                <FileCheck size={24} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[10px] font-black text-gray-400 uppercase tracking-widest leading-none mb-1\">Signed</p>\r\n                                <p className=\"text-2xl font-black text-gray-900 dark:text-white\">12</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex-1 bg-white dark:bg-gray-800 rounded-3xl p-5 shadow-xl shadow-gray-200/50 dark:shadow-none flex items-center gap-4\">\r\n                            <div className=\"w-12 h-12 bg-red-50 dark:bg-red-900/20 rounded-2xl flex items-center justify-center text-red-500\">\r\n                                <Clock size={24} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[10px] font-black text-gray-400 uppercase tracking-widest leading-none mb-1\">Due</p>\r\n                                <p className=\"text-2xl font-black text-gray-900 dark:text-white\">1</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Contracts Display */}\r\n                {viewMode === 'grid' ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                        {contracts.map((contract: any) => {\r\n                            const config = getStatusConfig(contract.status);\r\n                            return (\r\n                                <div key={contract.id} className=\"bg-white dark:bg-gray-800 rounded-[2.5rem] shadow-xl shadow-gray-200/50 dark:shadow-none overflow-hidden group hover:scale-[1.02] transition-all\">\r\n                                    <div className=\"p-8\">\r\n                                        <div className=\"flex justify-between items-start mb-6\">\r\n                                            <div className={`p-4 rounded-2xl ${config.color}`}>\r\n                                                <FileText size={28} />\r\n                                            </div>\r\n                                            <div className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ${config.color}`}>\r\n                                                {config.label}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <h3 className=\"text-xl font-black text-gray-900 dark:text-white leading-tight mb-2 truncate\">{contract.property}</h3>\r\n                                        <p className=\"text-sm text-gray-500 font-bold uppercase tracking-wider mb-6\">{contract.type}</p>\r\n\r\n                                        <div className=\"space-y-3 mb-8\">\r\n                                            <div className=\"flex justify-between text-sm py-2\">\r\n                                                <span className=\"text-gray-400 font-bold uppercase text-[10px] tracking-widest\">Amount</span>\r\n                                                <span className=\"text-gray-900 dark:text-white font-black\">{formatCurrency(contract.amount)}</span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between text-sm py-2\">\r\n                                                <span className=\"text-gray-400 font-bold uppercase text-[10px] tracking-widest\">Date</span>\r\n                                                <span className=\"text-gray-900 dark:text-white font-bold\">{contract.date}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-3\">\r\n                                            <button\r\n                                                onClick={() => { setSelectedContract(contract); setShowViewer(true); }}\r\n                                                className=\"flex-1 bg-gray-900 dark:bg-white text-white dark:text-gray-900 py-4 rounded-2xl font-black text-sm transition-all active:scale-95 flex items-center justify-center gap-2\"\r\n                                            >\r\n                                                <Eye size={18} /> View\r\n                                            </button>\r\n                                            {contract.status === 'pending' && (\r\n                                                <button\r\n                                                    onClick={() => { setSelectedContract(contract); setShowSignatureModal(true); }}\r\n                                                    className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-4 rounded-2xl font-black text-sm transition-all shadow-lg shadow-orange-500/30 active:scale-95 flex items-center justify-center gap-2\"\r\n                                                >\r\n                                                    <FileCheck size={18} /> Sign\r\n                                                </button>\r\n                                            )}\r\n                                            <button className=\"p-4 bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-orange-500 rounded-2xl transition-all active:scale-95\">\r\n                                                <Download size={20} />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-[2.5rem] shadow-xl overflow-hidden\">\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-left\">\r\n                                <thead className=\"bg-gray-50 dark:bg-gray-900/50\">\r\n                                    <tr>\r\n                                        <th className=\"px-10 py-6 text-[10px] font-black text-gray-400 uppercase tracking-widest\">Document</th>\r\n                                        <th className=\"px-10 py-6 text-[10px] font-black text-gray-400 uppercase tracking-widest\">Property</th>\r\n                                        <th className=\"px-10 py-6 text-[10px] font-black text-gray-400 uppercase tracking-widest\">Status</th>\r\n                                        <th className=\"px-10 py-6 text-right text-[10px] font-black text-gray-400 uppercase tracking-widest\">Actions</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y dark:divide-gray-700\">\r\n                                    {contracts.map((contract: any) => {\r\n                                        const config = getStatusConfig(contract.status);\r\n                                        return (\r\n                                            <tr key={contract.id} className=\"hover:bg-gray-50/50 dark:hover:bg-gray-900/10 transition-colors\">\r\n                                                <td className=\"px-10 py-7\">\r\n                                                    <div className=\"flex items-center gap-4\">\r\n                                                        <div className={`p-2.5 rounded-xl ${config.color}`}>\r\n                                                            <FileText size={18} />\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <p className=\"font-bold text-gray-900 dark:text-white leading-none mb-1\">{contract.name}</p>\r\n                                                            <p className=\"text-xs text-gray-500 font-medium\">{contract.type}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"px-10 py-7\">\r\n                                                    <p className=\"font-bold text-gray-600 dark:text-gray-300\">{contract.property}</p>\r\n                                                </td>\r\n                                                <td className=\"px-10 py-7\">\r\n                                                    <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ${config.color}`}>\r\n                                                        {config.label}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"px-10 py-7 text-right\">\r\n                                                    <div className=\"flex justify-end gap-3\">\r\n                                                        <button className=\"p-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl hover:bg-gray-200 transition-all\">\r\n                                                            <Eye size={18} />\r\n                                                        </button>\r\n                                                        <button className=\"p-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all shadow-lg\">\r\n                                                            <Download size={18} />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        );\r\n                                    })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {/* Modals */}\r\n                {showViewer && selectedContract && (\r\n                    <ContractViewer\r\n                        onClose={() => setShowViewer(false)}\r\n                        contract={selectedContract}\r\n                    />\r\n                )}\r\n\r\n                {showSignatureModal && selectedContract && (\r\n                    <SignatureModal\r\n                        onClose={() => setShowSignatureModal(false)}\r\n                        contract={selectedContract}\r\n                        onSign={(id, signature) => {\r\n                            alert('Contract signed successfully!');\r\n                            setShowSignatureModal(false);\r\n                        }}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":["__iconNode","RotateCcw","createLucideIcon","ContractViewer","contract","onClose","isLoading","setIsLoading","useState","useEffect","timer","currentDate","jsxs","jsx","FileText","link","Download","X","_a","SignatureModal","onSign","signature","setSignature","isDrawing","setIsDrawing","canvasRef","useRef","hasSigned","setHasSigned","getCoordinates","e","canvas","rect","scaleX","scaleY","handleStartDrawing","ctx","coords","handleDraw","handleStopDrawing","dataURL","channel","index","clearSignature","handleAcceptAndSign","signedContracts","Check","Fragment","ContractsPage","navigate","useNavigate","viewMode","setViewMode","searchQuery","setSearchQuery","selectedContract","setSelectedContract","showViewer","setShowViewer","showSignatureModal","setShowSignatureModal","contracts","setContracts","templates","setTemplates","loading","setLoading","fetchContracts","React","result","bookingsService","mapped","c","err","res","getStatusConfig","status","CheckCircle","Clock","AlertCircle","formatCurrency","amount","ArrowLeft","Grid","List","FileCheck","form","Search","config","Eye","id"],"mappings":"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","x_google_ignoreList":[0]}