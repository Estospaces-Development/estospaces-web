{"version":3,"file":"page-BObDwsG5.js","sources":["../../src/components/manager/applications/ApplicationCard.tsx","../../src/components/manager/applications/StatusTracker.tsx","../../src/components/manager/contracts/CreateContractModal.tsx","../../src/components/manager/applications/ApplicationDetail.tsx","../../src/components/manager/applications/ApplicationFilters.tsx","../../src/pages/manager/applications/page.tsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n    FileText,\r\n    MapPin,\r\n    User,\r\n    Clock,\r\n    AlertCircle,\r\n    ChevronRight,\r\n    CheckCircle,\r\n    XCircle,\r\n    Edit,\r\n    Upload,\r\n    MessageSquare,\r\n    Calendar,\r\n    Home,\r\n    Building2,\r\n    TrendingUp,\r\n    LucideIcon\r\n} from 'lucide-react';\r\nimport { APPLICATION_STATUS, Application } from '../../../contexts/ApplicationsContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface ApplicationCardProps {\r\n    application: Application;\r\n    onClick: () => void;\r\n}\r\n\r\nconst ApplicationCard: React.FC<ApplicationCardProps> = ({ application, onClick }) => {\r\n    const navigate = useNavigate();\r\n\r\n    const getStatusConfig = (status: string) => {\r\n        switch (status) {\r\n            case APPLICATION_STATUS.DRAFT:\r\n                return {\r\n                    label: 'Draft',\r\n                    color: 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300',\r\n                    dotColor: 'bg-gray-400',\r\n                    icon: Edit,\r\n                };\r\n            case APPLICATION_STATUS.PENDING:\r\n                return {\r\n                    label: 'Pending Review',\r\n                    color: 'bg-yellow-50 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400',\r\n                    dotColor: 'bg-yellow-500',\r\n                    icon: Clock,\r\n                };\r\n            case APPLICATION_STATUS.SUBMITTED:\r\n                return {\r\n                    label: 'Submitted',\r\n                    color: 'bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400',\r\n                    dotColor: 'bg-blue-500',\r\n                    icon: FileText,\r\n                };\r\n            case APPLICATION_STATUS.APPOINTMENT_BOOKED:\r\n                return {\r\n                    label: 'Appointment Booked',\r\n                    color: 'bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400',\r\n                    dotColor: 'bg-purple-500',\r\n                    icon: Calendar,\r\n                };\r\n            case APPLICATION_STATUS.VIEWING_SCHEDULED:\r\n                return {\r\n                    label: 'Viewing Scheduled',\r\n                    color: 'bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400',\r\n                    dotColor: 'bg-indigo-500',\r\n                    icon: Calendar,\r\n                };\r\n            case APPLICATION_STATUS.VIEWING_COMPLETED:\r\n                return {\r\n                    label: 'Viewing Completed',\r\n                    color: 'bg-cyan-50 text-cyan-600 dark:bg-cyan-900/30 dark:text-cyan-400',\r\n                    dotColor: 'bg-cyan-500',\r\n                    icon: CheckCircle,\r\n                };\r\n            case APPLICATION_STATUS.UNDER_REVIEW:\r\n                return {\r\n                    label: 'Under Review',\r\n                    color: 'bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400',\r\n                    dotColor: 'bg-amber-500',\r\n                    icon: Clock,\r\n                };\r\n            case APPLICATION_STATUS.DOCUMENTS_REQUESTED:\r\n                return {\r\n                    label: 'Documents Requested',\r\n                    color: 'bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400',\r\n                    dotColor: 'bg-orange-500',\r\n                    icon: Upload,\r\n                };\r\n            case APPLICATION_STATUS.VERIFICATION_IN_PROGRESS:\r\n                return {\r\n                    label: 'Verification in Progress',\r\n                    color: 'bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400',\r\n                    dotColor: 'bg-blue-500',\r\n                    icon: TrendingUp,\r\n                };\r\n            case APPLICATION_STATUS.APPROVED:\r\n                return {\r\n                    label: 'Approved',\r\n                    color: 'bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400',\r\n                    dotColor: 'bg-emerald-500',\r\n                    icon: CheckCircle,\r\n                };\r\n            case APPLICATION_STATUS.REJECTED:\r\n                return {\r\n                    label: 'Rejected',\r\n                    color: 'bg-red-50 text-red-600 dark:bg-red-900/30 dark:text-red-400',\r\n                    dotColor: 'bg-red-500',\r\n                    icon: XCircle,\r\n                };\r\n            case APPLICATION_STATUS.WITHDRAWN:\r\n                return {\r\n                    label: 'Withdrawn',\r\n                    color: 'bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400',\r\n                    dotColor: 'bg-gray-400',\r\n                    icon: XCircle,\r\n                };\r\n            case APPLICATION_STATUS.COMPLETED:\r\n                return {\r\n                    label: 'Completed',\r\n                    color: 'bg-green-50 text-green-600 dark:bg-green-900/30 dark:text-green-400',\r\n                    dotColor: 'bg-green-500',\r\n                    icon: CheckCircle,\r\n                };\r\n            default:\r\n                return {\r\n                    label: status?.replace(/_/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase()) || 'Unknown',\r\n                    color: 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300',\r\n                    dotColor: 'bg-gray-400',\r\n                    icon: FileText,\r\n                };\r\n        }\r\n    };\r\n\r\n    const getPrimaryAction = () => {\r\n        switch (application.status) {\r\n            case APPLICATION_STATUS.DRAFT:\r\n                return { label: 'Continue', action: 'edit' };\r\n            case APPLICATION_STATUS.DOCUMENTS_REQUESTED:\r\n                return { label: 'Upload', action: 'upload' };\r\n            case APPLICATION_STATUS.UNDER_REVIEW:\r\n                return { label: 'View', action: 'view' };\r\n            default:\r\n                return { label: 'View', action: 'view' };\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString?: string) => {\r\n        if (!dateString) return 'N/A';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });\r\n    };\r\n\r\n    const formatRelativeTime = (dateString?: string) => {\r\n        if (!dateString) return 'N/A';\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diff = now.getTime() - date.getTime();\r\n        const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n        const hours = Math.floor(diff / (1000 * 60 * 60));\r\n        const minutes = Math.floor(diff / (1000 * 60));\r\n\r\n        if (minutes < 60) return `${minutes}m ago`;\r\n        if (hours < 24) return `${hours}h ago`;\r\n        if (days === 1) return 'Yesterday';\r\n        if (days < 7) return `${days} days ago`;\r\n        return formatDate(dateString);\r\n    };\r\n\r\n    const isDeadlineWarning = () => {\r\n        if (!application.deadline) return false;\r\n        const deadline = new Date(application.deadline);\r\n        const now = new Date();\r\n        const threeDaysFromNow = new Date(now.getTime() + 3 * 24 * 60 * 60 * 1000);\r\n        return deadline <= threeDaysFromNow && deadline > now;\r\n    };\r\n\r\n    const statusConfig = getStatusConfig(application.status);\r\n    const primaryAction = getPrimaryAction();\r\n\r\n    const handleMessageAgent = (e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        navigate('/manager/messages');\r\n    };\r\n\r\n    // Get progress percentage based on status\r\n    const getProgressPercentage = () => {\r\n        switch (application.status) {\r\n            case APPLICATION_STATUS.DRAFT: return 10;\r\n            case APPLICATION_STATUS.PENDING:\r\n            case APPLICATION_STATUS.SUBMITTED: return 20;\r\n            case APPLICATION_STATUS.APPOINTMENT_BOOKED:\r\n            case APPLICATION_STATUS.VIEWING_SCHEDULED: return 30;\r\n            case APPLICATION_STATUS.VIEWING_COMPLETED: return 40;\r\n            case APPLICATION_STATUS.UNDER_REVIEW: return 55;\r\n            case APPLICATION_STATUS.DOCUMENTS_REQUESTED: return 65;\r\n            case APPLICATION_STATUS.VERIFICATION_IN_PROGRESS: return 80;\r\n            case APPLICATION_STATUS.APPROVED:\r\n            case APPLICATION_STATUS.COMPLETED: return 100;\r\n            case APPLICATION_STATUS.REJECTED:\r\n            case APPLICATION_STATUS.WITHDRAWN: return 0;\r\n            default: return 15;\r\n        }\r\n    };\r\n\r\n    const formatAppointment = () => {\r\n        if (!application.appointment) return null;\r\n        const { date, time } = application.appointment;\r\n        if (!date) return null;\r\n\r\n        const appointmentDate = new Date(date);\r\n        const formattedDate = appointmentDate.toLocaleDateString('en-GB', {\r\n            weekday: 'short',\r\n            day: 'numeric',\r\n            month: 'short'\r\n        });\r\n        return `${formattedDate}${time ? ` at ${time}` : ''}`;\r\n    };\r\n\r\n    const getPropertyTypeIcon = () => {\r\n        const type = application.propertyType?.toLowerCase();\r\n        if (type === 'apartment' || type === 'flat') return Building2;\r\n        return Home;\r\n    };\r\n\r\n    const PropertyTypeIcon = getPropertyTypeIcon();\r\n\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className={`group bg-white dark:bg-gray-800 rounded-xl border overflow-hidden transition-all duration-200 cursor-pointer hover:shadow-lg ${application.requiresAction\r\n                    ? 'border-orange-200 dark:border-orange-800 ring-1 ring-orange-100 dark:ring-orange-900/30'\r\n                    : 'border-gray-200 dark:border-gray-700 hover:border-orange-200 dark:hover:border-orange-800'\r\n                }`}\r\n        >\r\n            <div className=\"flex font-outfit\">\r\n                {/* Property Image */}\r\n                <div className=\"relative flex-shrink-0 w-32 sm:w-40 lg:w-48\">\r\n                    <img\r\n                        src={application.propertyImage}\r\n                        alt={application.propertyTitle}\r\n                        className=\"w-full h-full object-cover min-h-[160px]\"\r\n                        onError={(e) => {\r\n                            (e.target as HTMLImageElement).src = 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=200';\r\n                        }}\r\n                    />\r\n                    {/* Status Badge Overlay */}\r\n                    <div className=\"absolute top-3 left-3\">\r\n                        <span className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${statusConfig.color} backdrop-blur-sm`}>\r\n                            <span className={`w-1.5 h-1.5 rounded-full ${statusConfig.dotColor}`}></span>\r\n                            {statusConfig.label}\r\n                        </span>\r\n                    </div>\r\n                    {/* Action Required Badge */}\r\n                    {application.requiresAction && (\r\n                        <div className=\"absolute top-3 right-3\">\r\n                            <span className=\"flex items-center gap-1 px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded-full shadow-sm\">\r\n                                <AlertCircle size={12} />\r\n                                Action\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 p-4 lg:p-5 flex flex-col justify-between min-w-0\">\r\n                    {/* Top Section */}\r\n                    <div>\r\n                        {/* Header */}\r\n                        <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n                            <div className=\"min-w-0\">\r\n                                <h3 className=\"font-semibold text-gray-900 dark:text-white text-base lg:text-lg truncate group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\r\n                                    {application.propertyTitle || 'Untitled Property'}\r\n                                </h3>\r\n                                <div className=\"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 mt-0.5\">\r\n                                    <MapPin size={13} className=\"flex-shrink-0\" />\r\n                                    <span className=\"truncate\">{application.propertyAddress || 'Address not specified'}</span>\r\n                                </div>\r\n                            </div>\r\n                            <ChevronRight size={20} className=\"text-gray-300 dark:text-gray-600 group-hover:text-orange-400 transition-colors flex-shrink-0 mt-1\" />\r\n                        </div>\r\n\r\n                        {/* Info Grid */}\r\n                        <div className=\"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 mt-3 text-sm\">\r\n                            <div className=\"flex items-center gap-2 text-gray-500 dark:text-gray-400\">\r\n                                <User size={14} className=\"flex-shrink-0 text-gray-400\" />\r\n                                <span className=\"truncate\">{application.agentName}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-gray-500 dark:text-gray-400\">\r\n                                <Clock size={14} className=\"flex-shrink-0 text-gray-400\" />\r\n                                <span className=\"truncate\">{formatRelativeTime(application.lastUpdated || application.createdAt)}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-gray-500 dark:text-gray-400\">\r\n                                <FileText size={14} className=\"flex-shrink-0 text-gray-400\" />\r\n                                <span className=\"truncate font-mono text-xs\">{application.referenceId}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Appointment Info */}\r\n                        {application.hasAppointment && formatAppointment() && (\r\n                            <div className=\"mt-3 inline-flex items-center gap-2 px-3 py-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-100 dark:border-purple-800 rounded-lg\">\r\n                                <Calendar size={14} className=\"text-purple-600 dark:text-purple-400\" />\r\n                                <span className=\"text-sm text-purple-700 dark:text-purple-300 font-medium\">\r\n                                    Appointment: {formatAppointment()}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Progress Bar */}\r\n                        {application.status !== APPLICATION_STATUS.REJECTED &&\r\n                            application.status !== APPLICATION_STATUS.WITHDRAWN && (\r\n                                <div className=\"mt-3\">\r\n                                    <div className=\"flex items-center justify-between mb-1\">\r\n                                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">Progress</span>\r\n                                        <span className=\"text-xs font-medium text-orange-600 dark:text-orange-400\">\r\n                                            {getProgressPercentage()}%\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className={`h-full rounded-full transition-all duration-500 ${application.status === APPLICATION_STATUS.APPROVED\r\n                                                    ? 'bg-green-500'\r\n                                                    : 'bg-gradient-to-r from-orange-400 to-orange-500'\r\n                                                }`}\r\n                                            style={{ width: `${getProgressPercentage()}%` }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                        {/* Deadline Warning */}\r\n                        {isDeadlineWarning() && (\r\n                            <div className=\"mt-3 inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-lg\">\r\n                                <Clock size={13} className=\"text-red-500\" />\r\n                                <span className=\"text-xs font-medium text-red-600 dark:text-red-400\">\r\n                                    Due: {formatDate(application.deadline)}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Bottom Section - Actions */}\r\n                    <div className=\"flex items-center justify-between mt-4 pt-3 border-t border-gray-100 dark:border-gray-700\">\r\n                        {/* Price */}\r\n                        <div>\r\n                            <span className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n                                £{application.propertyPrice?.toLocaleString()}\r\n                            </span>\r\n                            <span className=\"text-sm text-gray-500 dark:text-gray-400 ml-1\">\r\n                                {application.propertyType === 'rent' ? '/month' : ''}\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Action Buttons */}\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                                onClick={handleMessageAgent}\r\n                                className=\"p-2 text-gray-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors\"\r\n                                title=\"Message Agent\"\r\n                            >\r\n                                <MessageSquare size={18} />\r\n                            </button>\r\n                            <button\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    onClick();\r\n                                }}\r\n                                className=\"flex items-center gap-1.5 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition-colors shadow-sm hover:shadow\"\r\n                            >\r\n                                {primaryAction.label}\r\n                                <ChevronRight size={16} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ApplicationCard;\r\n","import React from 'react';\r\nimport {\r\n    FileText,\r\n    Search,\r\n    FileCheck,\r\n    UserCheck,\r\n    CheckCircle,\r\n    XCircle,\r\n    Clock,\r\n    AlertCircle,\r\n    Home,\r\n    Key,\r\n    LucideIcon\r\n} from 'lucide-react';\r\nimport { APPLICATION_STATUS, ApplicationStatus } from '../../../contexts/ApplicationsContext';\r\n\r\ninterface StatusTrackerProps {\r\n    status: ApplicationStatus;\r\n    listingType?: string;\r\n}\r\n\r\ninterface Stage {\r\n    id: string;\r\n    label: string;\r\n    description: string;\r\n    icon: LucideIcon;\r\n    statuses: ApplicationStatus[];\r\n}\r\n\r\nconst StatusTracker: React.FC<StatusTrackerProps> = ({ status, listingType = 'sale' }) => {\r\n    // Define stages based on listing type\r\n    const getStages = (): Stage[] => {\r\n        const baseStages: Stage[] = [\r\n            {\r\n                id: 'submitted',\r\n                label: 'Application Submitted',\r\n                description: 'Your application has been received',\r\n                icon: FileText,\r\n                statuses: [APPLICATION_STATUS.PENDING, APPLICATION_STATUS.SUBMITTED]\r\n            },\r\n            {\r\n                id: 'under_review',\r\n                label: 'Under Review',\r\n                description: 'Agent is reviewing your application',\r\n                icon: Search,\r\n                statuses: [APPLICATION_STATUS.UNDER_REVIEW]\r\n            },\r\n            {\r\n                id: 'verification',\r\n                label: listingType === 'rent' ? 'Tenant Verification' : 'Buyer Verification',\r\n                description: listingType === 'rent'\r\n                    ? 'Background & credit check in progress'\r\n                    : 'Financial verification in progress',\r\n                icon: UserCheck,\r\n                statuses: [APPLICATION_STATUS.DOCUMENTS_REQUESTED]\r\n            },\r\n            {\r\n                id: 'documents',\r\n                label: 'Document Review',\r\n                description: 'Final document verification',\r\n                icon: FileCheck,\r\n                statuses: []\r\n            },\r\n            {\r\n                id: 'decision',\r\n                label: 'Final Decision',\r\n                description: status === APPLICATION_STATUS.APPROVED || status === APPLICATION_STATUS.COMPLETED\r\n                    ? 'Congratulations! Your application is approved'\r\n                    : status === APPLICATION_STATUS.REJECTED\r\n                        ? 'Application was not approved'\r\n                        : 'Awaiting final decision',\r\n                icon: (status === APPLICATION_STATUS.APPROVED || status === APPLICATION_STATUS.COMPLETED) ? CheckCircle :\r\n                    status === APPLICATION_STATUS.REJECTED ? XCircle : Clock,\r\n                statuses: [APPLICATION_STATUS.APPROVED, APPLICATION_STATUS.REJECTED, APPLICATION_STATUS.COMPLETED]\r\n            }\r\n        ];\r\n\r\n        // Add completion stage for approved/completed applications\r\n        if (status === APPLICATION_STATUS.APPROVED || status === APPLICATION_STATUS.COMPLETED) {\r\n            baseStages.push({\r\n                id: 'completion',\r\n                label: listingType === 'rent' ? 'Move In Ready' : 'Key Handover',\r\n                description: status === APPLICATION_STATUS.COMPLETED\r\n                    ? (listingType === 'rent' ? 'Keys collected & moved in' : 'Keys handed over & completed')\r\n                    : (listingType === 'rent' ? 'Prepare for your move-in date' : 'Proceed to contract signing'),\r\n                icon: listingType === 'rent' ? Key : Home,\r\n                statuses: [APPLICATION_STATUS.COMPLETED]\r\n            });\r\n        }\r\n\r\n        return baseStages;\r\n    };\r\n\r\n    const stages = getStages();\r\n\r\n    // Determine current stage index\r\n    const getCurrentStageIndex = () => {\r\n        if (status === APPLICATION_STATUS.WITHDRAWN) return -1;\r\n        if (status === APPLICATION_STATUS.REJECTED) return stages.length - 2; // Decision stage\r\n        if (status === APPLICATION_STATUS.COMPLETED) return stages.length - 1; // Completion stage\r\n        if (status === APPLICATION_STATUS.APPROVED) return stages.length - 1; // Also completion stage (but typically shows as current)\r\n        if (status === APPLICATION_STATUS.DOCUMENTS_REQUESTED) return 2;\r\n        if (status === APPLICATION_STATUS.UNDER_REVIEW) return 1;\r\n        return 0;\r\n    };\r\n\r\n    const currentStageIndex = getCurrentStageIndex();\r\n\r\n    // Get status color\r\n    const getStatusColor = () => {\r\n        switch (status) {\r\n            case APPLICATION_STATUS.APPROVED:\r\n                return 'text-green-600 bg-green-100 border-green-200';\r\n            case APPLICATION_STATUS.REJECTED:\r\n                return 'text-red-600 bg-red-100 border-red-200';\r\n            case APPLICATION_STATUS.WITHDRAWN:\r\n                return 'text-gray-600 bg-gray-100 border-gray-200';\r\n            case APPLICATION_STATUS.DOCUMENTS_REQUESTED:\r\n                return 'text-orange-600 bg-orange-100 border-orange-200';\r\n            default:\r\n                return 'text-blue-600 bg-blue-100 border-blue-200';\r\n        }\r\n    };\r\n\r\n    // Get status label\r\n    const getStatusLabel = () => {\r\n        switch (status) {\r\n            case APPLICATION_STATUS.PENDING:\r\n            case APPLICATION_STATUS.SUBMITTED:\r\n                return 'Submitted';\r\n            case APPLICATION_STATUS.UNDER_REVIEW:\r\n                return 'Under Review';\r\n            case APPLICATION_STATUS.DOCUMENTS_REQUESTED:\r\n                return 'Documents Needed';\r\n            case APPLICATION_STATUS.APPROVED:\r\n                return 'Approved';\r\n            case APPLICATION_STATUS.REJECTED:\r\n                return 'Not Approved';\r\n            case APPLICATION_STATUS.WITHDRAWN:\r\n                return 'Withdrawn';\r\n            default:\r\n                return 'Processing';\r\n        }\r\n    };\r\n\r\n    if (status === APPLICATION_STATUS.WITHDRAWN) {\r\n        return (\r\n            <div className=\"bg-gray-50 dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-14 h-14 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center\">\r\n                        <XCircle className=\"w-7 h-7 text-gray-500\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                            Application Withdrawn\r\n                        </h3>\r\n                        <p className=\"text-gray-500 dark:text-gray-400\">\r\n                            You have withdrawn this application\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n            {/* Header with current status */}\r\n            <div className=\"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-5\">\r\n                <div className=\"flex items-center justify-between font-outfit\">\r\n                    <div>\r\n                        <h3 className=\"text-white text-lg font-semibold\">Application Progress</h3>\r\n                        <p className=\"text-orange-100 text-sm mt-1\">\r\n                            {listingType === 'rent' ? 'Rental Application' : 'Purchase Application'}\r\n                        </p>\r\n                    </div>\r\n                    <div className={`px-4 py-2 rounded-full text-sm font-medium border ${getStatusColor()}`}>\r\n                        {getStatusLabel()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Progress Timeline */}\r\n            <div className=\"p-6\">\r\n                <div className=\"relative\">\r\n                    {stages.map((stage, index) => {\r\n                        const Icon = stage.icon;\r\n                        const isCompleted = index < currentStageIndex;\r\n                        const isCurrent = index === currentStageIndex;\r\n                        const isPending = index > currentStageIndex;\r\n                        const isRejected = status === APPLICATION_STATUS.REJECTED && index === currentStageIndex;\r\n\r\n                        return (\r\n                            <div key={stage.id} className=\"relative flex items-start pb-8 last:pb-0\">\r\n                                {/* Connecting Line */}\r\n                                {index < stages.length - 1 && (\r\n                                    <div\r\n                                        className={`absolute left-6 top-12 w-0.5 h-full -ml-px ${isCompleted ? 'bg-green-500' :\r\n                                            isCurrent && !isRejected ? 'bg-orange-300' :\r\n                                                'bg-gray-200 dark:bg-gray-700'\r\n                                            }`}\r\n                                    />\r\n                                )}\r\n\r\n                                {/* Stage Icon */}\r\n                                <div className={`relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 ${isCompleted\r\n                                    ? 'bg-green-500 border-green-500 text-white'\r\n                                    : isCurrent && !isRejected\r\n                                        ? 'bg-orange-500 border-orange-500 text-white animate-pulse'\r\n                                        : isRejected\r\n                                            ? 'bg-red-500 border-red-500 text-white'\r\n                                            : 'bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-400'\r\n                                    }`}>\r\n                                    {isCompleted ? (\r\n                                        <CheckCircle className=\"w-6 h-6\" />\r\n                                    ) : isRejected ? (\r\n                                        <XCircle className=\"w-6 h-6\" />\r\n                                    ) : (\r\n                                        <Icon className=\"w-5 h-5\" />\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Stage Content */}\r\n                                <div className=\"ml-4 flex-1 min-w-0 font-outfit\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <h4 className={`font-semibold ${isCompleted || isCurrent\r\n                                            ? 'text-gray-900 dark:text-white'\r\n                                            : 'text-gray-400 dark:text-gray-500'\r\n                                            }`}>\r\n                                            {stage.label}\r\n                                        </h4>\r\n                                        {isCurrent && !isRejected && (\r\n                                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-xs font-medium rounded-full\">\r\n                                                <span className=\"w-1.5 h-1.5 bg-orange-500 rounded-full animate-pulse\" />\r\n                                                Current\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className={`text-sm mt-1 ${isCompleted || isCurrent\r\n                                        ? 'text-gray-600 dark:text-gray-400'\r\n                                        : 'text-gray-400 dark:text-gray-600'\r\n                                        }`}>\r\n                                        {stage.description}\r\n                                    </p>\r\n\r\n                                    {/* Action prompt for current stage */}\r\n                                    {isCurrent && status === APPLICATION_STATUS.DOCUMENTS_REQUESTED && (\r\n                                        <div className=\"mt-3 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800\">\r\n                                            <div className=\"flex items-center gap-2 text-orange-700 dark:text-orange-400\">\r\n                                                <AlertCircle size={16} />\r\n                                                <span className=\"text-sm font-medium\">Action Required</span>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-orange-600 dark:text-orange-300 mt-1\">\r\n                                                Please upload the requested documents to proceed\r\n                                            </p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Estimated Timeline */}\r\n            {status !== APPLICATION_STATUS.APPROVED && status !== APPLICATION_STATUS.REJECTED && (\r\n                <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 font-outfit\">\r\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                        <Clock size={16} />\r\n                        <span>Estimated processing time: <strong>3-5 business days</strong></span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatusTracker;\r\n","import React, { useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { X, FileText, Calendar, DollarSign, AlertCircle } from 'lucide-react';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { createContract, CreateContractRequest } from '@/services/contractsService';\r\n\r\ninterface CreateContractModalProps {\r\n    applicationId: string;\r\n    propertyPrice: number;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n}\r\n\r\nexport default function CreateContractModal({ applicationId, propertyPrice, onClose, onSuccess }: CreateContractModalProps) {\r\n    const { success: toastSuccess, error: toastError } = useToast();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [formData, setFormData] = useState<CreateContractRequest>({\r\n        application_id: applicationId,\r\n        start_date: '',\r\n        end_date: '',\r\n        monthly_rent: propertyPrice || 0,\r\n        deposit_amount: (propertyPrice || 0) * 1.2, // Default 5 weeks deposit approx\r\n        terms_and_conditions: 'Standard Assured Shorthold Tenancy Agreement terms apply.'\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n\r\n        const { data, error } = await createContract(formData);\r\n\r\n        if (error) {\r\n            toastError(error);\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        toastSuccess('Contract drafted successfully');\r\n        onSuccess();\r\n        onClose();\r\n    };\r\n\r\n    return createPortal(\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 font-outfit\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl shadow-2xl animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n                    <h2 className=\"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                        <FileText className=\"text-orange-500\" />\r\n                        Draft Tenancy Agreement\r\n                    </h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors\">\r\n                        <X size={20} className=\"text-gray-500\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"p-6 overflow-y-auto custom-scrollbar\">\r\n                    <form id=\"contract-form\" onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            {/* Rent & Deposit */}\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Monthly Rent (£)</label>\r\n                                <div className=\"relative\">\r\n                                    <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        required\r\n                                        min=\"0\"\r\n                                        value={formData.monthly_rent}\r\n                                        onChange={(e) => setFormData({ ...formData, monthly_rent: parseFloat(e.target.value) })}\r\n                                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Security Deposit (£)</label>\r\n                                <div className=\"relative\">\r\n                                    <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        required\r\n                                        min=\"0\"\r\n                                        value={formData.deposit_amount}\r\n                                        onChange={(e) => setFormData({ ...formData, deposit_amount: parseFloat(e.target.value) })}\r\n                                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Dates */}\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Start Date</label>\r\n                                <div className=\"relative\">\r\n                                    <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        required\r\n                                        value={formData.start_date}\r\n                                        onChange={(e) => setFormData({ ...formData, start_date: e.target.value })}\r\n                                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">End Date (Optional)</label>\r\n                                <div className=\"relative\">\r\n                                    <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={formData.end_date}\r\n                                        onChange={(e) => setFormData({ ...formData, end_date: e.target.value })}\r\n                                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Terms */}\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Special Terms & Conditions</label>\r\n                            <textarea\r\n                                rows={6}\r\n                                value={formData.terms_and_conditions}\r\n                                onChange={(e) => setFormData({ ...formData, terms_and_conditions: e.target.value })}\r\n                                className=\"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white resize-none\"\r\n                                placeholder=\"Enter any specific clauses or terms...\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg flex gap-3 text-sm text-blue-800 dark:text-blue-300\">\r\n                            <AlertCircle className=\"flex-shrink-0 mt-0.5\" size={16} />\r\n                            <p>\r\n                                Once drafted, the tenant will be notified to review and sign the agreement.\r\n                                You will need to countersign after they have signed.\r\n                            </p>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-2xl\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"px-6 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        form=\"contract-form\"\r\n                        disabled={isLoading}\r\n                        className=\"px-6 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-medium transition-colors shadow-sm disabled:opacity-70 flex items-center gap-2\"\r\n                    >\r\n                        {isLoading ? (\r\n                            <>\r\n                                <span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                creating...\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <FileText size={18} />\r\n                                Draft Contract\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>,\r\n        document.body\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport {\r\n    ArrowLeft,\r\n    ExternalLink,\r\n    MapPin,\r\n    MessageSquare,\r\n    XCircle,\r\n    CheckCircle,\r\n    Calendar,\r\n    Clock,\r\n    Phone,\r\n    Mail,\r\n    Building2,\r\n    User,\r\n    FileText,\r\n    AlertCircle,\r\n    ChevronRight,\r\n    Home,\r\n    Briefcase,\r\n    History,\r\n    Shield,\r\n    Key,\r\n    Upload,\r\n    LucideIcon\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useApplications, APPLICATION_STATUS, Application, ApplicationStatus } from '../../../contexts/ApplicationsContext';\r\nimport StatusTracker from './StatusTracker';\r\nimport CreateContractModal from '@/components/manager/contracts/CreateContractModal';\r\n\r\ninterface ApplicationDetailProps {\r\n    applicationId: string;\r\n    application?: Application;\r\n    onClose: () => void;\r\n    onUpdateStatus?: (id: string, status: ApplicationStatus) => void;\r\n}\r\n\r\nconst ApplicationDetail: React.FC<ApplicationDetailProps> = ({ applicationId, application: initialApplication, onClose, onUpdateStatus }) => {\r\n    const navigate = useNavigate();\r\n    const { allApplications, withdrawApplication } = useApplications();\r\n    const [showWithdrawConfirm, setShowWithdrawConfirm] = useState(false);\r\n    const [showCompleteConfirm, setShowCompleteConfirm] = useState(false);\r\n    const [showContractModal, setShowContractModal] = useState(false);\r\n    const [activeTab, setActiveTab] = useState('overview');\r\n\r\n    // Find the application - prioritize the passed prop, fall back to context search\r\n    const application = initialApplication || allApplications?.find(app => app.id === applicationId);\r\n\r\n    if (!application) {\r\n        return (\r\n            <div className=\"min-h-full bg-gray-50 dark:bg-gray-900 flex items-center justify-center font-outfit\">\r\n                <div className=\"text-center p-8\">\r\n                    <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                        <FileText className=\"w-8 h-8 text-gray-400\" />\r\n                    </div>\r\n                    <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n                        Application Not Found\r\n                    </h2>\r\n                    <p className=\"text-gray-500 dark:text-gray-400 mb-4\">\r\n                        This application may have been removed or doesn't exist.\r\n                    </p>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors\"\r\n                    >\r\n                        Back to Applications\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const canWithdraw = ![APPLICATION_STATUS.WITHDRAWN as ApplicationStatus, APPLICATION_STATUS.APPROVED as ApplicationStatus, APPLICATION_STATUS.REJECTED as ApplicationStatus].includes(application.status);\r\n\r\n    const formatDate = (dateString?: string) => {\r\n        if (!dateString) return 'N/A';\r\n        return new Date(dateString).toLocaleDateString('en-GB', {\r\n            day: 'numeric',\r\n            month: 'long',\r\n            year: 'numeric',\r\n        });\r\n    };\r\n\r\n    const formatPrice = (price?: number) => {\r\n        if (price === undefined) return 'Price on request';\r\n        return `£${price.toLocaleString('en-GB')}`;\r\n    };\r\n\r\n    const handleWithdraw = async () => {\r\n        if (onUpdateStatus) {\r\n            onUpdateStatus(applicationId, APPLICATION_STATUS.WITHDRAWN as ApplicationStatus);\r\n        } else {\r\n            await withdrawApplication(applicationId);\r\n        }\r\n        setShowWithdrawConfirm(false);\r\n    };\r\n\r\n    const handleComplete = async () => {\r\n        if (onUpdateStatus) {\r\n            onUpdateStatus(applicationId, APPLICATION_STATUS.COMPLETED as ApplicationStatus);\r\n            setShowCompleteConfirm(false);\r\n        }\r\n    };\r\n\r\n    interface ActivityItem {\r\n        id: number;\r\n        type: string;\r\n        title: string;\r\n        description: string;\r\n        date: string;\r\n        icon: LucideIcon;\r\n        color: 'blue' | 'orange' | 'green' | 'red' | 'yellow' | 'gray';\r\n    }\r\n\r\n    const getActivityHistory = (): ActivityItem[] => {\r\n        const history: ActivityItem[] = [\r\n            {\r\n                id: 1,\r\n                type: 'submitted',\r\n                title: 'Application Submitted',\r\n                description: 'Your application was successfully submitted',\r\n                date: application.submittedDate || application.createdAt,\r\n                icon: FileText,\r\n                color: 'blue'\r\n            }\r\n        ];\r\n\r\n        const submittedTime = new Date(application.submittedDate || application.createdAt).getTime();\r\n\r\n        if (application.status !== APPLICATION_STATUS.PENDING && application.status !== APPLICATION_STATUS.SUBMITTED) {\r\n            history.push({\r\n                id: 2,\r\n                type: 'review',\r\n                title: 'Under Review',\r\n                description: 'Agent started reviewing your application',\r\n                date: new Date(submittedTime + 24 * 60 * 60 * 1000).toISOString(),\r\n                icon: Clock,\r\n                color: 'orange'\r\n            });\r\n        }\r\n\r\n        if (application.status === APPLICATION_STATUS.DOCUMENTS_REQUESTED) {\r\n            history.push({\r\n                id: 3,\r\n                type: 'documents',\r\n                title: 'Documents Requested',\r\n                description: 'Additional documents are required',\r\n                date: new Date(submittedTime + 2 * 24 * 60 * 60 * 1000).toISOString(),\r\n                icon: AlertCircle,\r\n                color: 'yellow'\r\n            });\r\n        }\r\n\r\n        if (application.status === APPLICATION_STATUS.APPROVED) {\r\n            history.push({\r\n                id: 4,\r\n                type: 'approved',\r\n                title: 'Application Approved',\r\n                description: 'Congratulations! Your application has been approved',\r\n                date: application.lastUpdated || new Date().toISOString(),\r\n                icon: CheckCircle,\r\n                color: 'green'\r\n            });\r\n        }\r\n\r\n        if (application.status === APPLICATION_STATUS.REJECTED) {\r\n            history.push({\r\n                id: 4,\r\n                type: 'rejected',\r\n                title: 'Application Not Approved',\r\n                description: 'Unfortunately, your application was not approved',\r\n                date: application.lastUpdated || new Date().toISOString(),\r\n                icon: XCircle,\r\n                color: 'red'\r\n            });\r\n        }\r\n\r\n        if (application.status === APPLICATION_STATUS.COMPLETED) {\r\n            history.push({\r\n                id: 5,\r\n                type: 'completed',\r\n                title: application.listingType === 'rent' ? 'Keys Collected' : 'Handover Complete',\r\n                description: application.listingType === 'rent' ? 'You have collected the keys and moved in' : 'Key handover completed successfully',\r\n                date: application.lastUpdated || new Date().toISOString(),\r\n                icon: Key,\r\n                color: 'green'\r\n            });\r\n        }\r\n\r\n        if (application.status === APPLICATION_STATUS.WITHDRAWN) {\r\n            history.push({\r\n                id: 4,\r\n                type: 'withdrawn',\r\n                title: 'Application Withdrawn',\r\n                description: 'You withdrew this application',\r\n                date: application.lastUpdated || new Date().toISOString(),\r\n                icon: XCircle,\r\n                color: 'gray'\r\n            });\r\n        }\r\n\r\n        return history.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    };\r\n\r\n    const activityHistory = getActivityHistory();\r\n\r\n    const tabs = [\r\n        { id: 'overview', label: 'Overview', icon: Home },\r\n        { id: 'documents', label: 'Documents', icon: FileText },\r\n        { id: 'history', label: 'Activity', icon: History },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"min-h-full bg-gray-50 dark:bg-gray-900 font-outfit\">\r\n            {/* Header */}\r\n            <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10\">\r\n                <div className=\"max-w-7xl mx-auto px-4 lg:px-6 py-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors\"\r\n                        >\r\n                            <ArrowLeft size={20} />\r\n                            <span className=\"font-medium\">Back to Applications</span>\r\n                        </button>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            {canWithdraw && (\r\n                                <button\r\n                                    onClick={() => setShowWithdrawConfirm(true)}\r\n                                    className=\"px-4 py-2 border border-red-300 dark:border-red-700 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\"\r\n                                >\r\n                                    Withdraw\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"max-w-7xl mx-auto px-4 lg:px-6 py-6\">\r\n                {/* Property Header Card */}\r\n                <div className=\"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden mb-6 shadow-sm\">\r\n                    <div className=\"flex flex-col lg:flex-row\">\r\n                        {/* Property Image */}\r\n                        <div className=\"lg:w-80 h-48 lg:h-auto flex-shrink-0\">\r\n                            <img\r\n                                src={application.propertyImage}\r\n                                alt={application.propertyTitle}\r\n                                className=\"w-full h-full object-cover\"\r\n                                onError={(e) => {\r\n                                    (e.target as HTMLImageElement).src = 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400';\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Property Info */}\r\n                        <div className=\"flex-1 p-6\">\r\n                            <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4\">\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${application.listingType === 'rent'\r\n                                            ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400'\r\n                                            : 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\r\n                                            }`}>\r\n                                            {application.listingType === 'rent' ? 'Rental' : 'Purchase'}\r\n                                        </span>\r\n                                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                                            Ref: {application.referenceId}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                                        {application.propertyTitle || 'Untitled Property'}\r\n                                    </h1>\r\n\r\n                                    <div className=\"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-4\">\r\n                                        <MapPin size={16} />\r\n                                        <span>{application.propertyAddress || 'Address not specified'}</span>\r\n                                    </div>\r\n\r\n                                    <div className=\"text-2xl font-bold text-orange-600 dark:text-orange-400\">\r\n                                        {formatPrice(application.propertyPrice)}\r\n                                        {application.listingType === 'rent' && (\r\n                                            <span className=\"text-base font-normal text-gray-500 ml-1\">/month</span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={() => navigate(`/manager/dashboard/property/${application.propertyId}`)}\r\n                                    className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium transition-colors\"\r\n                                >\r\n                                    <span>View Property</span>\r\n                                    <ExternalLink size={16} />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Quick Info */}\r\n                            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\r\n                                <div>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Submitted</p>\r\n                                    <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                                        {formatDate(application.submittedDate || application.createdAt)}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Last Updated</p>\r\n                                    <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                                        {formatDate(application.lastUpdated || application.createdAt)}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Property Type</p>\r\n                                    <p className=\"font-semibold text-gray-900 dark:text-white capitalize\">\r\n                                        {application.propertyType || 'N/A'}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Application Type</p>\r\n                                    <p className=\"font-semibold text-gray-900 dark:text-white capitalize\">\r\n                                        {application.listingType === 'rent' ? 'Rental' : 'Purchase'}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Status Tracker */}\r\n                <div className=\"mb-6\">\r\n                    <StatusTracker status={application.status} listingType={application.listingType} />\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div className=\"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\">\r\n                    <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n                        <div className=\"flex overflow-x-auto\">\r\n                            {tabs.map((tab) => {\r\n                                const Icon = tab.icon;\r\n                                return (\r\n                                    <button\r\n                                        key={tab.id}\r\n                                        onClick={() => setActiveTab(tab.id)}\r\n                                        className={`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${activeTab === tab.id\r\n                                            ? 'border-orange-500 text-orange-600 dark:text-orange-400'\r\n                                            : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\r\n                                            }`}\r\n                                    >\r\n                                        <Icon size={18} />\r\n                                        <span>{tab.label}</span>\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6\">\r\n                        {/* Overview Tab */}\r\n                        {activeTab === 'overview' && (\r\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                                {/* Agent Information */}\r\n                                <div className=\"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800\">\r\n                                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\r\n                                        <User size={20} className=\"text-orange-500\" />\r\n                                        Agent Information\r\n                                    </h3>\r\n                                    <div className=\"flex items-start gap-4\">\r\n                                        <div className=\"w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center text-white text-xl font-bold flex-shrink-0 shadow-md\">\r\n                                            {application.agentName?.charAt(0)?.toUpperCase() || 'A'}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <h4 className=\"font-semibold text-gray-900 dark:text-white\">\r\n                                                {application.agentName}\r\n                                            </h4>\r\n                                            {application.agentAgency && (\r\n                                                <p className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1\">\r\n                                                    <Building2 size={14} />\r\n                                                    {application.agentAgency}\r\n                                                </p>\r\n                                            )}\r\n                                            {application.agentEmail && (\r\n                                                <p className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1\">\r\n                                                    <Mail size={14} />\r\n                                                    {application.agentEmail}\r\n                                                </p>\r\n                                            )}\r\n                                            {application.agentPhone && (\r\n                                                <p className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1\">\r\n                                                    <Phone size={14} />\r\n                                                    {application.agentPhone}\r\n                                                </p>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => navigate('/manager/messages')}\r\n                                        className=\"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-all shadow-sm\"\r\n                                    >\r\n                                        <MessageSquare size={18} />\r\n                                        <span>Message Agent</span>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Application Summary */}\r\n                                <div className=\"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800\">\r\n                                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\r\n                                        <Briefcase size={20} className=\"text-orange-500\" />\r\n                                        Application Summary\r\n                                    </h3>\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700\">\r\n                                            <span className=\"text-gray-500 dark:text-gray-400\">Application ID</span>\r\n                                            <span className=\"font-medium text-gray-900 dark:text-white font-mono text-sm\">\r\n                                                {application.referenceId}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700\">\r\n                                            <span className=\"text-gray-500 dark:text-gray-400\">Type</span>\r\n                                            <span className=\"font-medium text-gray-900 dark:text-white capitalize\">\r\n                                                {application.listingType === 'rent' ? 'Rental Application' : 'Purchase Application'}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700\">\r\n                                            <span className=\"text-gray-500 dark:text-gray-400\">Property Value</span>\r\n                                            <span className=\"font-medium text-gray-900 dark:text-white\">\r\n                                                {formatPrice(application.propertyPrice)}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center justify-between py-3\">\r\n                                            <span className=\"text-gray-500 dark:text-gray-400\">Status</span>\r\n                                            <span className={`px-3 py-1 rounded-full text-sm font-medium ${application.status === APPLICATION_STATUS.APPROVED\r\n                                                ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\r\n                                                : application.status === APPLICATION_STATUS.REJECTED\r\n                                                    ? 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400'\r\n                                                    : application.status === APPLICATION_STATUS.DOCUMENTS_REQUESTED\r\n                                                        ? 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400'\r\n                                                        : 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400'\r\n                                                }`}>\r\n                                                {application.status?.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Next Steps & Approved Message */}\r\n                                {application.status !== APPLICATION_STATUS.APPROVED &&\r\n                                    application.status !== APPLICATION_STATUS.REJECTED &&\r\n                                    application.status !== APPLICATION_STATUS.WITHDRAWN ? (\r\n                                    <div className=\"lg:col-span-2 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 rounded-xl p-6 border border-orange-200 dark:border-orange-800/50\">\r\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\r\n                                            <ChevronRight size={20} className=\"text-orange-500\" />\r\n                                            What's Next?\r\n                                        </h3>\r\n                                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                            {/* ... existing next steps logic ... */}\r\n                                            {application.status === APPLICATION_STATUS.DOCUMENTS_REQUESTED ? (\r\n                                                <>\r\n                                                    <div className=\"flex items-start gap-3\">\r\n                                                        <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold shadow-sm\">1</div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900 dark:text-white\">Upload Documents</p>\r\n                                                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Submit the requested documents via the Documents tab</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-start gap-3 opacity-50\">\r\n                                                        <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold\">2</div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900 dark:text-white\">Verification</p>\r\n                                                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Our team will verify your submitted documents</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-start gap-3 opacity-50\">\r\n                                                        <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold\">3</div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900 dark:text-white\">Final Decision</p>\r\n                                                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Receive approval or feedback on your application</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <div className=\"flex items-start gap-3\">\r\n                                                        <div className=\"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center flex-shrink-0 shadow-sm\">\r\n                                                            <CheckCircle size={16} />\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900 dark:text-white\">Application Received</p>\r\n                                                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Your basic details have been submitted</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-start gap-3\">\r\n                                                        <div className={`w-8 h-8 ${application.status === APPLICATION_STATUS.UNDER_REVIEW ? 'bg-orange-500 text-white shadow-sm' : 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400'} rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold`}>2</div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900 dark:text-white\">Agent Review</p>\r\n                                                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Agent is reviewing your suitability</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-start gap-3 opacity-50\">\r\n                                                        <div className=\"w-8 h-8 bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold\">3</div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900 dark:text-white\">Final Decision</p>\r\n                                                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Typically within 3-5 business days</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ) : application.status === APPLICATION_STATUS.APPROVED && (\r\n                                    <div className=\"lg:col-span-2 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-6 border border-green-200 dark:border-green-800\">\r\n                                        <div className=\"flex items-start gap-4\">\r\n                                            <div className=\"w-12 h-12 bg-green-500 text-white rounded-full flex items-center justify-center flex-shrink-0 shadow-md\">\r\n                                                <CheckCircle size={24} />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                                                    Congratulations! Your Application is Approved\r\n                                                </h3>\r\n                                                <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n                                                    The agent has approved your application. Contact them to proceed with the next steps\r\n                                                    {application.listingType === 'rent' ? ' including signing the tenancy agreement and arranging your move-in date.' : ' including contract signing and completion.'}\r\n                                                </p>\r\n                                                <div className=\"flex flex-wrap gap-3\">\r\n                                                    <button\r\n                                                        onClick={() => navigate('/manager/messages')}\r\n                                                        className=\"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 text-green-700 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg font-medium transition-colors shadow-sm\"\r\n                                                    >\r\n                                                        <MessageSquare size={18} />\r\n                                                        <span>Contact Agent</span>\r\n                                                    </button>\r\n\r\n                                                    {application.listingType === 'rent' && (\r\n                                                        <button\r\n                                                            onClick={() => setShowContractModal(true)}\r\n                                                            className=\"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors shadow-sm\"\r\n                                                        >\r\n                                                            <FileText size={18} />\r\n                                                            <span>Draft Contract</span>\r\n                                                        </button>\r\n                                                    )}\r\n\r\n                                                    <button\r\n                                                        onClick={() => setShowCompleteConfirm(true)}\r\n                                                        className=\"inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors shadow-sm\"\r\n                                                    >\r\n                                                        <FileText size={18} />\r\n                                                        <span>Sign & Complete</span>\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Completed Message */}\r\n                                {application.status === APPLICATION_STATUS.COMPLETED && (\r\n                                    <div className=\"lg:col-span-2 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-6 border border-indigo-200 dark:border-indigo-800\">\r\n                                        <div className=\"flex items-start gap-4\">\r\n                                            <div className=\"w-12 h-12 bg-indigo-600 text-white rounded-full flex items-center justify-center flex-shrink-0 shadow-md\">\r\n                                                <Key size={24} />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                                                    Application Process Complete\r\n                                                </h3>\r\n                                                <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n                                                    Congratulations! The entire application process is complete. You have successfully {application.listingType === 'rent' ? 'rented' : 'purchased'} this property.\r\n                                                </p>\r\n                                                <button\r\n                                                    onClick={() => navigate('/manager/dashboard')}\r\n                                                    className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors\"\r\n                                                >\r\n                                                    <Home size={18} />\r\n                                                    <span>Back to Dashboard</span>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Documents Tab */}\r\n                        {activeTab === 'documents' && (\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800\">\r\n                                    <div className=\"flex items-center justify-between mb-6\">\r\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                                            <Shield size={20} className=\"text-orange-500\" />\r\n                                            Required Documents\r\n                                        </h3>\r\n                                        <button className=\"flex items-center gap-2 px-3 py-1.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-lg text-sm font-medium hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors\">\r\n                                            <Upload size={14} />\r\n                                            Upload All\r\n                                        </button>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                        {['Passport or ID Proof', 'Recent Utility Bill', 'Employment Contract', '3 Months Bank Statements'].map((doc, index) => (\r\n                                            <div key={index} className=\"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-orange-200 dark:hover:border-orange-800 transition-all shadow-sm group\">\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${index < 2 ? 'bg-green-100 dark:bg-green-900/30' : 'bg-gray-100 dark:bg-gray-700'\r\n                                                        }`}>\r\n                                                        {index < 2 ? (\r\n                                                            <CheckCircle size={20} className=\"text-green-600 dark:text-green-400\" />\r\n                                                        ) : (\r\n                                                            <FileText size={20} className=\"text-gray-400\" />\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className=\"font-medium text-gray-900 dark:text-white text-sm\">{doc}</p>\r\n                                                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\r\n                                                            {index < 2 ? 'Verified' : 'Pending upload'}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <button className=\"p-2 text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors\">\r\n                                                    {index < 2 ? <FileText size={18} /> : <Upload size={18} />}\r\n                                                </button>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Activity/History Tab */}\r\n                        {activeTab === 'history' && (\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800\">\r\n                                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-8 flex items-center gap-2\">\r\n                                        <History size={20} className=\"text-orange-500\" />\r\n                                        Application Timeline\r\n                                    </h3>\r\n                                    <div className=\"relative ml-4\">\r\n                                        {activityHistory.map((activity, index) => {\r\n                                            const Icon = activity.icon;\r\n                                            const colorClasses = {\r\n                                                blue: 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400',\r\n                                                orange: 'bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400',\r\n                                                green: 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400',\r\n                                                red: 'bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400',\r\n                                                yellow: 'bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400',\r\n                                                gray: 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400',\r\n                                            };\r\n\r\n                                            return (\r\n                                                <div key={activity.id} className=\"relative flex items-start pb-10 last:pb-2\">\r\n                                                    {index < activityHistory.length - 1 && (\r\n                                                        <div className=\"absolute left-5 top-10 w-0.5 h-full bg-gray-200 dark:bg-gray-700 -ml-px\" />\r\n                                                    )}\r\n                                                    <div className={`relative z-10 w-10 h-10 rounded-full flex items-center justify-center shadow-sm ${colorClasses[activity.color]}`}>\r\n                                                        <Icon size={18} />\r\n                                                    </div>\r\n                                                    <div className=\"ml-6 flex-1\">\r\n                                                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1\">\r\n                                                            <h4 className=\"font-semibold text-gray-900 dark:text-white\">\r\n                                                                {activity.title}\r\n                                                            </h4>\r\n                                                            <span className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1\">\r\n                                                                <Clock size={12} />\r\n                                                                {formatDate(activity.date)}\r\n                                                            </span>\r\n                                                        </div>\r\n                                                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2 leading-relaxed\">\r\n                                                            {activity.description}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Withdraw Confirmation Modal */}\r\n            {showWithdrawConfirm && createPortal(\r\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200\">\r\n                        <div className=\"w-14 h-14 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <XCircle size={28} className=\"text-red-600 dark:text-red-400\" />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold text-gray-900 dark:text-white text-center mb-2\">\r\n                            Withdraw Application?\r\n                        </h3>\r\n                        <p className=\"text-gray-600 dark:text-gray-400 text-center mb-6\">\r\n                            This will remove your interest in the property. This action cannot be undone.\r\n                        </p>\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => setShowWithdrawConfirm(false)}\r\n                                className=\"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                            >\r\n                                Keep it\r\n                            </button>\r\n                            <button\r\n                                onClick={handleWithdraw}\r\n                                className=\"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-sm\"\r\n                            >\r\n                                Confirm Withdraw\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>,\r\n                document.body\r\n            )}\r\n\r\n            {/* Complete Confirmation Modal */}\r\n            {showCompleteConfirm && createPortal(\r\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200\">\r\n                        <div className=\"w-14 h-14 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <Key size={28} className=\"text-green-600 dark:text-green-400\" />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold text-gray-900 dark:text-white text-center mb-2\">\r\n                            Finalize Handover?\r\n                        </h3>\r\n                        <p className=\"text-gray-600 dark:text-gray-400 text-center mb-6\">\r\n                            By confirming, you acknowledge that you have received the keys and the process is now complete.\r\n                        </p>\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => setShowCompleteConfirm(false)}\r\n                                className=\"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={handleComplete}\r\n                                className=\"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors shadow-sm\"\r\n                            >\r\n                                Complete Now\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>,\r\n                document.body\r\n            )}\r\n\r\n            {/* Contract Creation Modal */}\r\n            {showContractModal && (\r\n                <CreateContractModal\r\n                    applicationId={application.id}\r\n                    propertyPrice={application.propertyPrice || 0}\r\n                    onClose={() => setShowContractModal(false)}\r\n                    onSuccess={() => {\r\n                        // Ideally trigger a refresh\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ApplicationDetail;\r\n","import React, { useState } from 'react';\r\nimport { Search, Filter, X } from 'lucide-react';\r\nimport { APPLICATION_STATUS } from '../../../contexts/ApplicationsContext';\r\n\r\ninterface ApplicationFiltersProps {\r\n    searchQuery: string;\r\n    setSearchQuery: (query: string) => void;\r\n    statusFilter: string;\r\n    setStatusFilter: (status: string) => void;\r\n    propertyTypeFilter: string;\r\n    setPropertyTypeFilter: (type: string) => void;\r\n    dateRangeFilter: { start: string | null; end: string | null };\r\n    setDateRangeFilter: (range: { start: string | null; end: string | null }) => void;\r\n    showFilters?: boolean;\r\n    setShowFilters?: (show: boolean) => void;\r\n    hideToggleButton?: boolean;\r\n}\r\n\r\nconst ApplicationFilters: React.FC<ApplicationFiltersProps> = ({\r\n    searchQuery,\r\n    setSearchQuery,\r\n    statusFilter,\r\n    setStatusFilter,\r\n    propertyTypeFilter,\r\n    setPropertyTypeFilter,\r\n    dateRangeFilter,\r\n    setDateRangeFilter,\r\n    showFilters: externalShowFilters,\r\n    setShowFilters: externalSetShowFilters,\r\n    hideToggleButton = false,\r\n}) => {\r\n    const [internalShowFilters, setInternalShowFilters] = useState(false);\r\n\r\n    // Use external state if provided, otherwise use internal state\r\n    const showFilters = externalShowFilters !== undefined ? externalShowFilters : internalShowFilters;\r\n    const setShowFilters = externalSetShowFilters || setInternalShowFilters;\r\n\r\n    const statusOptions = [\r\n        { value: 'all', label: 'All Statuses' },\r\n        { value: APPLICATION_STATUS.DRAFT, label: 'Draft' },\r\n        { value: APPLICATION_STATUS.SUBMITTED, label: 'Submitted' },\r\n        { value: APPLICATION_STATUS.UNDER_REVIEW, label: 'Under Review' },\r\n        { value: APPLICATION_STATUS.DOCUMENTS_REQUESTED, label: 'Documents Requested' },\r\n        { value: APPLICATION_STATUS.APPROVED, label: 'Approved' },\r\n        { value: APPLICATION_STATUS.REJECTED, label: 'Rejected' },\r\n        { value: APPLICATION_STATUS.WITHDRAWN, label: 'Withdrawn' },\r\n    ];\r\n\r\n    const propertyTypeOptions = [\r\n        { value: 'all', label: 'All Types' },\r\n        { value: 'apartment', label: 'Apartment' },\r\n        { value: 'condo', label: 'Condo' },\r\n        { value: 'house', label: 'House' },\r\n        { value: 'townhouse', label: 'Townhouse' },\r\n    ];\r\n\r\n    const hasActiveFilters =\r\n        statusFilter !== 'all' ||\r\n        propertyTypeFilter !== 'all' ||\r\n        dateRangeFilter.start !== null ||\r\n        dateRangeFilter.end !== null;\r\n\r\n    const clearFilters = () => {\r\n        setStatusFilter('all');\r\n        setPropertyTypeFilter('all');\r\n        setDateRangeFilter({ start: null, end: null });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4 font-outfit\">\r\n            {/* Search Bar */}\r\n            <div className=\"relative\">\r\n                <Search\r\n                    size={20}\r\n                    className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search by property name, location, or application ID...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white transition-all shadow-sm\"\r\n                />\r\n            </div>\r\n\r\n            {/* Filter Toggle - only show if not hidden */}\r\n            {!hideToggleButton && (\r\n                <div className=\"flex items-center justify-between\">\r\n                    <button\r\n                        onClick={() => setShowFilters(!showFilters)}\r\n                        className=\"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                    >\r\n                        <Filter size={16} />\r\n                        <span>Filters</span>\r\n                        {hasActiveFilters && (\r\n                            <span className=\"ml-1 px-2 py-0.5 bg-orange-500 text-white text-xs rounded-full\">\r\n                                Active\r\n                            </span>\r\n                        )}\r\n                    </button>\r\n                    {hasActiveFilters && (\r\n                        <button\r\n                            onClick={clearFilters}\r\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors\"\r\n                        >\r\n                            <X size={16} />\r\n                            <span>Clear Filters</span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Clear filters button when toggle is hidden but filters are active */}\r\n            {hideToggleButton && hasActiveFilters && (\r\n                <div className=\"flex justify-end\">\r\n                    <button\r\n                        onClick={clearFilters}\r\n                        className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors\"\r\n                    >\r\n                        <X size={16} />\r\n                        <span>Clear Filters</span>\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Filter Panel */}\r\n            {showFilters && (\r\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4 shadow-sm animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                        {/* Status Filter */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                Status\r\n                            </label>\r\n                            <select\r\n                                value={statusFilter}\r\n                                onChange={(e) => setStatusFilter(e.target.value)}\r\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white\"\r\n                            >\r\n                                {statusOptions.map((option) => (\r\n                                    <option key={option.value} value={option.value}>\r\n                                        {option.label}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Property Type Filter */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                Property Type\r\n                            </label>\r\n                            <select\r\n                                value={propertyTypeFilter}\r\n                                onChange={(e) => setPropertyTypeFilter(e.target.value)}\r\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white\"\r\n                            >\r\n                                {propertyTypeOptions.map((option) => (\r\n                                    <option key={option.value} value={option.value}>\r\n                                        {option.label}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Date Range Filter */}\r\n                        <div className=\"md:col-span-2 lg:col-span-1\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                                Date Range\r\n                            </label>\r\n                            <div className=\"grid grid-cols-2 gap-3\">\r\n                                <div>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={dateRangeFilter.start || ''}\r\n                                        onChange={(e) =>\r\n                                            setDateRangeFilter({ ...dateRangeFilter, start: e.target.value || null })\r\n                                        }\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={dateRangeFilter.end || ''}\r\n                                        onChange={(e) =>\r\n                                            setDateRangeFilter({ ...dateRangeFilter, end: e.target.value || null })\r\n                                        }\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ApplicationFilters;\r\n","\"use client\";\r\n\r\nimport React, { useState, Suspense, useEffect, useMemo } from 'react';\r\nimport {\r\n    FileText, Clock, CheckCircle, XCircle, FileCheck, Plus, Filter,\r\n    Search, Eye, Edit, Trash2, Mail, Phone, Download, Share2,\r\n    FileDown, FileSpreadsheet, Loader2, MoreVertical, ChevronRight,\r\n    ArrowUpRight, TrendingUp, Users, Calendar, AlertCircle\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport * as applicationsService from '@/services/applicationsService';\r\nimport { useApplications, APPLICATION_STATUS, ApplicationsProvider } from '@/contexts/ApplicationsContext';\r\nimport ApplicationCard from '@/components/manager/applications/ApplicationCard';\r\nimport ApplicationDetail from '@/components/manager/applications/ApplicationDetail';\r\nimport ApplicationFilters from '@/components/manager/applications/ApplicationFilters';\r\n\r\ninterface ApplicationsContentProps {\r\n    initialView?: 'list' | 'detail';\r\n}\r\n\r\nfunction ApplicationsContent({ initialView = 'list' }: ApplicationsContentProps) {\r\n    const { user } = useAuth();\r\n    const toast = useToast();\r\n    const {\r\n        allApplications,\r\n        isLoading: contextLoading,\r\n        searchQuery,\r\n        setSearchQuery,\r\n        statusFilter,\r\n        setStatusFilter,\r\n        propertyTypeFilter,\r\n        setPropertyTypeFilter,\r\n        dateRangeFilter,\r\n        setDateRangeFilter,\r\n        updateApplicationStatus\r\n    } = useApplications();\r\n\r\n    const [view, setView] = useState<'list' | 'detail'>(initialView);\r\n    const [selectedId, setSelectedId] = useState<string | null>(null);\r\n    const [showFilters, setShowFilters] = useState(false);\r\n\r\n    // Filtered applications are already provided by context\r\n    const applications = allApplications;\r\n\r\n    const stats = useMemo(() => {\r\n        const total = applications.length;\r\n        const pending = applications.filter((a: any) => a.status === APPLICATION_STATUS.PENDING || a.status === APPLICATION_STATUS.SUBMITTED).length;\r\n        const actionRequired = applications.filter((a: any) => a.requiresAction).length;\r\n        const approved = applications.filter((a: any) => a.status === APPLICATION_STATUS.APPROVED).length;\r\n\r\n        return [\r\n            { label: 'Total Active', value: total.toString(), icon: FileText, color: 'text-blue-600', bg: 'bg-blue-50 dark:bg-blue-900/20' },\r\n            { label: 'Pending Review', value: pending.toString(), icon: Clock, color: 'text-orange-600', bg: 'bg-orange-50 dark:bg-orange-900/20' },\r\n            { label: 'Action Required', value: actionRequired.toString(), icon: AlertCircle, color: 'text-red-600', bg: 'bg-red-50 dark:bg-red-900/20' },\r\n            { label: 'Completed', value: approved.toString(), icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50 dark:bg-green-900/20' },\r\n        ];\r\n    }, [applications]);\r\n\r\n    const handleCardClick = (id: string) => {\r\n        setSelectedId(id);\r\n        setView('detail');\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n\r\n    const handleCloseDetail = () => {\r\n        setView('list');\r\n        setSelectedId(null);\r\n    };\r\n\r\n    const handleUpdateStatus = async (id: string, status: any) => {\r\n        try {\r\n            await updateApplicationStatus(id, status);\r\n            toast.success(`Application status updated to ${status.replace(/_/g, ' ')}`);\r\n        } catch (err) {\r\n            toast.error('Failed to update status');\r\n        }\r\n    };\r\n\r\n    if (view === 'detail' && selectedId) {\r\n        return (\r\n            <ApplicationDetail\r\n                applicationId={selectedId}\r\n                onClose={handleCloseDetail}\r\n                onUpdateStatus={handleUpdateStatus}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 font-outfit animate-in fade-in duration-500\">\r\n            {/* Header Section */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                        Applications\r\n                    </h1>\r\n                    <p className=\"text-gray-500 dark:text-gray-400 font-medium\">\r\n                        Track and manage your property applications\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <button className=\"px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-semibold text-sm flex items-center gap-2 transition-all shadow-md active:scale-95\">\r\n                        <Plus size={18} /> New Application\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {stats.map((stat) => (\r\n                    <div key={stat.label} className=\"bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm\">\r\n                        <div className=\"flex justify-between items-start mb-3\">\r\n                            <div className={`p-2.5 rounded-xl ${stat.bg} ${stat.color}`}>\r\n                                <stat.icon size={20} />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1\">{stat.label}</p>\r\n                        <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stat.value}</h3>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <ApplicationFilters\r\n                searchQuery={searchQuery}\r\n                setSearchQuery={setSearchQuery}\r\n                statusFilter={statusFilter}\r\n                setStatusFilter={setStatusFilter}\r\n                propertyTypeFilter={propertyTypeFilter}\r\n                setPropertyTypeFilter={setPropertyTypeFilter}\r\n                dateRangeFilter={dateRangeFilter}\r\n                setDateRangeFilter={setDateRangeFilter}\r\n                showFilters={showFilters}\r\n                setShowFilters={setShowFilters}\r\n            />\r\n\r\n            {/* Applications List */}\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\r\n                {contextLoading ? (\r\n                    Array.from({ length: 4 }).map((_, i) => (\r\n                        <div key={i} className=\"h-[200px] bg-gray-100 dark:bg-gray-800 animate-pulse rounded-2xl border border-gray-200 dark:border-gray-700\" />\r\n                    ))\r\n                ) : applications.length > 0 ? (\r\n                    applications.map((app) => (\r\n                        <ApplicationCard\r\n                            key={app.id}\r\n                            application={app}\r\n                            onClick={() => handleCardClick(app.id)}\r\n                        />\r\n                    ))\r\n                ) : (\r\n                    <div className=\"col-span-full py-20 bg-white dark:bg-gray-800 rounded-3xl border border-dashed border-gray-300 dark:border-gray-700 flex flex-col items-center justify-center text-center px-6\">\r\n                        <div className=\"w-20 h-20 bg-gray-50 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4\">\r\n                            <FileText size={40} className=\"text-gray-300\" />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">No applications found</h3>\r\n                        <p className=\"text-gray-500 dark:text-gray-400 max-w-sm\">\r\n                            {searchQuery || statusFilter !== 'all'\r\n                                ? \"No applications match your current filters. Try adjusting them to see more results.\"\r\n                                : \"You haven't submitted any applications yet. When you do, they'll appear here.\"}\r\n                        </p>\r\n                        {(searchQuery || statusFilter !== 'all' || propertyTypeFilter !== 'all') && (\r\n                            <button\r\n                                onClick={() => {\r\n                                    setSearchQuery('');\r\n                                    setStatusFilter('all');\r\n                                    setPropertyTypeFilter('all');\r\n                                    setDateRangeFilter({ start: null, end: null });\r\n                                }}\r\n                                className=\"mt-6 text-orange-500 font-bold hover:underline\"\r\n                            >\r\n                                Clear all filters\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function ManagerApplicationsPage() {\r\n    return (\r\n        <ApplicationsProvider>\r\n            <Suspense fallback={<div className=\"h-48 flex items-center justify-center font-bold\">Loading Applications...</div>}>\r\n                <ApplicationsContent />\r\n            </Suspense>\r\n        </ApplicationsProvider>\r\n    );\r\n}\r\n"],"names":["ApplicationCard","application","onClick","navigate","useNavigate","getStatusConfig","status","APPLICATION_STATUS","Edit","Clock","FileText","Calendar","CheckCircle","Upload","TrendingUp","XCircle","c","getPrimaryAction","formatDate","dateString","formatRelativeTime","date","diff","days","hours","minutes","isDeadlineWarning","deadline","now","threeDaysFromNow","statusConfig","primaryAction","handleMessageAgent","e","getProgressPercentage","formatAppointment","time","type","_a","Building2","Home","jsx","jsxs","AlertCircle","MapPin","ChevronRight","User","MessageSquare","StatusTracker","listingType","stages","baseStages","Search","UserCheck","FileCheck","Key","currentStageIndex","getStatusColor","getStatusLabel","stage","index","Icon","isCompleted","isCurrent","isRejected","CreateContractModal","applicationId","propertyPrice","onClose","onSuccess","toastSuccess","toastError","useToast","isLoading","setIsLoading","useState","formData","setFormData","handleSubmit","data","error","createContract","createPortal","X","DollarSign","Fragment","ApplicationDetail","initialApplication","onUpdateStatus","allApplications","withdrawApplication","useApplications","showWithdrawConfirm","setShowWithdrawConfirm","showCompleteConfirm","setShowCompleteConfirm","showContractModal","setShowContractModal","activeTab","setActiveTab","app","canWithdraw","formatPrice","price","handleWithdraw","handleComplete","activityHistory","history","submittedTime","a","b","tabs","History","ArrowLeft","ExternalLink","tab","_b","Mail","Phone","Briefcase","_c","l","Shield","doc","activity","colorClasses","ApplicationFilters","searchQuery","setSearchQuery","statusFilter","setStatusFilter","propertyTypeFilter","setPropertyTypeFilter","dateRangeFilter","setDateRangeFilter","externalShowFilters","externalSetShowFilters","hideToggleButton","internalShowFilters","setInternalShowFilters","showFilters","setShowFilters","statusOptions","propertyTypeOptions","hasActiveFilters","clearFilters","Filter","option","ApplicationsContent","initialView","user","useAuth","toast","contextLoading","updateApplicationStatus","view","setView","selectedId","setSelectedId","applications","stats","useMemo","total","pending","actionRequired","approved","handleCardClick","id","handleCloseDetail","handleUpdateStatus","Plus","stat","_","i","ManagerApplicationsPage","ApplicationsProvider","Suspense"],"mappings":"42BA2BA,MAAMA,GAAkD,CAAC,CAAE,YAAAC,EAAa,QAAAC,KAAc,OAClF,MAAMC,EAAWC,EAAA,EAEXC,EAAmBC,GAAmB,CACxC,OAAQA,EAAA,CACJ,KAAKC,EAAmB,MACpB,MAAO,CACH,MAAO,QACP,MAAO,gEACP,SAAU,cACV,KAAMC,EAAA,EAEd,KAAKD,EAAmB,QACpB,MAAO,CACH,MAAO,iBACP,MAAO,0EACP,SAAU,gBACV,KAAME,CAAA,EAEd,KAAKF,EAAmB,UACpB,MAAO,CACH,MAAO,YACP,MAAO,kEACP,SAAU,cACV,KAAMG,CAAA,EAEd,KAAKH,EAAmB,mBACpB,MAAO,CACH,MAAO,qBACP,MAAO,0EACP,SAAU,gBACV,KAAMI,CAAA,EAEd,KAAKJ,EAAmB,kBACpB,MAAO,CACH,MAAO,oBACP,MAAO,0EACP,SAAU,gBACV,KAAMI,CAAA,EAEd,KAAKJ,EAAmB,kBACpB,MAAO,CACH,MAAO,oBACP,MAAO,kEACP,SAAU,cACV,KAAMK,CAAA,EAEd,KAAKL,EAAmB,aACpB,MAAO,CACH,MAAO,eACP,MAAO,sEACP,SAAU,eACV,KAAME,CAAA,EAEd,KAAKF,EAAmB,oBACpB,MAAO,CACH,MAAO,sBACP,MAAO,0EACP,SAAU,gBACV,KAAMM,CAAA,EAEd,KAAKN,EAAmB,yBACpB,MAAO,CACH,MAAO,2BACP,MAAO,kEACP,SAAU,cACV,KAAMO,EAAA,EAEd,KAAKP,EAAmB,SACpB,MAAO,CACH,MAAO,WACP,MAAO,8EACP,SAAU,iBACV,KAAMK,CAAA,EAEd,KAAKL,EAAmB,SACpB,MAAO,CACH,MAAO,WACP,MAAO,8DACP,SAAU,aACV,KAAMQ,CAAA,EAEd,KAAKR,EAAmB,UACpB,MAAO,CACH,MAAO,YACP,MAAO,gEACP,SAAU,cACV,KAAMQ,CAAA,EAEd,KAAKR,EAAmB,UACpB,MAAO,CACH,MAAO,YACP,MAAO,sEACP,SAAU,eACV,KAAMK,CAAA,EAEd,QACI,MAAO,CACH,OAAON,GAAA,YAAAA,EAAQ,QAAQ,KAAM,KAAK,QAAQ,QAASU,GAAKA,EAAE,YAAA,KAAkB,UAC5E,MAAO,gEACP,SAAU,cACV,KAAMN,CAAA,CACV,CAEZ,EAEMO,EAAmB,IAAM,CAC3B,OAAQhB,EAAY,OAAA,CAChB,KAAKM,EAAmB,MACpB,MAAO,CAAE,MAAO,WAAY,OAAQ,MAAA,EACxC,KAAKA,EAAmB,oBACpB,MAAO,CAAE,MAAO,SAAU,OAAQ,QAAA,EACtC,KAAKA,EAAmB,aACpB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAA,EACpC,QACI,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAA,CAAO,CAEnD,EAEMW,EAAcC,GACXA,EACQ,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAS,CAAE,IAAK,UAAW,MAAO,QAAS,KAAM,UAAW,EAFnE,MAKtBC,EAAsBD,GAAwB,CAChD,GAAI,CAACA,EAAY,MAAO,MACxB,MAAME,EAAO,IAAI,KAAKF,CAAU,EAE1BG,MADU,KAAA,EACC,QAAA,EAAYD,EAAK,QAAA,EAC5BE,EAAO,KAAK,MAAMD,GAAQ,IAAO,GAAK,GAAK,GAAG,EAC9CE,EAAQ,KAAK,MAAMF,GAAQ,IAAO,GAAK,GAAG,EAC1CG,EAAU,KAAK,MAAMH,GAAQ,IAAO,GAAG,EAE7C,OAAIG,EAAU,GAAW,GAAGA,CAAO,QAC/BD,EAAQ,GAAW,GAAGA,CAAK,QAC3BD,IAAS,EAAU,YACnBA,EAAO,EAAU,GAAGA,CAAI,YACrBL,EAAWC,CAAU,CAChC,EAEMO,EAAoB,IAAM,CAC5B,GAAI,CAACzB,EAAY,SAAU,MAAO,GAClC,MAAM0B,EAAW,IAAI,KAAK1B,EAAY,QAAQ,EACxC2B,MAAU,KACVC,EAAmB,IAAI,KAAKD,EAAI,QAAA,EAAY,KAAc,GAAK,GAAI,EACzE,OAAOD,GAAYE,GAAoBF,EAAWC,CACtD,EAEME,EAAezB,EAAgBJ,EAAY,MAAM,EACjD8B,EAAgBd,EAAA,EAEhBe,EAAsBC,GAAwB,CAChDA,EAAE,gBAAA,EACF9B,EAAS,mBAAmB,CAChC,EAGM+B,EAAwB,IAAM,CAChC,OAAQjC,EAAY,OAAA,CAChB,KAAKM,EAAmB,MAAO,MAAO,IACtC,KAAKA,EAAmB,QACxB,KAAKA,EAAmB,UAAW,MAAO,IAC1C,KAAKA,EAAmB,mBACxB,KAAKA,EAAmB,kBAAmB,MAAO,IAClD,KAAKA,EAAmB,kBAAmB,MAAO,IAClD,KAAKA,EAAmB,aAAc,MAAO,IAC7C,KAAKA,EAAmB,oBAAqB,MAAO,IACpD,KAAKA,EAAmB,yBAA0B,MAAO,IACzD,KAAKA,EAAmB,SACxB,KAAKA,EAAmB,UAAW,MAAO,KAC1C,KAAKA,EAAmB,SACxB,KAAKA,EAAmB,UAAW,MAAO,GAC1C,QAAS,MAAO,GAAA,CAExB,EAEM4B,EAAoB,IAAM,CAC5B,GAAI,CAAClC,EAAY,YAAa,OAAO,KACrC,KAAM,CAAE,KAAAoB,EAAM,KAAAe,CAAA,EAASnC,EAAY,YACnC,OAAKoB,EAQE,GANiB,IAAI,KAAKA,CAAI,EACC,mBAAmB,QAAS,CAC9D,QAAS,QACT,IAAK,UACL,MAAO,OAAA,CACV,CACsB,GAAGe,EAAO,OAAOA,CAAI,GAAK,EAAE,GARjC,IAStB,EAQyB,OANG,IAAM,OAC9B,MAAMC,GAAOC,EAAArC,EAAY,eAAZ,YAAAqC,EAA0B,cACvC,OAAID,IAAS,aAAeA,IAAS,OAAeE,EAC7CC,CACX,GAEyB,EAGrBC,EAAAA,IAAC,MAAA,CACG,QAAAvC,EACA,UAAW,gIAAgID,EAAY,eAC7I,0FACA,2FACN,GAEJ,SAAAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,mBAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CACG,IAAKxC,EAAY,cACjB,IAAKA,EAAY,cACjB,UAAU,2CACV,QAAUgC,GAAM,CACXA,EAAE,OAA4B,IAAM,oEACzC,CAAA,CAAA,EAGJQ,EAAAA,IAAC,MAAA,CAAI,UAAU,wBACX,SAAAC,EAAAA,KAAC,QAAK,UAAW,iFAAiFZ,EAAa,KAAK,oBAChH,SAAA,CAAAW,MAAC,OAAA,CAAK,UAAW,4BAA4BX,EAAa,QAAQ,GAAI,EACrEA,EAAa,KAAA,CAAA,CAClB,CAAA,CACJ,EAEC7B,EAAY,gBACTwC,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACX,SAAAC,EAAAA,KAAC,OAAA,CAAK,UAAU,wGACZ,SAAA,CAAAD,EAAAA,IAACE,EAAA,CAAY,KAAM,EAAA,CAAI,EAAE,QAAA,CAAA,CAE7B,CAAA,CACJ,CAAA,EAER,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0DAEX,SAAA,CAAAA,OAAC,MAAA,CAEG,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,UACX,SAAA,CAAAD,MAAC,KAAA,CAAG,UAAU,2JACT,SAAAxC,EAAY,eAAiB,oBAClC,EACAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,4EACX,SAAA,CAAAD,EAAAA,IAACG,EAAA,CAAO,KAAM,GAAI,UAAU,gBAAgB,QAC3C,OAAA,CAAK,UAAU,WAAY,SAAA3C,EAAY,iBAAmB,uBAAA,CAAwB,CAAA,CAAA,CACvF,CAAA,EACJ,EACAwC,EAAAA,IAACI,EAAA,CAAa,KAAM,GAAI,UAAU,mGAAA,CAAoG,CAAA,EAC1I,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACX,SAAA,CAAAD,EAAAA,IAACK,EAAA,CAAK,KAAM,GAAI,UAAU,8BAA8B,EACxDL,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAY,WAAY,SAAA,CAAU,CAAA,EACtD,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACX,SAAA,CAAAD,EAAAA,IAAChC,EAAA,CAAM,KAAM,GAAI,UAAU,8BAA8B,EACzDgC,EAAAA,IAAC,QAAK,UAAU,WAAY,WAAmBxC,EAAY,aAAeA,EAAY,SAAS,CAAA,CAAE,CAAA,EACrG,EACAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACX,SAAA,CAAAD,EAAAA,IAAC/B,EAAA,CAAS,KAAM,GAAI,UAAU,8BAA8B,EAC5D+B,EAAAA,IAAC,OAAA,CAAK,UAAU,6BAA8B,WAAY,WAAA,CAAY,CAAA,CAAA,CAC1E,CAAA,EACJ,EAGCxC,EAAY,gBAAkBkC,KAC3BO,EAAAA,KAAC,MAAA,CAAI,UAAU,8IACX,SAAA,CAAAD,EAAAA,IAAC9B,EAAA,CAAS,KAAM,GAAI,UAAU,uCAAuC,EACrE+B,EAAAA,KAAC,OAAA,CAAK,UAAU,2DAA2D,SAAA,CAAA,gBACzDP,EAAA,CAAkB,CAAA,CACpC,CAAA,EACJ,EAIHlC,EAAY,SAAWM,EAAmB,UACvCN,EAAY,SAAWM,EAAmB,WACtCmC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,WAAQ,EACnEC,EAAAA,KAAC,OAAA,CAAK,UAAU,2DACX,SAAA,CAAAR,EAAA,EAAwB,GAAA,CAAA,CAC7B,CAAA,EACJ,EACAO,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACX,SAAAA,EAAAA,IAAC,MAAA,CACG,UAAW,mDAAmDxC,EAAY,SAAWM,EAAmB,SAC9F,eACA,gDACN,GACJ,MAAO,CAAE,MAAO,GAAG2B,EAAA,CAAuB,GAAA,CAAI,CAAA,CAClD,CACJ,CAAA,EACJ,EAIPR,EAAA,GACGgB,EAAAA,KAAC,MAAA,CAAI,UAAU,wIACX,SAAA,CAAAD,EAAAA,IAAChC,EAAA,CAAM,KAAM,GAAI,UAAU,eAAe,EAC1CiC,EAAAA,KAAC,OAAA,CAAK,UAAU,qDAAqD,SAAA,CAAA,QAC3DxB,EAAWjB,EAAY,QAAQ,CAAA,CAAA,CACzC,CAAA,CAAA,CACJ,CAAA,EAER,EAGAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,4FAEX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,kDAAkD,SAAA,CAAA,KAC5DJ,EAAArC,EAAY,gBAAZ,YAAAqC,EAA2B,gBAAe,EAChD,EACAG,EAAAA,IAAC,QAAK,UAAU,gDACX,WAAY,eAAiB,OAAS,SAAW,EAAA,CACtD,CAAA,EACJ,EAGAC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACX,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACG,QAAST,EACT,UAAU,sHACV,MAAM,gBAEN,SAAAS,EAAAA,IAACM,EAAA,CAAc,KAAM,EAAA,CAAI,CAAA,CAAA,EAE7BL,EAAAA,KAAC,SAAA,CACG,QAAUT,GAAM,CACZA,EAAE,gBAAA,EACF/B,EAAA,CACJ,EACA,UAAU,2JAET,SAAA,CAAA6B,EAAc,MACfU,EAAAA,IAACI,EAAA,CAAa,KAAM,EAAA,CAAI,CAAA,CAAA,CAAA,CAC5B,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CAGZ,EC5VMG,GAA8C,CAAC,CAAE,OAAA1C,EAAQ,YAAA2C,EAAc,UAAa,CAgEtF,MAAMC,GA9DY,IAAe,CAC7B,MAAMC,EAAsB,CACxB,CACI,GAAI,YACJ,MAAO,wBACP,YAAa,qCACb,KAAMzC,EACN,SAAU,CAACH,EAAmB,QAASA,EAAmB,SAAS,CAAA,EAEvE,CACI,GAAI,eACJ,MAAO,eACP,YAAa,sCACb,KAAM6C,EACN,SAAU,CAAC7C,EAAmB,YAAY,CAAA,EAE9C,CACI,GAAI,eACJ,MAAO0C,IAAgB,OAAS,sBAAwB,qBACxD,YAAaA,IAAgB,OACvB,wCACA,qCACN,KAAMI,GACN,SAAU,CAAC9C,EAAmB,mBAAmB,CAAA,EAErD,CACI,GAAI,YACJ,MAAO,kBACP,YAAa,8BACb,KAAM+C,GACN,SAAU,CAAA,CAAC,EAEf,CACI,GAAI,WACJ,MAAO,iBACP,YAAahD,IAAWC,EAAmB,UAAYD,IAAWC,EAAmB,UAC/E,gDACAD,IAAWC,EAAmB,SAC1B,+BACA,0BACV,KAAOD,IAAWC,EAAmB,UAAYD,IAAWC,EAAmB,UAAaK,EACxFN,IAAWC,EAAmB,SAAWQ,EAAUN,EACvD,SAAU,CAACF,EAAmB,SAAUA,EAAmB,SAAUA,EAAmB,SAAS,CAAA,CACrG,EAIJ,OAAID,IAAWC,EAAmB,UAAYD,IAAWC,EAAmB,YACxE4C,EAAW,KAAK,CACZ,GAAI,aACJ,MAAOF,IAAgB,OAAS,gBAAkB,eAClD,YAAa3C,IAAWC,EAAmB,UACpC0C,IAAgB,OAAS,4BAA8B,+BACvDA,IAAgB,OAAS,gCAAkC,8BAClE,KAAMA,IAAgB,OAASM,EAAMf,EACrC,SAAU,CAACjC,EAAmB,SAAS,CAAA,CAC1C,EAGE4C,CACX,GAEe,EAaTK,EATElD,IAAWC,EAAmB,UAAkB,GAChDD,IAAWC,EAAmB,SAAiB2C,EAAO,OAAS,EAC/D5C,IAAWC,EAAmB,WAC9BD,IAAWC,EAAmB,SAAiB2C,EAAO,OAAS,EAC/D5C,IAAWC,EAAmB,oBAA4B,EAC1DD,IAAWC,EAAmB,aAAqB,EAChD,EAMLkD,EAAiB,IAAM,CACzB,OAAQnD,EAAA,CACJ,KAAKC,EAAmB,SACpB,MAAO,+CACX,KAAKA,EAAmB,SACpB,MAAO,yCACX,KAAKA,EAAmB,UACpB,MAAO,4CACX,KAAKA,EAAmB,oBACpB,MAAO,kDACX,QACI,MAAO,2CAAA,CAEnB,EAGMmD,EAAiB,IAAM,CACzB,OAAQpD,EAAA,CACJ,KAAKC,EAAmB,QACxB,KAAKA,EAAmB,UACpB,MAAO,YACX,KAAKA,EAAmB,aACpB,MAAO,eACX,KAAKA,EAAmB,oBACpB,MAAO,mBACX,KAAKA,EAAmB,SACpB,MAAO,WACX,KAAKA,EAAmB,SACpB,MAAO,eACX,KAAKA,EAAmB,UACpB,MAAO,YACX,QACI,MAAO,YAAA,CAEnB,EAEA,OAAID,IAAWC,EAAmB,gBAEzB,MAAA,CAAI,UAAU,0FACX,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,uFACX,eAAC1B,EAAA,CAAQ,UAAU,wBAAwB,CAAA,CAC/C,SACC,MAAA,CACG,SAAA,CAAA0B,EAAAA,IAAC,KAAA,CAAG,UAAU,sDAAsD,SAAA,wBAEpE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,qCAAA,CAEhD,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EAKJC,EAAAA,KAAC,MAAA,CAAI,UAAU,oGAEX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,2DACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,uBAAoB,QACpE,IAAA,CAAE,UAAU,+BACR,SAAAQ,IAAgB,OAAS,qBAAuB,sBAAA,CACrD,CAAA,EACJ,EACAR,MAAC,OAAI,UAAW,qDAAqDgB,GAAgB,GAChF,YAAe,CACpB,CAAA,CAAA,CACJ,CAAA,CACJ,EAGAhB,EAAAA,IAAC,MAAA,CAAI,UAAU,MACX,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,WACV,SAAAS,EAAO,IAAI,CAACS,EAAOC,IAAU,CAC1B,MAAMC,EAAOF,EAAM,KACbG,EAAcF,EAAQJ,EACtBO,EAAYH,IAAUJ,EAEtBQ,EAAa1D,IAAWC,EAAmB,UAAYqD,IAAUJ,EAEvE,OACId,EAAAA,KAAC,MAAA,CAAmB,UAAU,2CAEzB,SAAA,CAAAkB,EAAQV,EAAO,OAAS,GACrBT,EAAAA,IAAC,MAAA,CACG,UAAW,8CAA8CqB,EAAc,eACnEC,GAAa,CAACC,EAAa,gBACvB,8BACJ,EAAA,CAAA,EAKZvB,EAAAA,IAAC,MAAA,CAAI,UAAW,8GAA8GqB,EACxH,2CACAC,GAAa,CAACC,EACV,2DACAA,EACI,uCACA,8EACV,GACC,SAAAF,EACGrB,EAAAA,IAAC7B,EAAA,CAAY,UAAU,SAAA,CAAU,EACjCoD,EACAvB,EAAAA,IAAC1B,EAAA,CAAQ,UAAU,SAAA,CAAU,EAE7B0B,EAAAA,IAACoB,EAAA,CAAK,UAAU,UAAU,EAElC,EAGAnB,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACX,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAW,iBAAiBqB,GAAeC,EACzC,gCACA,kCACF,GACC,SAAAJ,EAAM,KAAA,CACX,EACCI,GAAa,CAACC,GACXtB,EAAAA,KAAC,OAAA,CAAK,UAAU,uJACZ,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,sDAAA,CAAuD,EAAE,SAAA,CAAA,CAE7E,CAAA,EAER,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAW,gBAAgBqB,GAAeC,EACvC,mCACA,kCACF,GACC,SAAAJ,EAAM,WAAA,CACX,EAGCI,GAAazD,IAAWC,EAAmB,qBACxCmC,EAAAA,KAAC,MAAA,CAAI,UAAU,yGACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACX,SAAA,CAAAD,EAAAA,IAACE,EAAA,CAAY,KAAM,EAAA,CAAI,EACvBF,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,iBAAA,CAAe,CAAA,EACzD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAoD,SAAA,kDAAA,CAEjE,CAAA,CAAA,CACJ,CAAA,CAAA,CAER,CAAA,CAAA,EAhEMkB,EAAM,EAiEhB,CAER,CAAC,EACL,EACJ,EAGCrD,IAAWC,EAAmB,UAAYD,IAAWC,EAAmB,UACrEkC,EAAAA,IAAC,MAAA,CAAI,UAAU,qGACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACX,SAAA,CAAAD,EAAAA,IAAChC,EAAA,CAAM,KAAM,EAAA,CAAI,SAChB,OAAA,CAAK,SAAA,CAAA,8BAA2BgC,EAAAA,IAAC,UAAO,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAAS,CAAA,CAAA,CACvE,CAAA,CACJ,CAAA,EAER,CAER,ECtQA,SAAwBwB,GAAoB,CAAE,cAAAC,EAAe,cAAAC,EAAe,QAAAC,EAAS,UAAAC,GAAuC,CACxH,KAAM,CAAE,QAASC,EAAc,MAAOC,CAAA,EAAeC,GAAA,EAC/C,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,EAAK,EAC1C,CAACC,EAAUC,CAAW,EAAIF,WAAgC,CAC5D,eAAgBT,EAChB,WAAY,GACZ,SAAU,GACV,aAAcC,GAAiB,EAC/B,gBAAiBA,GAAiB,GAAK,IACvC,qBAAsB,2DAAA,CACzB,EAEKW,EAAe,MAAO7C,GAAuB,CAC/CA,EAAE,eAAA,EACFyC,EAAa,EAAI,EAEjB,KAAM,CAAE,KAAAK,EAAM,MAAAC,CAAA,EAAU,MAAMC,GAAeL,CAAQ,EAErD,GAAII,EAAO,CACPT,EAAWS,CAAK,EAChBN,EAAa,EAAK,EAClB,MACJ,CAEAJ,EAAa,+BAA+B,EAC5CD,EAAA,EACAD,EAAA,CACJ,EAEA,OAAOc,EAAAA,mBACF,MAAA,CAAI,UAAU,uGACX,SAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,kIAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,0EACV,SAAA,CAAAD,EAAAA,IAAC/B,EAAA,CAAS,UAAU,iBAAA,CAAkB,EAAE,yBAAA,EAE5C,EACA+B,EAAAA,IAAC,SAAA,CAAO,QAAS2B,EAAS,UAAU,8EAChC,SAAA3B,EAAAA,IAAC0C,EAAA,CAAE,KAAM,GAAI,UAAU,eAAA,CAAgB,CAAA,CAC3C,CAAA,EACJ,EAGA1C,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACX,SAAAC,EAAAA,KAAC,OAAA,CAAK,GAAG,gBAAgB,SAAUoC,EAAc,UAAU,YACvD,SAAA,CAAApC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,uDAAuD,SAAA,mBAAgB,EACxFC,EAAAA,KAAC,MAAA,CAAI,UAAU,WACX,SAAA,CAAAD,EAAAA,IAAC2C,EAAA,CAAW,UAAU,yDAAyD,KAAM,GAAI,EACzF3C,EAAAA,IAAC,QAAA,CACG,KAAK,SACL,SAAQ,GACR,IAAI,IACJ,MAAOmC,EAAS,aAChB,SAAW3C,GAAM4C,EAAY,CAAE,GAAGD,EAAU,aAAc,WAAW3C,EAAE,OAAO,KAAK,EAAG,EACtF,UAAU,mJAAA,CAAA,CACd,CAAA,CACJ,CAAA,EACJ,EAEAS,EAAAA,KAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,uDAAuD,SAAA,uBAAoB,EAC5FC,EAAAA,KAAC,MAAA,CAAI,UAAU,WACX,SAAA,CAAAD,EAAAA,IAAC2C,EAAA,CAAW,UAAU,yDAAyD,KAAM,GAAI,EACzF3C,EAAAA,IAAC,QAAA,CACG,KAAK,SACL,SAAQ,GACR,IAAI,IACJ,MAAOmC,EAAS,eAChB,SAAW3C,GAAM4C,EAAY,CAAE,GAAGD,EAAU,eAAgB,WAAW3C,EAAE,OAAO,KAAK,EAAG,EACxF,UAAU,mJAAA,CAAA,CACd,CAAA,CACJ,CAAA,EACJ,EAGAS,EAAAA,KAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,uDAAuD,SAAA,aAAU,EAClFC,EAAAA,KAAC,MAAA,CAAI,UAAU,WACX,SAAA,CAAAD,EAAAA,IAAC9B,EAAA,CAAS,UAAU,yDAAyD,KAAM,GAAI,EACvF8B,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,SAAQ,GACR,MAAOmC,EAAS,WAChB,SAAW3C,GAAM4C,EAAY,CAAE,GAAGD,EAAU,WAAY3C,EAAE,OAAO,MAAO,EACxE,UAAU,mJAAA,CAAA,CACd,CAAA,CACJ,CAAA,EACJ,EAEAS,EAAAA,KAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,uDAAuD,SAAA,sBAAmB,EAC3FC,EAAAA,KAAC,MAAA,CAAI,UAAU,WACX,SAAA,CAAAD,EAAAA,IAAC9B,EAAA,CAAS,UAAU,yDAAyD,KAAM,GAAI,EACvF8B,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,MAAOmC,EAAS,SAChB,SAAW3C,GAAM4C,EAAY,CAAE,GAAGD,EAAU,SAAU3C,EAAE,OAAO,MAAO,EACtE,UAAU,mJAAA,CAAA,CACd,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,EACJ,EAGAS,EAAAA,KAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,uDAAuD,SAAA,6BAA0B,EAClGA,EAAAA,IAAC,WAAA,CACG,KAAM,EACN,MAAOmC,EAAS,qBAChB,SAAW3C,GAAM4C,EAAY,CAAE,GAAGD,EAAU,qBAAsB3C,EAAE,OAAO,MAAO,EAClF,UAAU,oJACV,YAAY,wCAAA,CAAA,CAChB,EACJ,EAEAS,EAAAA,KAAC,MAAA,CAAI,UAAU,oGACX,SAAA,CAAAD,EAAAA,IAACE,EAAA,CAAY,UAAU,uBAAuB,KAAM,GAAI,EACxDF,EAAAA,IAAC,KAAE,SAAA,kIAAA,CAGH,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EAGAC,EAAAA,KAAC,MAAA,CAAI,UAAU,wHACX,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACG,KAAK,SACL,QAAS2B,EACT,UAAU,4KACb,SAAA,QAAA,CAAA,EAGD3B,EAAAA,IAAC,SAAA,CACG,KAAK,SACL,KAAK,gBACL,SAAUgC,EACV,UAAU,0JAET,WACG/B,EAAAA,KAAA2C,EAAAA,SAAA,CACI,SAAA,CAAA5C,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAAA,CAA4E,EAAE,aAAA,CAAA,CAElG,EAEAC,EAAAA,KAAA2C,EAAAA,SAAA,CACI,SAAA,CAAA5C,EAAAA,IAAC/B,EAAA,CAAS,KAAM,EAAA,CAAI,EAAE,gBAAA,CAAA,CAE1B,CAAA,CAAA,CAER,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EACA,SAAS,IAAA,CAEjB,CCxIA,MAAM4E,GAAsD,CAAC,CAAE,cAAApB,EAAe,YAAaqB,EAAoB,QAAAnB,EAAS,eAAAoB,KAAqB,WACzI,MAAMrF,EAAWC,EAAA,EACX,CAAE,gBAAAqF,EAAiB,oBAAAC,CAAA,EAAwBC,GAAA,EAC3C,CAACC,EAAqBC,CAAsB,EAAIlB,EAAAA,SAAS,EAAK,EAC9D,CAACmB,EAAqBC,CAAsB,EAAIpB,EAAAA,SAAS,EAAK,EAC9D,CAACqB,EAAmBC,CAAoB,EAAItB,EAAAA,SAAS,EAAK,EAC1D,CAACuB,EAAWC,CAAY,EAAIxB,EAAAA,SAAS,UAAU,EAG/C1E,EAAcsF,IAAsBE,GAAA,YAAAA,EAAiB,KAAKW,GAAOA,EAAI,KAAOlC,IAElF,GAAI,CAACjE,EACD,aACK,MAAA,CAAI,UAAU,sFACX,SAAAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,oGACX,eAAC/B,EAAA,CAAS,UAAU,wBAAwB,CAAA,CAChD,EACA+B,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,wBAEzE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,2DAErD,EACAA,EAAAA,IAAC,SAAA,CACG,QAAS2B,EACT,UAAU,kGACb,SAAA,sBAAA,CAAA,CAED,CAAA,CACJ,CAAA,CACJ,EAIR,MAAMiC,EAAc,CAAC,CAAC9F,EAAmB,UAAgCA,EAAmB,SAA+BA,EAAmB,QAA6B,EAAE,SAASN,EAAY,MAAM,EAElMiB,EAAcC,GACXA,EACE,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACpD,IAAK,UACL,MAAO,OACP,KAAM,SAAA,CACT,EALuB,MAQtBmF,EAAeC,GACbA,IAAU,OAAkB,mBACzB,IAAIA,EAAM,eAAe,OAAO,CAAC,GAGtCC,EAAiB,SAAY,CAC3BhB,EACAA,EAAetB,EAAe3D,EAAmB,SAA8B,EAE/E,MAAMmF,EAAoBxB,CAAa,EAE3C2B,EAAuB,EAAK,CAChC,EAEMY,EAAiB,SAAY,CAC3BjB,IACAA,EAAetB,EAAe3D,EAAmB,SAA8B,EAC/EwF,EAAuB,EAAK,EAEpC,EAsGMW,GA1FqB,IAAsB,CAC7C,MAAMC,EAA0B,CAC5B,CACI,GAAI,EACJ,KAAM,YACN,MAAO,wBACP,YAAa,8CACb,KAAM1G,EAAY,eAAiBA,EAAY,UAC/C,KAAMS,EACN,MAAO,MAAA,CACX,EAGEkG,EAAgB,IAAI,KAAK3G,EAAY,eAAiBA,EAAY,SAAS,EAAE,QAAA,EAEnF,OAAIA,EAAY,SAAWM,EAAmB,SAAWN,EAAY,SAAWM,EAAmB,WAC/FoG,EAAQ,KAAK,CACT,GAAI,EACJ,KAAM,SACN,MAAO,eACP,YAAa,2CACb,KAAM,IAAI,KAAKC,EAAgB,KAAU,GAAK,GAAI,EAAE,YAAA,EACpD,KAAMnG,EACN,MAAO,QAAA,CACV,EAGDR,EAAY,SAAWM,EAAmB,qBAC1CoG,EAAQ,KAAK,CACT,GAAI,EACJ,KAAM,YACN,MAAO,sBACP,YAAa,oCACb,KAAM,IAAI,KAAKC,EAAgB,KAAc,GAAK,GAAI,EAAE,YAAA,EACxD,KAAMjE,EACN,MAAO,QAAA,CACV,EAGD1C,EAAY,SAAWM,EAAmB,UAC1CoG,EAAQ,KAAK,CACT,GAAI,EACJ,KAAM,WACN,MAAO,uBACP,YAAa,sDACb,KAAM1G,EAAY,aAAe,IAAI,KAAA,EAAO,YAAA,EAC5C,KAAMW,EACN,MAAO,OAAA,CACV,EAGDX,EAAY,SAAWM,EAAmB,UAC1CoG,EAAQ,KAAK,CACT,GAAI,EACJ,KAAM,WACN,MAAO,2BACP,YAAa,mDACb,KAAM1G,EAAY,aAAe,IAAI,KAAA,EAAO,YAAA,EAC5C,KAAMc,EACN,MAAO,KAAA,CACV,EAGDd,EAAY,SAAWM,EAAmB,WAC1CoG,EAAQ,KAAK,CACT,GAAI,EACJ,KAAM,YACN,MAAO1G,EAAY,cAAgB,OAAS,iBAAmB,oBAC/D,YAAaA,EAAY,cAAgB,OAAS,2CAA6C,sCAC/F,KAAMA,EAAY,aAAe,IAAI,KAAA,EAAO,YAAA,EAC5C,KAAMsD,EACN,MAAO,OAAA,CACV,EAGDtD,EAAY,SAAWM,EAAmB,WAC1CoG,EAAQ,KAAK,CACT,GAAI,EACJ,KAAM,YACN,MAAO,wBACP,YAAa,gCACb,KAAM1G,EAAY,aAAe,IAAI,KAAA,EAAO,YAAA,EAC5C,KAAMc,EACN,MAAO,MAAA,CACV,EAGE4F,EAAQ,KAAK,CAACE,EAAGC,IAAM,IAAI,KAAKA,EAAE,IAAI,EAAE,QAAA,EAAY,IAAI,KAAKD,EAAE,IAAI,EAAE,SAAS,CACzF,GAEwB,EAElBE,EAAO,CACT,CAAE,GAAI,WAAY,MAAO,WAAY,KAAMvE,CAAA,EAC3C,CAAE,GAAI,YAAa,MAAO,YAAa,KAAM9B,CAAA,EAC7C,CAAE,GAAI,UAAW,MAAO,WAAY,KAAMsG,CAAA,CAAQ,EAGtD,OACItE,EAAAA,KAAC,MAAA,CAAI,UAAU,qDAEX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,4FACX,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACX,SAAAC,OAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,QAAS0B,EACT,UAAU,0HAEV,SAAA,CAAA3B,EAAAA,IAACwE,GAAA,CAAU,KAAM,EAAA,CAAI,EACrBxE,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,EAGtDA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACV,SAAA4D,GACG5D,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMoD,EAAuB,EAAI,EAC1C,UAAU,+KACb,SAAA,UAAA,CAAA,CAED,CAER,CAAA,CAAA,CACJ,EACJ,EACJ,EAGAnD,EAAAA,KAAC,MAAA,CAAI,UAAU,sCAEX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,mHACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,4BAEX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACX,SAAAA,EAAAA,IAAC,MAAA,CACG,IAAKxC,EAAY,cACjB,IAAKA,EAAY,cACjB,UAAU,6BACV,QAAUgC,GAAM,CACXA,EAAE,OAA4B,IAAM,oEACzC,CAAA,CAAA,EAER,EAGAS,EAAAA,KAAC,MAAA,CAAI,UAAU,aACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACX,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CxC,EAAY,cAAgB,OACrF,mEACA,sEACF,GACC,SAAAA,EAAY,cAAgB,OAAS,SAAW,WACrD,EACAyC,EAAAA,KAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,CAAA,QACjDzC,EAAY,WAAA,CAAA,CACtB,CAAA,EACJ,QAEC,KAAA,CAAG,UAAU,wDACT,SAAAA,EAAY,eAAiB,oBAClC,EAEAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACX,SAAA,CAAAD,EAAAA,IAACG,EAAA,CAAO,KAAM,EAAA,CAAI,EAClBH,EAAAA,IAAC,OAAA,CAAM,SAAAxC,EAAY,iBAAmB,uBAAA,CAAwB,CAAA,EAClE,EAEAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACV,SAAA,CAAA4D,EAAYrG,EAAY,aAAa,EACrCA,EAAY,cAAgB,cACxB,OAAA,CAAK,UAAU,2CAA2C,SAAA,QAAA,CAAM,CAAA,CAAA,CAEzE,CAAA,EACJ,EAEAyC,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMvC,EAAS,+BAA+BF,EAAY,UAAU,EAAE,EAC/E,UAAU,2LAEV,SAAA,CAAAwC,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,EACnBA,EAAAA,IAACyE,GAAA,CAAa,KAAM,EAAA,CAAI,CAAA,CAAA,CAAA,CAC5B,EACJ,EAGAxE,EAAAA,KAAC,MAAA,CAAI,UAAU,gGACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,YAAS,EACjEA,EAAAA,IAAC,KAAE,UAAU,8CACR,WAAWxC,EAAY,eAAiBA,EAAY,SAAS,CAAA,CAClE,CAAA,EACJ,SACC,MAAA,CACG,SAAA,CAAAwC,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,eAAY,EACpEA,EAAAA,IAAC,KAAE,UAAU,8CACR,WAAWxC,EAAY,aAAeA,EAAY,SAAS,CAAA,CAChE,CAAA,EACJ,SACC,MAAA,CACG,SAAA,CAAAwC,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,gBAAa,QACpE,IAAA,CAAE,UAAU,yDACR,SAAAxC,EAAY,cAAgB,KAAA,CACjC,CAAA,EACJ,SACC,MAAA,CACG,SAAA,CAAAwC,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,mBAAgB,EACxEA,EAAAA,IAAC,KAAE,UAAU,yDACR,WAAY,cAAgB,OAAS,SAAW,UAAA,CACrD,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACX,SAAAA,EAAAA,IAACO,GAAA,CAAc,OAAQ/C,EAAY,OAAQ,YAAaA,EAAY,WAAA,CAAa,EACrF,EAGAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,8GACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACX,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACV,SAAAsE,EAAK,IAAKI,GAAQ,CACf,MAAMtD,EAAOsD,EAAI,KACjB,OACIzE,EAAAA,KAAC,SAAA,CAEG,QAAS,IAAMyD,EAAagB,EAAI,EAAE,EAClC,UAAW,wGAAwGjB,IAAciB,EAAI,GAC/H,yDACA,kGACF,GAEJ,SAAA,CAAA1E,EAAAA,IAACoB,EAAA,CAAK,KAAM,EAAA,CAAI,EAChBpB,EAAAA,IAAC,OAAA,CAAM,SAAA0E,EAAI,KAAA,CAAM,CAAA,CAAA,EARZA,EAAI,EAAA,CAWrB,CAAC,EACL,EACJ,EAEAzE,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEV,SAAA,CAAAwD,IAAc,YACXxD,OAAC,MAAA,CAAI,UAAU,wCAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mFACV,SAAA,CAAAD,EAAAA,IAACK,EAAA,CAAK,KAAM,GAAI,UAAU,kBAAkB,EAAE,mBAAA,EAElD,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,+JACV,WAAA2E,GAAA9E,EAAArC,EAAY,YAAZ,YAAAqC,EAAuB,OAAO,KAA9B,YAAA8E,EAAkC,gBAAiB,GAAA,CACxD,EACA1E,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACX,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,8CACT,SAAAxC,EAAY,UACjB,EACCA,EAAY,aACTyC,OAAC,IAAA,CAAE,UAAU,wEACT,SAAA,CAAAD,EAAAA,IAACF,EAAA,CAAU,KAAM,EAAA,CAAI,EACpBtC,EAAY,WAAA,EACjB,EAEHA,EAAY,YACTyC,OAAC,IAAA,CAAE,UAAU,wEACT,SAAA,CAAAD,EAAAA,IAAC4E,GAAA,CAAK,KAAM,EAAA,CAAI,EACfpH,EAAY,UAAA,EACjB,EAEHA,EAAY,YACTyC,OAAC,IAAA,CAAE,UAAU,wEACT,SAAA,CAAAD,EAAAA,IAAC6E,GAAA,CAAM,KAAM,EAAA,CAAI,EAChBrH,EAAY,UAAA,CAAA,CACjB,CAAA,CAAA,CAER,CAAA,EACJ,EACAyC,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMvC,EAAS,mBAAmB,EAC3C,UAAU,4JAEV,SAAA,CAAAsC,EAAAA,IAACM,EAAA,CAAc,KAAM,EAAA,CAAI,EACzBN,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,CACvB,EACJ,EAGAC,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mFACV,SAAA,CAAAD,EAAAA,IAAC8E,GAAA,CAAU,KAAM,GAAI,UAAU,kBAAkB,EAAE,qBAAA,EAEvD,EACA7E,EAAAA,KAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACX,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,iBAAc,EACjEA,EAAAA,IAAC,OAAA,CAAK,UAAU,8DACX,WAAY,WAAA,CACjB,CAAA,EACJ,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACX,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,OAAI,EACvDA,EAAAA,IAAC,QAAK,UAAU,uDACX,WAAY,cAAgB,OAAS,qBAAuB,sBAAA,CACjE,CAAA,EACJ,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACX,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,iBAAc,QAChE,OAAA,CAAK,UAAU,4CACX,SAAA6D,EAAYrG,EAAY,aAAa,CAAA,CAC1C,CAAA,EACJ,EACAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,SAAM,EACzDA,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CxC,EAAY,SAAWM,EAAmB,SACnG,uEACAN,EAAY,SAAWM,EAAmB,SACtC,+DACAN,EAAY,SAAWM,EAAmB,oBACtC,2EACA,kEACV,GACC,UAAAiH,EAAAvH,EAAY,SAAZ,YAAAuH,EAAoB,QAAQ,KAAM,KAAK,QAAQ,QAASC,GAAKA,EAAE,YAAA,EAAa,CACjF,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,EACJ,EAGCxH,EAAY,SAAWM,EAAmB,UACvCN,EAAY,SAAWM,EAAmB,UAC1CN,EAAY,SAAWM,EAAmB,UAC1CmC,EAAAA,KAAC,MAAA,CAAI,UAAU,+KACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mFACV,SAAA,CAAAD,EAAAA,IAACI,EAAA,CAAa,KAAM,GAAI,UAAU,kBAAkB,EAAE,cAAA,EAE1D,EACAJ,EAAAA,IAAC,OAAI,UAAU,wCAEV,WAAY,SAAWlC,EAAmB,oBACvCmC,EAAAA,KAAA2C,EAAAA,SAAA,CACI,SAAA,CAAA3C,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,2HAA2H,SAAA,IAAC,SAC1I,MAAA,CACG,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,mBAAgB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,sDAAA,CAAoD,CAAA,CAAA,CACrH,CAAA,EACJ,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,sJAAsJ,SAAA,IAAC,SACrK,MAAA,CACG,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,eAAY,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,+CAAA,CAA6C,CAAA,CAAA,CAC9G,CAAA,EACJ,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,sJAAsJ,SAAA,IAAC,SACrK,MAAA,CACG,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,kDAAA,CAAgD,CAAA,CAAA,CACjH,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,EAEAC,EAAAA,KAAA2C,EAAAA,SAAA,CACI,SAAA,CAAA3C,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,wGACX,eAAC7B,EAAA,CAAY,KAAM,GAAI,CAAA,CAC3B,SACC,MAAA,CACG,SAAA,CAAA6B,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,uBAAoB,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,wCAAA,CAAsC,CAAA,CAAA,CACvG,CAAA,EACJ,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAW,WAAWxC,EAAY,SAAWM,EAAmB,aAAe,qCAAuC,+DAA+D,iFAAkF,SAAA,IAAC,SAC5Q,MAAA,CACG,SAAA,CAAAkC,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,eAAY,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,qCAAA,CAAmC,CAAA,CAAA,CACpG,CAAA,EACJ,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,sJAAsJ,SAAA,IAAC,SACrK,MAAA,CACG,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,oCAAA,CAAkC,CAAA,CAAA,CACnG,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAER,CAAA,CAAA,CACJ,EACAxC,EAAY,SAAWM,EAAmB,UAC1CkC,EAAAA,IAAC,MAAA,CAAI,UAAU,sKACX,SAAAC,OAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,0GACX,eAAC7B,EAAA,CAAY,KAAM,GAAI,CAAA,CAC3B,SACC,MAAA,CACG,SAAA,CAAA6B,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,gDAEzE,EACAC,EAAAA,KAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,uFAEhDzC,EAAY,cAAgB,OAAS,4EAA8E,6CAAA,EACxH,EACAyC,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMvC,EAAS,mBAAmB,EAC3C,UAAU,sPAEV,SAAA,CAAAsC,EAAAA,IAACM,EAAA,CAAc,KAAM,EAAA,CAAI,EACzBN,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,EAGtBxC,EAAY,cAAgB,QACzByC,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMuD,EAAqB,EAAI,EACxC,UAAU,2IAEV,SAAA,CAAAxD,EAAAA,IAAC/B,EAAA,CAAS,KAAM,EAAA,CAAI,EACpB+B,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,CAAA,CAAA,CAAA,EAI5BC,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMqD,EAAuB,EAAI,EAC1C,UAAU,yIAEV,SAAA,CAAAtD,EAAAA,IAAC/B,EAAA,CAAS,KAAM,EAAA,CAAI,EACpB+B,EAAAA,IAAC,QAAK,SAAA,iBAAA,CAAe,CAAA,CAAA,CAAA,CACzB,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EAIHxC,EAAY,SAAWM,EAAmB,WACvCkC,EAAAA,IAAC,MAAA,CAAI,UAAU,4KACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,2GACX,eAACc,EAAA,CAAI,KAAM,GAAI,CAAA,CACnB,SACC,MAAA,CACG,SAAA,CAAAd,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,+BAEzE,EACAC,EAAAA,KAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,sFACmCzC,EAAY,cAAgB,OAAS,SAAW,YAAY,iBAAA,EACpJ,EACAyC,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMvC,EAAS,oBAAoB,EAC5C,UAAU,iIAEV,SAAA,CAAAsC,EAAAA,IAACD,EAAA,CAAK,KAAM,EAAA,CAAI,EAChBC,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAAA,CAC3B,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,EAER,EAIHyD,IAAc,aACXzD,EAAAA,IAAC,MAAA,CAAI,UAAU,YACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,8EACV,SAAA,CAAAD,EAAAA,IAACiF,GAAA,CAAO,KAAM,GAAI,UAAU,kBAAkB,EAAE,oBAAA,EAEpD,EACAhF,EAAAA,KAAC,SAAA,CAAO,UAAU,gNACd,SAAA,CAAAD,EAAAA,IAAC5B,EAAA,CAAO,KAAM,EAAA,CAAI,EAAE,YAAA,CAAA,CAExB,CAAA,EACJ,QACC,MAAA,CAAI,UAAU,wCACV,SAAA,CAAC,uBAAwB,sBAAuB,sBAAuB,0BAA0B,EAAE,IAAI,CAAC8G,EAAK/D,IAC1GlB,EAAAA,KAAC,MAAA,CAAgB,UAAU,6MACvB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAW,yDAAyDmB,EAAQ,EAAI,oCAAsC,8BACvH,GACC,SAAAA,EAAQ,EACLnB,EAAAA,IAAC7B,GAAY,KAAM,GAAI,UAAU,oCAAA,CAAqC,EAEtE6B,EAAAA,IAAC/B,GAAS,KAAM,GAAI,UAAU,eAAA,CAAgB,CAAA,CAEtD,SACC,MAAA,CACG,SAAA,CAAA+B,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAqD,SAAAkF,EAAI,QACrE,IAAA,CAAE,UAAU,kDACR,SAAA/D,EAAQ,EAAI,WAAa,gBAAA,CAC9B,CAAA,CAAA,CACJ,CAAA,EACJ,EACAnB,MAAC,SAAA,CAAO,UAAU,iJACb,WAAQ,EAAIA,MAAC/B,EAAA,CAAS,KAAM,GAAI,EAAK+B,EAAAA,IAAC5B,EAAA,CAAO,KAAM,GAAI,CAAA,CAC5D,CAAA,CAAA,EAnBM+C,CAoBV,CACH,CAAA,CACL,CAAA,CAAA,CACJ,CAAA,CACJ,EAIHsC,IAAc,WACXzD,EAAAA,IAAC,MAAA,CAAI,UAAU,YACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mFACV,SAAA,CAAAD,EAAAA,IAACuE,EAAA,CAAQ,KAAM,GAAI,UAAU,kBAAkB,EAAE,sBAAA,EAErD,EACAvE,MAAC,OAAI,UAAU,gBACV,WAAgB,IAAI,CAACmF,EAAUhE,IAAU,CACtC,MAAMC,EAAO+D,EAAS,KAChBC,EAAe,CACjB,KAAM,mEACN,OAAQ,2EACR,MAAO,uEACP,IAAK,+DACL,OAAQ,2EACR,KAAM,+DAAA,EAGV,OACInF,EAAAA,KAAC,MAAA,CAAsB,UAAU,4CAC5B,SAAA,CAAAkB,EAAQ8C,EAAgB,OAAS,GAC9BjE,EAAAA,IAAC,MAAA,CAAI,UAAU,0EAA0E,EAE7FA,EAAAA,IAAC,MAAA,CAAI,UAAW,mFAAmFoF,EAAaD,EAAS,KAAK,CAAC,GAC3H,SAAAnF,EAAAA,IAACoB,EAAA,CAAK,KAAM,GAAI,EACpB,EACAnB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACX,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,8CACT,SAAAmF,EAAS,MACd,EACAlF,EAAAA,KAAC,OAAA,CAAK,UAAU,mEACZ,SAAA,CAAAD,EAAAA,IAAChC,EAAA,CAAM,KAAM,EAAA,CAAI,EAChBS,EAAW0G,EAAS,IAAI,CAAA,CAAA,CAC7B,CAAA,EACJ,EACAnF,EAAAA,IAAC,IAAA,CAAE,UAAU,gEACR,WAAS,WAAA,CACd,CAAA,CAAA,CACJ,CAAA,CAAA,EApBMmF,EAAS,EAqBnB,CAER,CAAC,CAAA,CACL,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,CAAA,CAER,CAAA,CAAA,CACJ,CAAA,EACJ,EAGChC,GAAuBV,EAAAA,mBACnB,MAAA,CAAI,UAAU,2FACX,SAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,0GACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,qGACX,SAAAA,EAAAA,IAAC1B,GAAQ,KAAM,GAAI,UAAU,gCAAA,CAAiC,CAAA,CAClE,EACA0B,EAAAA,IAAC,KAAA,CAAG,UAAU,mEAAmE,SAAA,wBAEjF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAoD,SAAA,gFAEjE,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACX,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMoD,EAAuB,EAAK,EAC3C,UAAU,iLACb,SAAA,SAAA,CAAA,EAGDpD,EAAAA,IAAC,SAAA,CACG,QAAS+D,EACT,UAAU,6GACb,SAAA,kBAAA,CAAA,CAED,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EACA,SAAS,IAAA,EAIZV,GAAuBZ,EAAAA,mBACnB,MAAA,CAAI,UAAU,2FACX,SAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,0GACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,yGACX,SAAAA,EAAAA,IAACc,GAAI,KAAM,GAAI,UAAU,oCAAA,CAAqC,CAAA,CAClE,EACAd,EAAAA,IAAC,KAAA,CAAG,UAAU,mEAAmE,SAAA,qBAEjF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAoD,SAAA,kGAEjE,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACX,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMsD,EAAuB,EAAK,EAC3C,UAAU,iLACb,SAAA,QAAA,CAAA,EAGDtD,EAAAA,IAAC,SAAA,CACG,QAASgE,EACT,UAAU,iHACb,SAAA,cAAA,CAAA,CAED,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,EACA,SAAS,IAAA,EAIZT,GACGvD,EAAAA,IAACwB,GAAA,CACG,cAAehE,EAAY,GAC3B,cAAeA,EAAY,eAAiB,EAC5C,QAAS,IAAMgG,EAAqB,EAAK,EACzC,UAAW,IAAM,CAEjB,CAAA,CAAA,CACJ,EAER,CAER,ECpuBM6B,GAAwD,CAAC,CAC3D,YAAAC,EACA,eAAAC,EACA,aAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,sBAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,YAAaC,EACb,eAAgBC,EAChB,iBAAAC,EAAmB,EACvB,IAAM,CACF,KAAM,CAACC,EAAqBC,CAAsB,EAAIhE,EAAAA,SAAS,EAAK,EAG9DiE,EAAcL,IAAwB,OAAYA,EAAsBG,EACxEG,EAAiBL,GAA0BG,EAE3CG,EAAgB,CAClB,CAAE,MAAO,MAAO,MAAO,cAAA,EACvB,CAAE,MAAOvI,EAAmB,MAAO,MAAO,OAAA,EAC1C,CAAE,MAAOA,EAAmB,UAAW,MAAO,WAAA,EAC9C,CAAE,MAAOA,EAAmB,aAAc,MAAO,cAAA,EACjD,CAAE,MAAOA,EAAmB,oBAAqB,MAAO,qBAAA,EACxD,CAAE,MAAOA,EAAmB,SAAU,MAAO,UAAA,EAC7C,CAAE,MAAOA,EAAmB,SAAU,MAAO,UAAA,EAC7C,CAAE,MAAOA,EAAmB,UAAW,MAAO,WAAA,CAAY,EAGxDwI,EAAsB,CACxB,CAAE,MAAO,MAAO,MAAO,WAAA,EACvB,CAAE,MAAO,YAAa,MAAO,WAAA,EAC7B,CAAE,MAAO,QAAS,MAAO,OAAA,EACzB,CAAE,MAAO,QAAS,MAAO,OAAA,EACzB,CAAE,MAAO,YAAa,MAAO,WAAA,CAAY,EAGvCC,EACFf,IAAiB,OACjBE,IAAuB,OACvBE,EAAgB,QAAU,MAC1BA,EAAgB,MAAQ,KAEtBY,EAAe,IAAM,CACvBf,EAAgB,KAAK,EACrBE,EAAsB,KAAK,EAC3BE,EAAmB,CAAE,MAAO,KAAM,IAAK,KAAM,CACjD,EAEA,OACI5F,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,WACX,SAAA,CAAAD,EAAAA,IAACW,EAAA,CACG,KAAM,GACN,UAAU,kEAAA,CAAA,EAEdX,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,YAAY,0DACZ,MAAOsF,EACP,SAAW9F,GAAM+F,EAAe/F,EAAE,OAAO,KAAK,EAC9C,UAAU,+LAAA,CAAA,CACd,EACJ,EAGC,CAACwG,GACE/F,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMmG,EAAe,CAACD,CAAW,EAC1C,UAAU,0MAEV,SAAA,CAAAnG,EAAAA,IAACyG,GAAA,CAAO,KAAM,EAAA,CAAI,EAClBzG,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,EACZuG,GACGvG,EAAAA,IAAC,OAAA,CAAK,UAAU,iEAAiE,SAAA,QAAA,CAEjF,CAAA,CAAA,CAAA,EAGPuG,GACGtG,EAAAA,KAAC,SAAA,CACG,QAASuG,EACT,UAAU,wJAEV,SAAA,CAAAxG,EAAAA,IAAC0C,EAAA,CAAE,KAAM,EAAA,CAAI,EACb1C,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,CACvB,EAER,EAIHgG,GAAoBO,GACjBvG,MAAC,MAAA,CAAI,UAAU,mBACX,SAAAC,EAAAA,KAAC,SAAA,CACG,QAASuG,EACT,UAAU,wJAEV,SAAA,CAAAxG,EAAAA,IAAC0C,EAAA,CAAE,KAAM,EAAA,CAAI,EACb1C,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,EAE3B,EAIHmG,SACI,MAAA,CAAI,UAAU,+JACX,SAAAlG,EAAAA,KAAC,MAAA,CAAI,UAAU,uDAEX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,SAEnF,EACAA,EAAAA,IAAC,SAAA,CACG,MAAOwF,EACP,SAAWhG,GAAMiG,EAAgBjG,EAAE,OAAO,KAAK,EAC/C,UAAU,iKAET,SAAA6G,EAAc,IAAKK,GAChB1G,EAAAA,IAAC,SAAA,CAA0B,MAAO0G,EAAO,MACpC,SAAAA,EAAO,KAAA,EADCA,EAAO,KAEpB,CACH,CAAA,CAAA,CACL,EACJ,SAGC,MAAA,CACG,SAAA,CAAA1G,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,gBAEnF,EACAA,EAAAA,IAAC,SAAA,CACG,MAAO0F,EACP,SAAWlG,GAAMmG,EAAsBnG,EAAE,OAAO,KAAK,EACrD,UAAU,iKAET,SAAA8G,EAAoB,IAAKI,GACtB1G,EAAAA,IAAC,SAAA,CAA0B,MAAO0G,EAAO,MACpC,SAAAA,EAAO,KAAA,EADCA,EAAO,KAEpB,CACH,CAAA,CAAA,CACL,EACJ,EAGAzG,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,aAEnF,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,MAAC,MAAA,CACG,SAAAA,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,MAAO4F,EAAgB,OAAS,GAChC,SAAWpG,GACPqG,EAAmB,CAAE,GAAGD,EAAiB,MAAOpG,EAAE,OAAO,OAAS,IAAA,CAAM,EAE5E,UAAU,wKAAA,CAAA,EAElB,QACC,MAAA,CACG,SAAAQ,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,MAAO4F,EAAgB,KAAO,GAC9B,SAAWpG,GACPqG,EAAmB,CAAE,GAAGD,EAAiB,IAAKpG,EAAE,OAAO,OAAS,IAAA,CAAM,EAE1E,UAAU,wKAAA,CAAA,CACd,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,EAER,CAER,ECjLA,SAASmH,GAAoB,CAAE,YAAAC,EAAc,QAAoC,CAC7E,KAAM,CAAE,KAAAC,CAAA,EAASC,GAAA,EACXC,EAAQhF,GAAA,EACR,CACF,gBAAAiB,EACA,UAAWgE,EACX,YAAA1B,EACA,eAAAC,EACA,aAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,sBAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,wBAAAoB,CAAA,EACA/D,GAAA,EAEE,CAACgE,EAAMC,CAAO,EAAIjF,EAAAA,SAA4B0E,CAAW,EACzD,CAACQ,EAAYC,CAAa,EAAInF,EAAAA,SAAwB,IAAI,EAC1D,CAACiE,EAAaC,CAAc,EAAIlE,EAAAA,SAAS,EAAK,EAG9CoF,EAAetE,EAEfuE,EAAQC,EAAAA,QAAQ,IAAM,CACxB,MAAMC,EAAQH,EAAa,OACrBI,EAAUJ,EAAa,OAAQlD,GAAWA,EAAE,SAAWtG,EAAmB,SAAWsG,EAAE,SAAWtG,EAAmB,SAAS,EAAE,OAChI6J,EAAiBL,EAAa,OAAQlD,GAAWA,EAAE,cAAc,EAAE,OACnEwD,EAAWN,EAAa,OAAQlD,GAAWA,EAAE,SAAWtG,EAAmB,QAAQ,EAAE,OAE3F,MAAO,CACH,CAAE,MAAO,eAAgB,MAAO2J,EAAM,SAAA,EAAY,KAAMxJ,EAAU,MAAO,gBAAiB,GAAI,gCAAA,EAC9F,CAAE,MAAO,iBAAkB,MAAOyJ,EAAQ,SAAA,EAAY,KAAM1J,EAAO,MAAO,kBAAmB,GAAI,oCAAA,EACjG,CAAE,MAAO,kBAAmB,MAAO2J,EAAe,SAAA,EAAY,KAAMzH,EAAa,MAAO,eAAgB,GAAI,8BAAA,EAC5G,CAAE,MAAO,YAAa,MAAO0H,EAAS,SAAA,EAAY,KAAMzJ,EAAa,MAAO,iBAAkB,GAAI,kCAAA,CAAmC,CAE7I,EAAG,CAACmJ,CAAY,CAAC,EAEXO,EAAmBC,GAAe,CACpCT,EAAcS,CAAE,EAChBX,EAAQ,QAAQ,EAChB,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAClD,EAEMY,EAAoB,IAAM,CAC5BZ,EAAQ,MAAM,EACdE,EAAc,IAAI,CACtB,EAEMW,EAAqB,MAAOF,EAAYjK,IAAgB,CAC1D,GAAI,CACA,MAAMoJ,EAAwBa,EAAIjK,CAAM,EACxCkJ,EAAM,QAAQ,iCAAiClJ,EAAO,QAAQ,KAAM,GAAG,CAAC,EAAE,CAC9E,MAAc,CACVkJ,EAAM,MAAM,yBAAyB,CACzC,CACJ,EAEA,OAAIG,IAAS,UAAYE,EAEjBpH,EAAAA,IAAC6C,GAAA,CACG,cAAeuE,EACf,QAASW,EACT,eAAgBC,CAAA,CAAA,EAMxB/H,EAAAA,KAAC,MAAA,CAAI,UAAU,wDAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kEACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,eAEtE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAA+C,SAAA,6CAAA,CAE5D,CAAA,EACJ,QACC,MAAA,CAAI,UAAU,0BACX,SAAAC,EAAAA,KAAC,SAAA,CAAO,UAAU,6JACd,SAAA,CAAAD,EAAAA,IAACiI,GAAA,CAAK,KAAM,EAAA,CAAI,EAAE,kBAAA,CAAA,CACtB,CAAA,CACJ,CAAA,EACJ,EAGAjI,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACV,SAAAuH,EAAM,IAAKW,GACRjI,EAAAA,KAAC,MAAA,CAAqB,UAAU,kGAC5B,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACX,SAAAA,MAAC,OAAI,UAAW,oBAAoBkI,EAAK,EAAE,IAAIA,EAAK,KAAK,GACrD,eAACA,EAAK,KAAL,CAAU,KAAM,GAAI,EACzB,CAAA,CACJ,EACAlI,EAAAA,IAAC,IAAA,CAAE,UAAU,qFAAsF,WAAK,MAAM,EAC9GA,EAAAA,IAAC,KAAA,CAAG,UAAU,mDAAoD,WAAK,KAAA,CAAM,CAAA,CAAA,EAPvEkI,EAAK,KAQf,CACH,EACL,EAGAlI,EAAAA,IAACqF,GAAA,CACG,YAAAC,EACA,eAAAC,EACA,aAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,sBAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,YAAAM,EACA,eAAAC,CAAA,CAAA,EAIJpG,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACV,SAAAgH,EACG,MAAM,KAAK,CAAE,OAAQ,CAAA,CAAG,EAAE,IAAI,CAACmB,EAAGC,IAC9BpI,EAAAA,IAAC,MAAA,CAAY,UAAU,8GAAA,EAAboI,CAA4H,CACzI,EACDd,EAAa,OAAS,EACtBA,EAAa,IAAK3D,GACd3D,EAAAA,IAACzC,GAAA,CAEG,YAAaoG,EACb,QAAS,IAAMkE,EAAgBlE,EAAI,EAAE,CAAA,EAFhCA,EAAI,EAAA,CAIhB,EAED1D,EAAAA,KAAC,MAAA,CAAI,UAAU,iLACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,2FACX,SAAAA,EAAAA,IAAC/B,GAAS,KAAM,GAAI,UAAU,eAAA,CAAgB,CAAA,CAClD,EACA+B,EAAAA,IAAC,KAAA,CAAG,UAAU,uDAAuD,SAAA,wBAAqB,EAC1FA,EAAAA,IAAC,KAAE,UAAU,4CACR,YAAewF,IAAiB,MAC3B,sFACA,+EAAA,CACV,GACEF,GAAeE,IAAiB,OAASE,IAAuB,QAC9D1F,EAAAA,IAAC,SAAA,CACG,QAAS,IAAM,CACXuF,EAAe,EAAE,EACjBE,EAAgB,KAAK,EACrBE,EAAsB,KAAK,EAC3BE,EAAmB,CAAE,MAAO,KAAM,IAAK,KAAM,CACjD,EACA,UAAU,iDACb,SAAA,mBAAA,CAAA,CAED,CAAA,CAER,CAAA,CAER,CAAA,EACJ,CAER,CAEA,SAAwBwC,IAA0B,CAC9C,OACIrI,EAAAA,IAACsI,GAAA,CACG,SAAAtI,EAAAA,IAACuI,EAAAA,SAAA,CAAS,SAAUvI,EAAAA,IAAC,MAAA,CAAI,UAAU,kDAAkD,SAAA,yBAAA,CAAuB,EACxG,SAAAA,EAAAA,IAAC2G,GAAA,CAAA,CAAoB,EACzB,EACJ,CAER"}