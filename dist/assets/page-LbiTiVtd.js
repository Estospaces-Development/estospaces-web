import{u as z,af as F,r as i,ag as s,j as e,s as b,T as L,S as V,x as U,H as $,f as B,F as J,k as K,C as Y}from"./index-DOVRzmjE.js";import{A as H}from"./arrow-left-CKEYTJ9r.js";import{C as Q}from"./check-check-DFT_HPZJ.js";import{T as E}from"./trash-2-B98-oTU_.js";import{D as W}from"./dollar-sign-BkcxF9s_.js";import{M as q}from"./message-circle-CgMyiF1G.js";function te(){const c=z(),{notifications:h,unreadCount:y,loading:T,markAsRead:N,markAllAsRead:C,deleteNotification:f}=F(),[x,k]=i.useState("all"),[m,j]=i.useState("all"),[u,v]=i.useState(""),[n,g]=i.useState([]),o=i.useMemo(()=>h.filter(r=>{if(x==="unread"&&r.read||x==="read"&&!r.read||m!=="all"&&!{appointments:[s.APPOINTMENT_APPROVED,s.APPOINTMENT_REJECTED],applications:[s.APPLICATION_UPDATE],messages:[s.TICKET_RESPONSE],system:[s.DOCUMENT_VERIFIED,s.PROFILE_VERIFIED,s.SYSTEM],all:[]}[m].includes(r.type))return!1;if(u){const t=u.toLowerCase();return r.title.toLowerCase().includes(t)||r.message.toLowerCase().includes(t)}return!0}),[h,x,m,u]),I=r=>{switch(r){case s.APPOINTMENT_APPROVED:return e.jsx(Y,{size:20,className:"text-green-500"});case s.APPOINTMENT_REJECTED:return e.jsx(K,{size:20,className:"text-red-500"});case s.APPLICATION_UPDATE:return e.jsx(J,{size:20,className:"text-blue-500"});case s.DOCUMENT_VERIFIED:case s.PROFILE_VERIFIED:return e.jsx(B,{size:20,className:"text-green-500"});case s.TICKET_RESPONSE:return e.jsx(q,{size:20,className:"text-purple-500"});case"property_saved":return e.jsx($,{size:20,className:"text-orange-500"});case"price_drop":return e.jsx(W,{size:20,className:"text-green-500"});case"viewing_booked":return e.jsx(U,{size:20,className:"text-blue-500"});default:return e.jsx(b,{size:20,className:"text-gray-500"})}},D=r=>{switch(r){case s.APPOINTMENT_APPROVED:case s.DOCUMENT_VERIFIED:case s.PROFILE_VERIFIED:case"price_drop":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case s.APPOINTMENT_REJECTED:return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case s.APPLICATION_UPDATE:case"viewing_booked":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case s.TICKET_RESPONSE:return"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800";case"property_saved":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600"}},P=r=>{const t=new Date(r),l=Math.floor((new Date().getTime()-t.getTime())/1e3);return l<60?"Just now":l<3600?`${Math.floor(l/60)} minutes ago`:l<86400?`${Math.floor(l/3600)} hours ago`:l<604800?`${Math.floor(l/86400)} days ago`:t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})},w=r=>{var t,a,l;r.read||N(r.id),(t=r.data)!=null&&t.propertyId?c(`/user/dashboard/property/${r.data.propertyId}`):(a=r.data)!=null&&a.applicationId?c("/user/dashboard/applications"):(l=r.data)!=null&&l.viewingId&&c("/user/dashboard/viewings")},S=r=>{g(t=>t.includes(r)?t.filter(a=>a!==r):[...t,r])},A=()=>{n.length===o.length?g([]):g(o.map(r=>r.id))},O=()=>{n.forEach(r=>f(r)),g([])},_=()=>{n.forEach(r=>N(r)),g([])},R=i.useMemo(()=>{const r={};return o.forEach(t=>{const a=new Date(t.created_at),l=new Date,p=new Date(l);p.setDate(p.getDate()-1);let d;a.toDateString()===l.toDateString()?d="Today":a.toDateString()===p.toDateString()?d="Yesterday":a>new Date(l.getTime()-10080*60*1e3)?d="This Week":a>new Date(l.getTime()-720*60*60*1e3)?d="This Month":d="Older",r[d]||(r[d]=[]),r[d].push(t)}),r},[o]),M=["Today","Yesterday","This Week","This Month","Older"];return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-12",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 lg:px-6 py-8",children:[e.jsxs("button",{onClick:()=>c("/user/dashboard"),className:"mb-6 flex items-center gap-2 text-gray-500 hover:text-orange-500 transition-colors group",children:[e.jsx(H,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(b,{className:"text-orange-500"}),"Notifications"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Stay updated with your property activities and communications"})]}),e.jsxs("div",{className:"flex gap-4",children:[y>0&&e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-lg text-sm font-medium hover:bg-orange-200 transition-colors",children:[e.jsx(Q,{size:18}),"Mark all as read"]}),e.jsx("button",{onClick:()=>c("/user/dashboard/settings"),className:"p-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg hover:bg-gray-200 transition-colors",children:e.jsx(L,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/30",children:[e.jsx("span",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:"Unread"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:y})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/30",children:[e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:h.length})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 lg:px-6 mt-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search notifications...",className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 transition-all text-gray-900 dark:text-white",value:u,onChange:r=>v(r.target.value)})]}),e.jsxs("select",{className:"px-4 py-2.5 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-xl outline-none font-medium text-sm text-gray-900 dark:text-white",value:m,onChange:r=>j(r.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"appointments",children:"Appointments"}),e.jsx("option",{value:"applications",children:"Applications"}),e.jsx("option",{value:"messages",children:"Messages"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsxs("select",{className:"px-4 py-2.5 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-xl outline-none font-medium text-sm text-gray-900 dark:text-white",value:x,onChange:r=>k(r.target.value),children:[e.jsx("option",{value:"all",children:"Recent & Read"}),e.jsx("option",{value:"unread",children:"Unread Only"}),e.jsx("option",{value:"read",children:"Read Only"})]})]}),n.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-orange-500 text-white p-4 rounded-xl mb-6 shadow-lg animate-in slide-in-from-top duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.length===o.length,onChange:A,className:"w-4 h-4 rounded border-white/30 text-orange-600 outline-none"}),e.jsxs("span",{className:"font-semibold",children:[n.length," notifications selected"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:_,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors",children:"Mark as Read"}),e.jsxs("button",{onClick:O,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(E,{size:16}),"Delete"]})]})]}),T?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((r,t)=>e.jsx("div",{className:"h-24 bg-white dark:bg-gray-800 rounded-2xl animate-pulse border dark:border-gray-700"},t))}):o.length>0?e.jsx("div",{className:"space-y-8",children:M.map(r=>{const t=R[r];return!t||t.length===0?null:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest pl-2",children:r}),e.jsx("div",{className:"space-y-3",children:t.map(a=>e.jsxs("div",{className:`group relative flex items-center gap-4 p-4 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-2xl transition-all hover:shadow-xl hover:-translate-y-0.5 ${a.read?"":"border-orange-200 dark:border-orange-900/30"}`,children:[e.jsx("input",{type:"checkbox",checked:n.includes(a.id),onChange:()=>S(a.id),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-orange-500 outline-none"}),e.jsx("div",{className:`p-3 rounded-xl flex-shrink-0 border dark:border-gray-700 ${D(a.type)}`,onClick:()=>w(a),children:I(a.type)}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>w(a),children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("h4",{className:`font-bold text-gray-900 dark:text-white truncate ${a.read?"":"pr-6"}`,children:a.title}),e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:P(a.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5 line-clamp-2",children:a.message})]}),!a.read&&e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-orange-500 rounded-full shadow-sm shadow-orange-500/50"}),e.jsx("button",{onClick:l=>{l.stopPropagation(),f(a.id)},className:"p-2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",children:e.jsx(E,{size:18})})]},a.id))})]},r)})}):e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-3xl border dark:border-gray-700",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-6 bg-gray-50 dark:bg-gray-700 rounded-full mb-6",children:e.jsx(b,{className:"text-gray-300",size:48})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All clear here!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"No notifications found match your current filters."}),e.jsx("button",{onClick:()=>{k("all"),j("all"),v("")},className:"mt-8 px-6 py-2.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-xl active:scale-95 transition-transform",children:"Reset Filters"})]})]})]})}export{te as default};
//# sourceMappingURL=page-LbiTiVtd.js.map
