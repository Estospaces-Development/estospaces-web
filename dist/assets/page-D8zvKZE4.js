import{u as S,j as e,k as D,a as I,q as P,U,F as N,x as w,ab as r,b as O,C as E,y as R,B as M,H as _,r as C,S as V,X as W,aa as z}from"./index-DOVRzmjE.js";import{C as v}from"./clock-BTPvMfCB.js";import{T as F}from"./trending-up-CIbD0edw.js";import{U as L}from"./upload-fUFQDDz4.js";import{S as $}from"./square-pen-BfCPIThC.js";import{F as B}from"./funnel-Dm1GjO5g.js";import{L as G}from"./layout-grid-DKmrkme1.js";import{L as q}from"./list-CILok-Ka.js";import{P as H}from"./plus-BnzQnmOQ.js";const Q=({application:a,onClick:b})=>{var f;const u=S(),c=t=>{switch(t){case r.DRAFT:return{label:"Draft",color:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",dotColor:"bg-gray-400",icon:$};case r.PENDING:return{label:"Pending Review",color:"bg-yellow-50 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",dotColor:"bg-yellow-500",icon:v};case r.SUBMITTED:return{label:"Submitted",color:"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",dotColor:"bg-blue-500",icon:N};case r.APPOINTMENT_BOOKED:return{label:"Appointment Booked",color:"bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",dotColor:"bg-purple-500",icon:w};case r.VIEWING_SCHEDULED:return{label:"Viewing Scheduled",color:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400",dotColor:"bg-indigo-500",icon:w};case r.VIEWING_COMPLETED:return{label:"Viewing Completed",color:"bg-cyan-50 text-cyan-600 dark:bg-cyan-900/30 dark:text-cyan-400",dotColor:"bg-cyan-500",icon:E};case r.UNDER_REVIEW:return{label:"Under Review",color:"bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",dotColor:"bg-amber-500",icon:v};case r.DOCUMENTS_REQUESTED:return{label:"Documents Requested",color:"bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",dotColor:"bg-orange-500",icon:L};case r.VERIFICATION_IN_PROGRESS:return{label:"Verification in Progress",color:"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",dotColor:"bg-blue-500",icon:F};case r.APPROVED:return{label:"Approved",color:"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",dotColor:"bg-emerald-500",icon:E};case r.REJECTED:return{label:"Rejected",color:"bg-red-50 text-red-600 dark:bg-red-900/30 dark:text-red-400",dotColor:"bg-red-500",icon:R};case r.WITHDRAWN:return{label:"Withdrawn",color:"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400",dotColor:"bg-gray-400",icon:R};case r.COMPLETED:return{label:"Completed",color:"bg-green-50 text-green-600 dark:bg-green-900/30 dark:text-green-400",dotColor:"bg-green-500",icon:E};default:return{label:(t==null?void 0:t.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()))||"Unknown",color:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",dotColor:"bg-gray-400",icon:N}}},h=()=>{switch(a.status){case r.DRAFT:return{label:"Continue",action:"edit"};case r.DOCUMENTS_REQUESTED:return{label:"Upload",action:"upload"};case r.UNDER_REVIEW:return{label:"View",action:"view"};default:return{label:"View",action:"view"}}},d=t=>t?new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"N/A",n=t=>{if(!t)return"N/A";const l=new Date(t),m=new Date().getTime()-l.getTime(),s=Math.floor(m/(1e3*60*60*24)),T=Math.floor(m/(1e3*60*60)),A=Math.floor(m/(1e3*60));return A<60?`${A}m ago`:T<24?`${T}h ago`:s===1?"Yesterday":s<7?`${s} days ago`:d(t)},i=()=>{if(!a.deadline)return!1;const t=new Date(a.deadline),l=new Date,o=new Date(l.getTime()+4320*60*1e3);return t<=o&&t>l},x=c(a.status),k=h(),j=t=>{t.stopPropagation(),u("/user/dashboard/messages")},p=()=>{switch(a.status){case r.DRAFT:return 10;case r.PENDING:case r.SUBMITTED:return 20;case r.APPOINTMENT_BOOKED:case r.VIEWING_SCHEDULED:return 30;case r.VIEWING_COMPLETED:return 40;case r.UNDER_REVIEW:return 55;case r.DOCUMENTS_REQUESTED:return 65;case r.VERIFICATION_IN_PROGRESS:return 80;case r.APPROVED:case r.COMPLETED:return 100;case r.REJECTED:case r.WITHDRAWN:return 0;default:return 15}},g=()=>{if(!a.appointment)return null;const{date:t,time:l}=a.appointment;return t?`${new Date(t).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})}${l?` at ${l}`:""}`:null};return(()=>{var l;const t=(l=a.propertyType)==null?void 0:l.toLowerCase();return t==="apartment"||t==="flat"?M:_})(),e.jsx("div",{onClick:b,className:`group bg-white dark:bg-gray-800 rounded-xl border overflow-hidden transition-all duration-200 cursor-pointer hover:shadow-lg ${a.requiresAction?"border-orange-200 dark:border-orange-800 ring-1 ring-orange-100 dark:ring-orange-900/30":"border-gray-200 dark:border-gray-700 hover:border-orange-200 dark:hover:border-orange-800"}`,children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-32 sm:w-40 lg:w-48",children:[e.jsx("img",{src:a.propertyImage,alt:a.propertyTitle||"Property",className:"w-full h-full object-cover min-h-[160px]"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${x.color} backdrop-blur-sm`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${x.dotColor}`}),x.label]})}),a.requiresAction&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded-full shadow-sm",children:[e.jsx(D,{size:12}),"Action"]})})]}),e.jsxs("div",{className:"flex-1 p-4 lg:p-5 flex flex-col justify-between min-w-0",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base lg:text-lg truncate group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:a.propertyTitle}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[e.jsx(I,{size:13,className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:a.propertyAddress})]})]}),e.jsx(P,{size:20,className:"text-gray-300 dark:text-gray-600 group-hover:text-orange-400 transition-colors flex-shrink-0 mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(U,{size:14,className:"flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate",children:a.agentName||"Agent"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(v,{size:14,className:"flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate",children:n(a.lastUpdated||a.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(N,{size:14,className:"flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate font-mono text-xs",children:a.referenceId||a.id.substring(0,8)})]})]}),a.hasAppointment&&g()&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 px-3 py-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-100 dark:border-purple-800 rounded-lg",children:[e.jsx(w,{size:14,className:"text-purple-600 dark:text-purple-400"}),e.jsxs("span",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:["Appointment: ",g()]})]}),a.status!==r.REJECTED&&a.status!==r.WITHDRAWN&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:[p(),"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${a.status===r.APPROVED?"bg-green-500":"bg-gradient-to-r from-orange-400 to-orange-500"}`,style:{width:`${p()}%`}})})]}),i()&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-lg",children:[e.jsx(v,{size:13,className:"text-red-500"}),e.jsxs("span",{className:"text-xs font-medium text-red-600 dark:text-red-400",children:["Due: ",d(a.deadline)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["Â£",((f=a.propertyPrice)==null?void 0:f.toLocaleString())||"0"]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.propertyType==="rent"?"/month":""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Message Agent",children:e.jsx(O,{size:18})}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),b()},className:"flex items-center gap-1.5 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition-colors shadow-sm hover:shadow",children:[k.label,e.jsx(P,{size:16})]})]})]})]})]})})},J=()=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-pulse",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-32 sm:w-40 lg:w-48 min-h-[160px] bg-gray-200 dark:bg-gray-700 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 p-4 lg:p-5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-5 w-3/4 bg-gray-200 dark:bg-gray-700 rounded mb-3"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-5"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-28 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 bg-gray-200 dark:bg-gray-700 rounded-lg"}),e.jsx("div",{className:"h-9 w-24 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})]})]})]})}),Y=({searchQuery:a,setSearchQuery:b,statusFilter:u,setStatusFilter:c,propertyTypeFilter:h,setPropertyTypeFilter:d,dateRangeFilter:n,setDateRangeFilter:i,showFilters:x,setShowFilters:k,hideToggleButton:j=!1})=>{const[p,g]=C.useState(!1),y=x!==void 0?x:p,f=k||g,t=[{value:"all",label:"All Statuses"},{value:r.DRAFT,label:"Draft"},{value:r.SUBMITTED,label:"Submitted"},{value:r.UNDER_REVIEW,label:"Under Review"},{value:r.DOCUMENTS_REQUESTED,label:"Documents Requested"},{value:r.APPROVED,label:"Approved"},{value:r.REJECTED,label:"Rejected"},{value:r.WITHDRAWN,label:"Withdrawn"}],l=[{value:"all",label:"All Types"},{value:"apartment",label:"Apartment"},{value:"condo",label:"Condo"},{value:"house",label:"House"},{value:"townhouse",label:"Townhouse"}],o=u!=="all"||h!=="all"||n.start||n.end,m=()=>{c("all"),d("all"),i({start:null,end:null})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(V,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by property name, location, or application ID...",value:a,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]}),!j&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>f(!y),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(B,{size:16}),e.jsx("span",{children:"Filters"}),o&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-orange-500 text-white text-xs rounded-full",children:"Active"})]}),o&&e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(W,{size:16}),e.jsx("span",{children:"Clear Filters"})]})]}),y&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsx("select",{value:u,onChange:s=>c(s.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:t.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Property Type"}),e.jsx("select",{value:h,onChange:s=>d(s.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:l.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"date",value:n.start||"",onChange:s=>i({...n,start:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"}),e.jsx("input",{type:"date",value:n.end||"",onChange:s=>i({...n,end:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]})]})]})})]})};function oe(){const{applications:a,isLoading:b,error:u,searchQuery:c,setSearchQuery:h,statusFilter:d,setStatusFilter:n,propertyTypeFilter:i,setPropertyTypeFilter:x,dateRangeFilter:k,setDateRangeFilter:j,fetchApplications:p}=z(),[g,y]=C.useState("grid"),[f,t]=C.useState(!1),l=o=>{};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(N,{className:"text-orange-500"}),"My Applications"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Track and manage your property applications in one place."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center p-1 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-sm",children:[e.jsx("button",{onClick:()=>y("grid"),className:`p-1.5 rounded-md transition-all ${g==="grid"?"bg-orange-50 text-orange-600 dark:bg-orange-900/40 dark:text-orange-400 shadow-sm":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"}`,children:e.jsx(G,{size:18})}),e.jsx("button",{onClick:()=>y("list"),className:`p-1.5 rounded-md transition-all ${g==="list"?"bg-orange-50 text-orange-600 dark:bg-orange-900/40 dark:text-orange-400 shadow-sm":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"}`,children:e.jsx(q,{size:18})})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition-colors shadow-sm",children:[e.jsx(H,{size:18}),e.jsx("span",{children:"New Lead"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 p-4 mb-8 shadow-sm",children:e.jsx(Y,{searchQuery:c,setSearchQuery:h,statusFilter:d,setStatusFilter:n,propertyTypeFilter:i,setPropertyTypeFilter:x,dateRangeFilter:k,setDateRangeFilter:j,showFilters:f,setShowFilters:t})}),a.some(o=>o.requiresAction)&&e.jsxs("div",{className:"mb-8 p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-100 dark:border-orange-800 rounded-xl flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/40 rounded-lg",children:e.jsx(D,{className:"text-orange-600 dark:text-orange-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 dark:text-orange-100",children:"Action Required"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:'You have applications that require document uploads or additional information. Look for the orange "Action" badge below.'})]})]}),b?e.jsx("div",{className:`grid gap-6 ${g==="grid"?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"}`,children:[...Array(4)].map((o,m)=>e.jsx(J,{},m))}):u?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border dark:border-gray-700",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:e.jsx(D,{className:"text-red-500",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Failed to load applications"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 max-w-sm mx-auto",children:u}),e.jsx("button",{onClick:()=>p(),className:"mt-6 px-6 py-2 bg-gray-900 dark:bg-white dark:text-gray-900 text-white rounded-lg hover:opacity-90 transition-opacity",children:"Try Again"})]}):a.length>0?e.jsx("div",{className:`grid gap-6 ${g==="grid"?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"}`,children:a.map(o=>e.jsx(Q,{application:o,onClick:()=>l(o.id)},o.id))}):e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-2xl border dark:border-gray-700",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-700 rounded-full mb-4",children:e.jsx(N,{className:"text-gray-400",size:32})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"No applications found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 max-w-sm mx-auto",children:c||d!=="all"||i!=="all"?"We couldn't find any applications matching your filters. Try clearing them to see all applications.":"You haven't submitted any property applications yet. Start your journey by discovering properties."}),!c&&d==="all"&&i==="all"&&e.jsx("button",{className:"mt-8 px-6 py-3 bg-orange-500 text-white rounded-xl font-medium hover:bg-orange-600 transition-colors shadow-md shadow-orange-200 dark:shadow-none",children:"Discover Properties"})]})]})})}export{oe as default};
//# sourceMappingURL=page-D8zvKZE4.js.map
