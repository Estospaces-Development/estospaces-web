import{c as D,a5 as he,a6 as ue,u as E,r as i,j as e,F as H,a as G,g as ee,L as S,q as be,h as W,C as pe,k as U,H as se,X as _,am as ye,an as fe,ao as je,a2 as ve,T as Ne,S as we,w as te,B as ke}from"./index-D9fuy-ar.js";import{g as Se}from"./applicationsService-CXOy1XaX.js";import{A as V}from"./activity-DlzyI-Uo.js";import{C as $}from"./circle-check-Lj9WevXY.js";import{C as R}from"./clock-D-pnzsNv.js";import{E as Pe,K as Ce}from"./key-7rd0FkSC.js";import{M as re}from"./message-circle-Bh_ZnSbQ.js";import{A as M}from"./arrow-right-BYDXxbCW.js";import{E as ne}from"./eye-Dzbd2rxv.js";import{f as ie}from"./formatDistanceToNow-DXTjigy3.js";import{B as ze}from"./building-HY8bZul1.js";import{S as Me}from"./star-Xdww4Nds.js";import{S as ae}from"./send-DNdIEYqD.js";import _e from"./PropertyCard-CPXXlEvn.js";import{P as Ae}from"./PropertyCardSkeleton-B3DegnhR.js";import{T as Le,L as De}from"./twitter-D1XJVDGg.js";import{S as le}from"./sparkles-Cyn_GT87.js";import{T as Te}from"./trending-up-Cau2qQQ4.js";import{D as Re}from"./dollar-sign-CqDN36Ty.js";import{M as Ee}from"./map-BfPghkKA.js";import"./ShareModal-DEtDfKka.js";import"./share-2-HEVtKF6m.js";import"./maximize-DMYfH0UC.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],Be=D("bookmark",$e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Fe=D("instagram",Ie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ue=D("navigation",qe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],He=D("zoom-in",Ve);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],We=D("zoom-out",Ge),Oe=()=>ue("core"),Ye=async({status:r=null,page:s=1,limit:u=10,sortBy:x="created_at",order:p="desc"}={})=>{try{const h=new URL(`${Oe()}/api/v1/properties/mine`);h.searchParams.append("page",String(s)),h.searchParams.append("limit",String(u)),h.searchParams.append("sort_by",x),h.searchParams.append("sort_order",p),r&&h.searchParams.append("status",r);const w=await he(h.toString()),y=w.data||w,g=y.Data||y.properties||[],f=y.Pagination||y.pagination||{};return{data:g,pagination:{page:f.Page||s,limit:f.Limit||u,totalCount:f.Total||0,totalPages:f.TotalPages||0,hasNextPage:(f.Total||0)>(f.Page||s)*(f.Limit||u),hasPreviousPage:(f.Page||s)>1},error:null}}catch(h){return console.error("[userPropertiesService] Error:",h.message),{data:null,pagination:null,error:{message:h.message||"Failed to fetch properties"}}}},Ke=[{name:"Interest Registered",description:"Interest shown.",icon:M,color:"blue",tips:["Broker will contact"]},{name:"Documents Submitted",description:"Docs under review.",icon:H,color:"purple",tips:["Employment proof"],requiredDocs:["ID","References"]},{name:"Viewing Scheduled",description:"Viewing arranged.",icon:R,color:"orange",tips:["Ask about utilities"]},{name:"Tenancy Agreement",description:"Sign agreement.",icon:$,color:"green",tips:["Read terms"]}],Ze=[{name:"Property Listed",description:"Listing prepared.",icon:H,color:"blue"},{name:"Photos & Valuation",description:"Photos in progress.",icon:ne,color:"purple"},{name:"Published & Live",description:"Property is live.",icon:V,color:"green"},{name:"Viewings & Offers",description:" receiving offers.",icon:re,color:"orange"},{name:"Sale Completed",description:"Sale complete.",icon:$,color:"green"}],Qe=({stage:r,size:s=20})=>{const u=r.icon||$;return e.jsx(u,{size:s})},Xe=({event:r})=>{const s={milestone:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800",success:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 border-green-200 dark:border-green-800",action:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-800",info:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700"};return e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"flex-shrink-0 w-20 text-right text-xs text-gray-400 pt-0.5",children:ie(r.date,{addSuffix:!0})}),e.jsx("div",{className:`flex-1 px-3 py-2 rounded-lg border ${s[r.type]||s.info}`,children:r.event})]})},Je=()=>e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2].map(r=>e.jsx("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-200 dark:bg-gray-700 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded"})]})]})},r))}),et=()=>{const r=E(),[s,u]=i.useState("applications"),[x,p]=i.useState(null),[h,w]=i.useState({}),[y,g]=i.useState(!0),[f,o]=i.useState([]),[C,k]=i.useState([]);i.useEffect(()=>{(async()=>{g(!0);try{const c=await Se();if(c.data){const P=c.data.map(n=>({id:n.id,type:"rent",currentStage:n.status==="approved"?"Tenancy Agreement":n.status==="rejected"?"Application Rejected":"Documents Submitted",currentStageNumber:n.status==="approved"?4:2,totalStages:4,progress:n.status==="approved"?100:50,lastUpdated:new Date(n.updated_at),nextAction:n.status==="approved"?"Sign Agreement":"Wait for review",estimatedCompletion:"1-2 weeks",property:{id:n.property_id,title:n.propertyInterested||"Unknown Property",city:"Unknown City",price:0,image_urls:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80"]},stages:Ke.map((t,d)=>({...t,status:n.status==="approved"&&d<4||n.status!=="approved"&&d<2?"completed":n.status!=="approved"&&d===2?"current":"upcoming"}))}));o(P)}const m=await Ye({limit:50});if(m.data){const P=m.data.map(n=>({id:n.id,type:n.status==="sold"?"sell":"rent",currentStage:n.status==="available"?"Published & Live":n.status==="sold"?"Sale Completed":"Property Listed",currentStageNumber:n.status==="available"?3:n.status==="sold"?5:1,totalStages:5,progress:n.status==="available"?60:n.status==="sold"?100:20,lastUpdated:new Date(n.updated_at),nextAction:"Manage listing",property:{id:n.id,title:n.title,city:n.city||"Unknown",price:n.price||0,image_urls:n.images&&n.images.length>0?n.images:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80"]},stats:{views:n.view_count||0,inquiries:0,saved:n.favorite_count||0},stages:Ze.map((t,d)=>({...t,status:n.status==="sold"||n.status==="available"&&d<3?"completed":n.status==="available"&&d===2?"current":"upcoming"}))}));k(P)}}catch(c){console.error("Failed to fetch timeline data",c)}finally{g(!1)}})()},[]);const j=s==="applications"?f:C,N=(l,c)=>{if(l==="completed")return"bg-green-500 border-green-500 text-white";if(l==="current"){const m={blue:"bg-blue-500 border-blue-500",purple:"bg-purple-500 border-purple-500",orange:"bg-orange-500 border-orange-500",yellow:"bg-yellow-500 border-yellow-500",green:"bg-green-500 border-green-500"};return`${m[c]||m.orange} text-white ring-4 ring-orange-100 dark:ring-orange-900/30`}return"bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-400"};return e.jsxs("div",{id:"realtime-tracking-widget",className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"px-8 py-8 border-b border-gray-100 dark:border-gray-800 bg-gradient-to-r from-orange-50/50 to-transparent dark:from-orange-900/10",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:e.jsx(V,{size:28,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:["Real-Time Tracking",e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm font-semibold rounded-full",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-300 mt-1",children:"Track every step of your property journey in real-time"})]})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1.5",children:[e.jsxs("button",{onClick:()=>u("applications"),className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${s==="applications"?"bg-white dark:bg-gray-700 text-orange-600 dark:text-orange-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:["My Applications (",f.length,")"]}),e.jsxs("button",{onClick:()=>u("listings"),className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${s==="listings"?"bg-white dark:bg-gray-700 text-orange-600 dark:text-orange-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:["My Listings (",C.length,")"]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:y?e.jsx(Je,{}):j.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center",children:e.jsx(H,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:["No active ",s]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Start your property journey today"})]}):j.map(l=>{var c;return e.jsxs("div",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/30 transition-colors",children:[e.jsx("div",{className:"px-6 py-5 cursor-pointer",onClick:()=>p(x===l.id?null:l.id),children:e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:l.property.image_urls[0],alt:l.property.title,className:"w-20 h-20 rounded-xl object-cover shadow-sm bg-gray-100 dark:bg-gray-700"}),e.jsx("span",{className:`absolute -bottom-1 -left-1 px-2 py-0.5 text-[10px] font-bold rounded-md uppercase shadow-sm ${l.type==="buy"?"bg-blue-500":l.type==="rent"?"bg-purple-500":"bg-green-500"} text-white`,children:l.type})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:l.property.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mt-0.5",children:[e.jsx(G,{size:14}),l.property.city]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-xl text-gray-900 dark:text-white",children:["Â£",l.property.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Updated ",ie(l.lastUpdated,{addSuffix:!0})]})]})]}),e.jsx("div",{className:"flex items-center gap-4 mt-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${l.progress>=75?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400"}`,children:l.progress>=75?e.jsx($,{size:14}):e.jsx(R,{size:14})}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:l.currentStage}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Step ",l.currentStageNumber," of ",l.totalStages]})]}),e.jsx("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-orange-400 to-orange-500 rounded-full transition-all duration-500",style:{width:`${l.progress}%`}})})]})})]}),e.jsx(ee,{size:20,className:`text-gray-400 transition-transform duration-200 ${x===l.id?"rotate-180":""}`})]})}),x===l.id&&e.jsxs("div",{className:"px-6 pb-6 animate-fadeIn",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-5 mb-5",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(V,{size:16,className:"text-orange-500"})," Complete Journey Progress"]}),e.jsxs("div",{className:"relative space-y-4",children:[e.jsx("div",{className:"absolute left-5 top-4 bottom-4 w-0.5 bg-gray-200 dark:bg-gray-700"}),(c=l.stages)==null?void 0:c.map((m,P)=>e.jsxs("div",{className:"relative flex items-start gap-4",children:[e.jsx("div",{className:`relative z-10 w-10 h-10 rounded-full flex items-center justify-center bg-white dark:bg-gray-900 ring-4 ring-gray-50 dark:ring-gray-800 ${N(m.status,m.color)}`,children:e.jsx(Qe,{stage:m,size:16})}),e.jsxs("div",{className:"flex-1 pb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m.description})]})]},P))]})]}),l.timeline&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("button",{onClick:m=>{m.stopPropagation(),w(P=>({...P,[l.id]:!P[l.id]}))},className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-semibold flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(R,{size:16})," Activity Timeline"]}),e.jsx(ee,{size:16,className:h[l.id]?"rotate-180":""})]}),h[l.id]&&e.jsx("div",{className:"mt-3 space-y-2 pl-2",children:l.timeline.map((m,P)=>e.jsx(Xe,{event:m},P))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>r(`/user/dashboard/property/${l.property.id}`),className:"px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:["View Property ",e.jsx(Pe,{size:14})]}),e.jsxs("button",{className:"px-5 py-2.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold flex items-center gap-2",children:[e.jsx(re,{size:14})," Send Message"]})]})]})]},l.id)})})]})},tt=[{id:"agency-1",name:"Prime Estate Agents",rating:4.8,reviewCount:124,distance:"0.5 miles",address:"123 High St",image:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80",verified:!0},{id:"agency-2",name:"Luxury Living",rating:4.9,reviewCount:89,distance:"1.2 miles",address:"45 Park Lane",image:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80",verified:!0},{id:"agency-3",name:"Modern Homes UK",rating:4.6,reviewCount:205,distance:"1.8 miles",address:"78 Queen's Road",image:"https://images.unsplash.com/photo-1554469384-e58fac16e23a?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80",verified:!0}],at=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ze,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Top Rated Agencies"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Nearby professionals"})]})]}),e.jsxs(S,{to:"/user/dashboard/agencies",className:"text-xs font-semibold text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 flex items-center gap-1",children:["View All ",e.jsx(be,{size:14})]})]}),e.jsx("div",{className:"space-y-4",children:tt.map(r=>e.jsxs("div",{className:"flex items-center gap-4 group cursor-pointer",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-12 h-12 rounded-lg object-cover bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-white truncate group-hover:text-orange-600 transition-colors",children:r.name}),r.verified&&e.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded-full font-medium",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("div",{className:"flex items-center text-xs font-medium text-gray-900 dark:text-white",children:[e.jsx(Me,{size:12,className:"text-yellow-400 fill-yellow-400 mr-0.5"}),r.rating,e.jsxs("span",{className:"text-gray-400 dark:text-gray-500 font-normal ml-0.5",children:["(",r.reviewCount,")"]})]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600 text-xs",children:"â€¢"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(G,{size:10,className:"mr-0.5"}),r.distance]})]})]})]},r.id))}),e.jsx("button",{className:"w-full mt-6 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Find Agent by Postcode"})]}),st=()=>{const{user:r}=W(),[s,u]=i.useState("buy"),[x,p]=i.useState(""),[h,w]=i.useState(""),[y,g]=i.useState(""),[f,o]=i.useState(!1),[C,k]=i.useState(!1),[j,N]=i.useState(null),l=async c=>{c.preventDefault(),o(!0),N(null),k(!1);try{await new Promise(m=>setTimeout(m,1500)),k(!0),p(""),w(""),g("")}catch{N("Failed to submit request. Please try again.")}finally{o(!1)}};return C?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 h-full flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx(pe,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Request Sent!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6 max-w-xs",children:"Your request has been broadcasted to verified top-rated brokers in your area. You'll receive proposals shortly."}),e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm font-medium",children:"Send Another Request"})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(ae,{size:20,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Request a Broker"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Get proposals from top-rated agents"})]})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700/50 p-1 rounded-lg",children:["buy","rent","sell"].map(c=>e.jsx("button",{type:"button",onClick:()=>u(c),className:`flex-1 py-1.5 text-xs font-medium rounded-md capitalize transition-all ${s===c?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:c},c))}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Preferred Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{size:14,className:"absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{type:"text",value:h,onChange:c=>w(c.target.value),placeholder:"e.g. Downtown, West End",className:"w-full pl-9 pr-3 py-2 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Budget / Price Range"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-400 text-xs font-bold",children:"Â£"}),e.jsx("input",{type:"text",value:y,onChange:c=>g(c.target.value),placeholder:"e.g. 500k - 600k",className:"w-full pl-9 pr-3 py-2 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Requirements"}),e.jsx("textarea",{value:x,onChange:c=>p(c.target.value),placeholder:"e.g. 2 bedrooms, balcony, pet friendly...",rows:3,className:"w-full p-3 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all resize-none",required:!0})]})]}),j&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/10 p-2 rounded-lg",children:[e.jsx(U,{size:14}),j]}),e.jsxs("button",{type:"submit",disabled:f,className:"w-full py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-medium rounded-lg shadow-md shadow-orange-500/20 transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[f?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ae,{size:16}),f?"Broadcasting...":"Broadcast Request"]}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 dark:text-gray-500",children:"Your request will be sent to verified brokers only."})]})]})},rt=(r,s,u,x)=>{const h=(u-r)*Math.PI/180,w=(x-s)*Math.PI/180,y=Math.sin(h/2)*Math.sin(h/2)+Math.cos(r*Math.PI/180)*Math.cos(u*Math.PI/180)*Math.sin(w/2)*Math.sin(w/2);return 3959*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))},nt=({properties:r=[],userLocation:s=null,onPropertyClick:u=null})=>{var n;const x=E(),[p,h]=i.useState(null),w={lat:51.5074,lng:-.1278},[y,g]=i.useState(()=>{try{return s&&s.latitude&&s.longitude?{lat:s.latitude,lng:s.longitude}:w}catch{return w}}),[f,o]=i.useState(12),C=i.useMemo(()=>{try{return!r||!Array.isArray(r)||r.length===0?[]:!s||!s.latitude||!s.longitude?r.map(t=>({...t,distance:null,category:"other"})):r.map(t=>{if(!t||!t.latitude||!t.longitude)return{...t,distance:null,category:"other"};try{const d=rt(s.latitude,s.longitude,t.latitude,t.longitude);let b="other";return d<=1?b="very-near":d<=3?b="near":d<=5?b="moderate":b="far",{...t,distance:Math.round(d*10)/10,category:b}}catch{return{...t,distance:null,category:"other"}}})}catch{return r||[]}},[r,s]),j=i.useMemo(()=>[...C].sort((t,d)=>t.distance===null||t.distance===void 0?1:d.distance===null||d.distance===void 0?-1:t.distance-d.distance),[C]).filter(t=>t.latitude&&t.longitude),N=i.useMemo(()=>{if(j.length===0)return null;const t=j.map(b=>b.latitude),d=j.map(b=>b.longitude);return{minLat:Math.min(...t),maxLat:Math.max(...t),minLng:Math.min(...d),maxLng:Math.max(...d)}},[j]);i.useEffect(()=>{if(N&&j.length>0){const t=(N.minLat+N.maxLat)/2,d=(N.minLng+N.maxLng)/2;g({lat:t,lng:d})}else s&&s.latitude&&g({lat:s.latitude,lng:s.longitude})},[N,s,j.length]);const l=t=>{h(t),u&&u(t)},c=t=>{x(`/user/dashboard/property/${t.id}`)},m=t=>{switch(t){case"very-near":return"bg-green-500";case"near":return"bg-orange-500";case"moderate":return"bg-yellow-500";case"far":return"bg-gray-400";default:return"bg-blue-500"}},P=(t,d,b)=>{if(!b){const I=(t-y.lat)*100/.1;return{left:`${50+(d-y.lng)*100/.1}%`,top:`${50-I}%`}}const z=b.maxLat-b.minLat||.1,A=b.maxLng-b.minLng||.1,T=(d-b.minLng)/A*100,B=(b.maxLat-t)/z*100;return{left:`${Math.max(5,Math.min(95,T))}%`,top:`${Math.max(5,Math.min(95,B))}%`}};return e.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("iframe",{title:"Map View",width:"100%",height:"100%",frameBorder:0,style:{border:0,position:"absolute",inset:0,zIndex:0},src:`https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d${3e4/f}!2d${y.lng}!3d${y.lat}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e1!3m2!1sen!2suk!4v1640000000000!5m2!1sen!2suk`,allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none",children:e.jsxs("div",{className:"relative w-full h-full pointer-events-auto",children:[s&&s.latitude&&e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-20",style:P(s.latitude,s.longitude,N),children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full border-2 border-white shadow-lg flex items-center justify-center animate-pulse",children:e.jsx(Ue,{size:14,className:"text-white"})}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap bg-blue-600 text-white text-xs px-2 py-1 rounded shadow-lg",children:"Your Location"})]})}),j.map(t=>{var b;const d=P(t.latitude,t.longitude,N);return e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-10",style:d,children:e.jsxs("button",{onClick:()=>l(t),className:"relative group",children:[e.jsx("div",{className:`w-10 h-10 ${m(t.category)} rounded-full border-2 border-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer`,children:e.jsx(se,{size:20,className:"text-white"})}),t.distance!==null&&t.distance!==void 0&&e.jsxs("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:[t.distance," mi"]}),(p==null?void 0:p.id)===t.id&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm mb-1",children:t.title||"Property"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:t.address_line_1||t.city||"UK"}),e.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:["Â£",(b=t.price)==null?void 0:b.toLocaleString(),t.property_type==="rent"&&"/month"]}),t.distance!==null&&t.distance!==void 0&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.distance," miles away"]})]}),e.jsx("button",{onClick:z=>{z.stopPropagation(),h(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:e.jsx(_,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400 mb-3",children:[t.bedrooms&&t.bedrooms>0&&e.jsxs("span",{children:[t.bedrooms," Bed",t.bedrooms!==1?"s":""]}),t.bathrooms&&t.bathrooms>0&&e.jsxs("span",{children:[t.bathrooms," Bath",t.bathrooms!==1?"s":""]})]}),e.jsx("button",{onClick:()=>c(t),className:"w-full px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors",children:"View Details"})]})]})},t.id)}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 z-20",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Distance"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Very Near (<1 mi)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Near (1-3 mi)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Moderate (3-5 mi)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Far (5+ mi)"})]})]})]}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-20",children:[e.jsx("button",{onClick:()=>o(t=>Math.min(20,t+1)),className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsx(He,{size:20,className:"text-gray-700 dark:text-gray-300"})}),e.jsx("button",{onClick:()=>o(t=>Math.max(5,t-1)),className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsx(We,{size:20,className:"text-gray-700 dark:text-gray-300"})})]}),e.jsx("div",{className:"absolute top-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg px-4 py-2 z-20",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:[j.length," ",j.length===1?"Property":"Properties"," Nearby"]})})]})})]}),p&&e.jsxs("div",{className:"absolute top-4 right-4 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-30 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Property Details"}),e.jsx("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.address_line_1}),e.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:["Â£",(n=p.price)==null?void 0:n.toLocaleString(),p.property_type==="rent"&&"/month"]}),p.distance!==null&&p.distance!==void 0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.distance," miles away"]})]})]})]})},it=()=>e.jsxs("footer",{className:"bg-white mt-auto",children:[e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase mb-4",style:{color:"#1e3a5f"},children:"ESTOSPACES.COM"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(S,{to:"/contact",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Contact Us"})}),e.jsx("li",{children:e.jsx(S,{to:"/faq",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"FAQ"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase mb-4",style:{color:"#1e3a5f"},children:"Search"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?tab=buy&type=residential",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Search homes for sale"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?tab=rent&type=residential",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Search homes for rent"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?tab=buy&type=commercial",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Commercial for sale"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?tab=rent&type=commercial",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Commercial to rent"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?new=true&tab=buy",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"New homes"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase mb-4",style:{color:"#1e3a5f"},children:"Locations"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?location=uk",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Major towns and cities in the UK"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?location=london",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"London"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?location=cornwall",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Cornwall"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?location=glasgow",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Glasgow"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?location=cardiff",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Cardiff"})}),e.jsx("li",{children:e.jsx(S,{to:"/user/dashboard/discover?location=edinburgh",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Edinburgh"})})]})]})]})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Â© 2026 Estospaces. All rights reserved."}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-700",children:[e.jsx(S,{to:"/privacy",className:"hover:text-orange-600 transition-colors",children:"Privacy Policy"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx(S,{to:"/cookies",className:"hover:text-orange-600 transition-colors",children:"Cookie Policy"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx(S,{to:"/terms",className:"hover:text-orange-600 transition-colors",children:"Terms & Conditions"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"https://x.com/ESTOSPACES",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-orange-600 transition-colors","aria-label":"X (Twitter)",children:e.jsx(Le,{size:18})}),e.jsx("a",{href:"https://www.instagram.com/estospaces/ram",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-orange-600 transition-colors","aria-label":"Instagram",children:e.jsx(Fe,{size:18})}),e.jsx("a",{href:"https://www.linkedin.com/company/estospaces-solutions-private-limited/?viewAsMember=true",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-orange-600 transition-colors","aria-label":"LinkedIn",children:e.jsx(De,{size:18})})]})]})})})]}),lt=()=>{const r=E(),{user:s,loading:u}=W(),[x,p]=i.useState(!0);return i.useMemo(()=>{var y,g;if(u||!s)return!1;const h=(s==null?void 0:s.name)||((y=s==null?void 0:s.user_metadata)==null?void 0:y.full_name),w=(g=s==null?void 0:s.user_metadata)==null?void 0:g.phone;return!h||!w},[s,u]),!s||!x?null:e.jsx("div",{id:"profile-widget",className:"animate-slideInRight",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-orange-400/50 to-pink-600/50 rounded-xl opacity-50 blur-sm group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-pulse"}),e.jsxs("div",{className:"relative flex items-center gap-4 bg-white dark:bg-gray-800 p-3 pr-8 rounded-xl shadow-lg max-w-sm hover:shadow-xl transition-shadow duration-300",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-50 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:e.jsx(le,{size:18,className:"text-orange-500"})}),e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white leading-tight",children:"Complete Profile"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 leading-tight",children:"Unlock verified access"})]}),e.jsx("button",{onClick:()=>r("/user/dashboard/profile"),className:"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full hover:scale-105 transition-transform shadow-md",children:e.jsx(M,{size:14})}),e.jsx("button",{onClick:()=>p(!1),className:"absolute top-2 right-2 w-5 h-5 bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 rounded-full flex items-center justify-center hover:bg-red-50 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(_,{size:10})})]})]})})},ot=()=>{var O,Y,K,Z,Q,X;const r=E(),[s,u]=ye(),{user:x}=W(),{activeLocation:p,loading:h}=fe(),{setActiveTab:w}=je(),{savedProperties:y}=ve(),[g,f]=i.useState(()=>{const a=s.get("type");return a==="buy"||a==="rent"||a==="sold"?a:"sold"}),[o,C]=i.useState(()=>{const a=s.get("filter");return a?a.split(",").filter(v=>v):[]}),[k,j]=i.useState(()=>s.get("location")||""),[N,l]=i.useState(!1),[c,m]=i.useState(null),[P,n]=i.useState(null),[t,d]=i.useState([]),[b,z]=i.useState(!1),[A,T]=i.useState(0);i.useEffect(()=>{const a=s.get("type");a==="buy"||a==="rent"||a==="sold"?f(a):a||f("sold")},[s]),i.useEffect(()=>{const a=s.get("filter");C(a?a.split(",").filter(v=>v):[])},[s]);const B=()=>{const a=new Date().getHours();return a<12?"Good morning":a<17?"Good afternoon":"Good evening"},I=((Y=(O=x==null?void 0:x.user_metadata)==null?void 0:O.full_name)==null?void 0:Y.split(" ")[0])||((Z=(K=x==null?void 0:x.user_metadata)==null?void 0:K.name)==null?void 0:Z.split(" ")[0])||((Q=x==null?void 0:x.name)==null?void 0:Q.split(" ")[0])||((X=x==null?void 0:x.email)==null?void 0:X.split("@")[0])||"there",F=i.useCallback(async()=>{l(!0),m(null),z(!0);try{const a={search:k.trim(),listingType:g==="rent"?["rent"]:["sale"]};g==="sold"&&(a.status=["sold"]);const v=await Ne(a);v.error?(m(v.error),d([]),T(0)):v.data&&(d(v.data),T(v.data.length),v.data.length===0&&n("No properties found matching your search. Try adjusting your criteria."))}catch(a){console.error("[Dashboard] Error filtering properties:",a),m(a.message)}finally{l(!1)}},[g,o,k]),oe=i.useCallback(a=>{if(a==null||a.preventDefault(),m(null),n(null),o.length>0||k.trim())F();else{const v=new URLSearchParams;g==="buy"?v.set("tab","buy"):g==="rent"?v.set("tab","rent"):g==="sold"&&(v.set("tab","buy"),v.set("status","sold")),r(`/user/dashboard/discover?${v.toString()}`)}},[k,g,o,r,F]),de=p||{type:"default",postcode:"SW1A 1AA",latitude:51.5074,longitude:-.1278,city:"London",source:"default"},ce=i.useMemo(()=>t.filter(a=>a&&a.latitude&&a.longitude),[t]);return e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto dark:bg-[#0a0a0a] min-h-screen transition-all duration-300",children:[e.jsxs("div",{id:"greeting-section",className:"flex items-center justify-between animate-fadeIn",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-semibold text-gray-900 dark:text-white",children:[B(),", ",e.jsx("span",{className:"text-orange-500 capitalize",children:I})," ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"What would you like to do today?"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(lt,{})})]}),e.jsxs("div",{id:"hero-search",className:"relative rounded-3xl shadow-soft-xl overflow-hidden min-h-[500px] lg:min-h-[550px] flex flex-col items-center justify-center animate-fadeIn group",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-transform duration-1000 group-hover:scale-105",style:{backgroundImage:"url('https://images.pexels.com/photos/8293778/pexels-photo-8293778.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&dpr=2')"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/70 via-gray-900/50 to-orange-900/30"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-20 bg-gradient-to-b from-black/20 to-transparent"}),e.jsxs("div",{className:"relative z-10 text-center px-4 md:px-6 max-w-5xl mx-auto w-full",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight tracking-tight animate-slideUp",style:{textShadow:"0 4px 20px rgba(0,0,0,0.5), 0 2px 8px rgba(0,0,0,0.3)"},children:["Find your ",e.jsx("span",{className:"text-orange-400",style:{textShadow:"0 4px 20px rgba(251,146,60,0.4), 0 2px 8px rgba(0,0,0,0.3)"},children:"perfect space"})]}),e.jsx("p",{className:"text-white text-lg md:text-xl mb-10 max-w-2xl mx-auto animate-slideUp font-medium tracking-wide",style:{animationDelay:"0.1s",textShadow:"0 2px 12px rgba(0,0,0,0.5), 0 1px 4px rgba(0,0,0,0.3)"},children:"Discover thousands of premium properties for sale and rent across the UK"}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl rounded-3xl p-6 lg:p-8 shadow-2xl max-w-4xl mx-auto animate-slideUp border border-white/50 ring-1 ring-black/5",style:{animationDelay:"0.2s"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-gray-100/80 p-1.5 rounded-2xl w-fit mx-auto border border-gray-200/50",children:[e.jsx("button",{type:"button",onClick:a=>{a.preventDefault(),f("buy"),u({type:"buy"},{replace:!0})},className:`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${g==="buy"?"bg-white text-orange-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Buy"}),e.jsx("button",{type:"button",onClick:a=>{a.preventDefault(),f("rent"),u({type:"rent"},{replace:!0})},className:`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${g==="rent"?"bg-white text-orange-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Rent"}),e.jsx("button",{type:"button",onClick:a=>{a.preventDefault(),f("sold"),u({type:"sold"},{replace:!0})},className:`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${g==="sold"?"bg-white text-orange-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Sold"})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-8",children:[{id:"all",label:"All Properties",icon:le},{id:"recently_added",label:"Recently Added",icon:R},{id:"most_viewed",label:"Most Visited",icon:ne},{id:"high_demand",label:"High Demand",icon:Te},{id:"budget_friendly",label:"Budget Friendly",icon:Re}].map(a=>{const v=a.icon,xe=a.id==="all"&&o.length===0,J=a.id==="all"?xe:o.includes(a.id);return e.jsxs("button",{type:"button",onClick:ge=>{ge.preventDefault();let L;a.id==="all"?L=[]:o.includes(a.id)?L=o.filter(me=>me!==a.id):L=[...o,a.id],C(L);const q=new URLSearchParams(s);L.length===0?q.delete("filter"):q.set("filter",L.join(",")),u(q,{replace:!0})},className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border ${J?"bg-orange-50 text-orange-600 border-orange-200 shadow-none":"bg-white text-gray-600 border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(v,{size:16,className:J?"text-orange-500":"text-gray-400"}),e.jsx("span",{children:a.label})]},a.id)})}),e.jsxs("form",{onSubmit:oe,className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative group/input",children:[e.jsx(we,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within/input:text-orange-500 transition-colors",size:22}),e.jsx("input",{type:"text",value:k,onChange:a=>j(a.target.value),placeholder:"Enter postcode, city, or area...",className:"w-full pl-14 pr-12 py-4 bg-gray-50 hover:bg-white border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl text-gray-900 placeholder-gray-400 text-lg transition-all duration-300 outline-none shadow-inner",disabled:N}),k&&e.jsx("button",{type:"button",onClick:()=>j(""),className:"absolute right-5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:e.jsx(_,{size:20})})]}),e.jsx("button",{type:"submit",disabled:N,className:"px-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 active:from-orange-700 active:to-orange-800 text-white rounded-2xl font-bold text-lg transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-3 min-w-[160px] shadow-lg shadow-orange-500/30 hover:shadow-orange-500/40 transform hover:-translate-y-1",children:N?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"animate-spin",size:24}),e.jsx("span",{children:"Searching"})]}):e.jsx("span",{children:"Search"})})]})]})]})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-gray-100 rounded-2xl animate-pulse"}),children:e.jsx(st,{})})}),e.jsx("div",{children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-gray-100 rounded-2xl animate-pulse"}),children:e.jsx(at,{})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{w("buy"),r("/user/dashboard/discover?tab=buy")},className:"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"p-3.5 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-violet-500/25",children:e.jsx(ke,{size:24,className:"text-white",strokeWidth:1.5})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Buy Property"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Find your dream home"}),e.jsxs("span",{className:"text-violet-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all",children:["Browse ",e.jsx(M,{size:14})]})]}),e.jsxs("button",{onClick:()=>{w("rent"),r("/user/dashboard/discover?tab=rent")},className:"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"p-3.5 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-cyan-500/25",children:e.jsx(Ce,{size:24,className:"text-white",strokeWidth:1.5})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Rent Property"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Explore rentals"}),e.jsxs("span",{className:"text-cyan-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all",children:["Explore ",e.jsx(M,{size:14})]})]}),e.jsxs("button",{onClick:()=>r("/user/dashboard/saved"),className:"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"p-3.5 bg-gradient-to-br from-rose-500 to-pink-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-rose-500/25",children:e.jsx(Be,{size:24,className:"text-white",strokeWidth:1.5})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Saved"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:[(y==null?void 0:y.length)||0," properties"]}),e.jsxs("span",{className:"text-rose-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all",children:["View All ",e.jsx(M,{size:14})]})]})]}),e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl animate-pulse"}),children:e.jsx(et,{})})]}),b&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-orange-500",children:[o.includes("recently_added")&&"Recently Added Properties",o.includes("most_viewed")&&!o.includes("recently_added")&&"Most Visited Properties",o.includes("high_demand")&&!o.includes("recently_added")&&!o.includes("most_viewed")&&"High Demand Properties",o.includes("budget_friendly")&&!o.includes("recently_added")&&!o.includes("most_viewed")&&!o.includes("high_demand")&&"Budget Friendly Properties",o.length===0&&k&&`Properties in "${k}"`,o.length===0&&!k&&"Search Results"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:N?"Loading...":`${A} ${A===1?"property":"properties"} found`})]}),e.jsxs("button",{onClick:()=>{z(!1),d([]),C([]),j("")},className:"text-sm text-orange-600 hover:text-orange-700 font-medium flex items-center gap-1",children:[e.jsx(_,{size:16}),"Clear Results"]})]}),N?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(a=>e.jsx(Ae,{},a))}):t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>e.jsx(_e,{property:a,onViewDetails:v=>r(`/user/dashboard/property/${v.id}`)},a.id))}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(se,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Try adjusting your filters or search criteria"}),e.jsx("button",{onClick:()=>{z(!1),C([]),j(""),r("/user/dashboard/discover")},className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors",children:"Browse All Properties"})]}),t.length>0&&A>12&&e.jsx("div",{className:"text-center mt-6",children:e.jsxs("button",{onClick:()=>{const a=new URLSearchParams;a.set("tab",g==="rent"?"rent":"buy"),o.length>0&&a.set("filter",o.join(",")),k&&a.set("location",k),r(`/user/dashboard/discover?${a.toString()}`)},className:"px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition-colors inline-flex items-center gap-2",children:["View All ",A," Properties",e.jsx(M,{size:18})]})})]}),c&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-slideDown",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/40 rounded-lg",children:e.jsx(U,{className:"text-red-600 dark:text-red-400",size:18})}),e.jsx("p",{className:"flex-1 text-sm font-medium text-red-800 dark:text-red-200",children:c}),e.jsx("button",{onClick:()=>m(null),className:"text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 p-1.5 rounded-lg transition-colors",children:e.jsx(_,{size:16})})]}),P&&!c&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex items-center gap-3 animate-slideDown",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg",children:e.jsx(U,{className:"text-amber-600 dark:text-amber-400",size:18})}),e.jsx("p",{className:"flex-1 text-sm text-amber-800 dark:text-amber-200",children:P}),e.jsx("button",{onClick:()=>n(null),className:"text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 p-1.5 rounded-lg transition-colors",children:e.jsx(_,{size:16})})]}),!b&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"text-orange-500",size:20}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-orange-500",children:"Nearby Properties"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:"Explore properties on the map - click markers to view details"})]}),e.jsxs("button",{onClick:()=>r("/user/dashboard/discover"),className:"flex items-center gap-2 px-4 py-2 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 text-sm font-medium transition-colors",children:[e.jsx("span",{children:"Browse All Properties"}),e.jsx(M,{size:16})]})]}),h?e.jsx("div",{className:"bg-white dark:bg-white rounded-lg shadow-sm border border-gray-200 dark:border-gray-300 overflow-hidden",children:e.jsx("div",{className:"h-[600px] lg:h-[700px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"animate-spin mx-auto mb-4 text-orange-500",size:48}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading nearby properties..."})]})})}):e.jsx("div",{className:"bg-white dark:bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"h-[600px] lg:h-[700px]",children:e.jsx(nt,{properties:ce,userLocation:de,onPropertyClick:a=>r(`/user/dashboard/property/${a.id}`)})})})]}),e.jsx(it,{})]})};function Lt(){return e.jsx(ot,{})}export{Lt as default};
//# sourceMappingURL=page-UeymxjdF.js.map
