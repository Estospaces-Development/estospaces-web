{"version":3,"file":"page-UeymxjdF.js","sources":["../../node_modules/lucide-react/dist/esm/icons/bookmark.js","../../node_modules/lucide-react/dist/esm/icons/instagram.js","../../node_modules/lucide-react/dist/esm/icons/navigation.js","../../node_modules/lucide-react/dist/esm/icons/zoom-in.js","../../node_modules/lucide-react/dist/esm/icons/zoom-out.js","../../src/services/userPropertiesService.ts","../../src/components/dashboard/ApplicationTimelineWidget.tsx","../../src/components/dashboard/NearbyAgenciesList.tsx","../../src/components/dashboard/BrokerRequestWidget.tsx","../../src/components/dashboard/NearbyPropertiesMap.tsx","../../src/components/dashboard/DashboardFooter.tsx","../../src/components/dashboard/ProfileCompletionCard.tsx","../../src/pages/user/dashboard/DashboardClient.tsx","../../src/pages/user/dashboard/page.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z\",\n      key: \"oz39mx\"\n    }\n  ]\n];\nconst Bookmark = createLucideIcon(\"bookmark\", __iconNode);\n\nexport { __iconNode, Bookmark as default };\n//# sourceMappingURL=bookmark.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"20\", height: \"20\", x: \"2\", y: \"2\", rx: \"5\", ry: \"5\", key: \"2e1cvw\" }],\n  [\"path\", { d: \"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z\", key: \"9exkf1\" }],\n  [\"line\", { x1: \"17.5\", x2: \"17.51\", y1: \"6.5\", y2: \"6.5\", key: \"r4j83e\" }]\n];\nconst Instagram = createLucideIcon(\"instagram\", __iconNode);\n\nexport { __iconNode, Instagram as default };\n//# sourceMappingURL=instagram.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"polygon\", { points: \"3 11 22 2 13 21 11 13 3 11\", key: \"1ltx0t\" }]\n];\nconst Navigation = createLucideIcon(\"navigation\", __iconNode);\n\nexport { __iconNode, Navigation as default };\n//# sourceMappingURL=navigation.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n];\nconst ZoomIn = createLucideIcon(\"zoom-in\", __iconNode);\n\nexport { __iconNode, ZoomIn as default };\n//# sourceMappingURL=zoom-in.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n];\nconst ZoomOut = createLucideIcon(\"zoom-out\", __iconNode);\n\nexport { __iconNode, ZoomOut as default };\n//# sourceMappingURL=zoom-out.js.map\n","/**\r\n * User Properties Service\r\n * Fetches user's own properties from core-service backend\r\n * (replaces old Supabase-direct queries)\r\n */\r\n\r\nimport { apiFetch, getServiceUrl } from '@/lib/apiUtils';\r\n\r\nconst CORE_URL = () => getServiceUrl('core');\r\n\r\ninterface UserPropertyFilters {\r\n    status?: string | null;\r\n    page?: number;\r\n    limit?: number;\r\n    sortBy?: string;\r\n    order?: 'asc' | 'desc';\r\n}\r\n\r\n/**\r\n * Fetch properties owned/managed by the current user\r\n * GET /api/v1/properties/mine (core-service)\r\n */\r\nexport const getUserProperties = async ({\r\n    status = null,\r\n    page = 1,\r\n    limit = 10,\r\n    sortBy = 'created_at',\r\n    order = 'desc',\r\n}: UserPropertyFilters = {}) => {\r\n    try {\r\n        const url = new URL(`${CORE_URL()}/api/v1/properties/mine`);\r\n        url.searchParams.append('page', String(page));\r\n        url.searchParams.append('limit', String(limit));\r\n        url.searchParams.append('sort_by', sortBy);\r\n        url.searchParams.append('sort_order', order);\r\n        if (status) url.searchParams.append('status', status);\r\n\r\n        const data = await apiFetch<any>(url.toString());\r\n        // The backend returns { success: true, data: { data: [...], pagination: {...} } } or similar wrapper\r\n        // But apiFetch usually unwraps the response if it's standard JSON.\r\n        // Let's assume apiFetch returns the parsed JSON body.\r\n        // Our backend handler returns { success: true, data: { properties: [], pagination: {} } } check properties/service.go\r\n        // Actually service.GetProperties returns PropertyListResponse { Data, Pagination }\r\n        // Handler wraps it in { success: true, data: result }\r\n        // So apiFetch returns { success: true, data: { Data: [], Pagination: {} } }\r\n\r\n        // Wait, let's checking apiFetch implementation or usage pattern.\r\n        // Assuming apiFetch returns the `data` field if the response structure is { data: ... } is common but risky assumption.\r\n        // Let's look at `apiFetch` in `estospaces-web/src/lib/apiUtils.ts` if needed, but for now I'll stick to the previous pattern in this file\r\n        // which handled `data.properties || data`.\r\n\r\n        // The previous implementation was:\r\n        // const data = await apiFetch<any>(url.toString());\r\n        // const properties = Array.isArray(data) ? data : (data.properties || data);\r\n\r\n        // Our new handler returns: c.JSON(fiber.Map{\"success\": true, \"data\": result}) where result has Data and Pagination.\r\n\r\n        const responseHelper = data.data || data; // properties list response\r\n        const properties = responseHelper.Data || responseHelper.properties || [];\r\n        const pagination = responseHelper.Pagination || responseHelper.pagination || {};\r\n\r\n        return {\r\n            data: properties,\r\n            pagination: {\r\n                page: pagination.Page || page,\r\n                limit: pagination.Limit || limit,\r\n                totalCount: pagination.Total || 0,\r\n                totalPages: pagination.TotalPages || 0,\r\n                hasNextPage: (pagination.Total || 0) > (pagination.Page || page) * (pagination.Limit || limit),\r\n                hasPreviousPage: (pagination.Page || page) > 1,\r\n            },\r\n            error: null,\r\n        };\r\n    } catch (error: any) {\r\n        console.error('[userPropertiesService] Error:', error.message);\r\n        return {\r\n            data: null,\r\n            pagination: null,\r\n            error: { message: error.message || 'Failed to fetch properties' },\r\n        };\r\n    }\r\n};\r\n\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    CheckCircle2, Clock, MapPin, ChevronDown, Activity, FileText,\r\n    Loader2, Eye, MessageCircle, ArrowRight,\r\n    Phone, AlertCircle, Info, ExternalLink, Send\r\n} from 'lucide-react';\r\nimport { format, formatDistanceToNow } from 'date-fns';\r\n\r\n// --- Types & Interfaces ---\r\n\r\ninterface Stage {\r\n    name: string;\r\n    description: string;\r\n    icon: any;\r\n    color: string;\r\n    tips?: string[];\r\n    requiredDocs?: string[];\r\n    status?: 'completed' | 'current' | 'upcoming';\r\n    completedAt?: Date | null;\r\n}\r\n\r\ninterface TimelineEventType {\r\n    date: Date;\r\n    event: string;\r\n    type: 'milestone' | 'success' | 'action' | 'info';\r\n}\r\n\r\ninterface ApplicationItem {\r\n    id: string;\r\n    type: 'buy' | 'rent' | 'sell';\r\n    currentStage: string;\r\n    currentStageNumber: number;\r\n    totalStages: number;\r\n    progress: number;\r\n    lastUpdated: Date;\r\n    nextAction: string;\r\n    viewingDate?: Date;\r\n    estimatedCompletion?: string;\r\n    property: {\r\n        id: string;\r\n        title: string;\r\n        city: string;\r\n        price: number;\r\n        image_urls: string[];\r\n    };\r\n    broker?: {\r\n        name: string;\r\n        phone: string;\r\n        avatar: string;\r\n    };\r\n    stages?: Stage[];\r\n    timeline?: TimelineEventType[];\r\n    stats?: { views: number; inquiries: number; saved: number };\r\n}\r\n\r\n// --- Constants & Config ---\r\n\r\nconst BUY_STAGES: Stage[] = [\r\n    { name: 'Application Submitted', description: 'Your buying application has been received.', icon: Send, color: 'blue', tips: ['Ensure documents ready'] },\r\n    { name: 'Document Verification', description: 'Verifying identity and funds.', icon: FileText, color: 'purple', tips: ['Upload ID'], requiredDocs: ['ID', 'Proof of Funds'] },\r\n    { name: 'Property Inspection', description: 'Schedule viewing.', icon: Eye, color: 'orange', tips: ['Check structure'] },\r\n    { name: 'Offer Negotiation', description: 'Offer under review.', icon: MessageCircle, color: 'yellow', tips: ['Set budget'] },\r\n    { name: 'Completion', description: 'Finalize contracts.', icon: CheckCircle2, color: 'green', tips: ['Sign contracts'] }\r\n];\r\n\r\nconst RENT_STAGES: Stage[] = [\r\n    { name: 'Interest Registered', description: 'Interest shown.', icon: ArrowRight, color: 'blue', tips: ['Broker will contact'] },\r\n    { name: 'Documents Submitted', description: 'Docs under review.', icon: FileText, color: 'purple', tips: ['Employment proof'], requiredDocs: ['ID', 'References'] },\r\n    { name: 'Viewing Scheduled', description: 'Viewing arranged.', icon: Clock, color: 'orange', tips: ['Ask about utilities'] },\r\n    { name: 'Tenancy Agreement', description: 'Sign agreement.', icon: CheckCircle2, color: 'green', tips: ['Read terms'] }\r\n];\r\n\r\nconst SELL_STAGES: Stage[] = [\r\n    { name: 'Property Listed', description: 'Listing prepared.', icon: FileText, color: 'blue' },\r\n    { name: 'Photos & Valuation', description: 'Photos in progress.', icon: Eye, color: 'purple' },\r\n    { name: 'Published & Live', description: 'Property is live.', icon: Activity, color: 'green' },\r\n    { name: 'Viewings & Offers', description: ' receiving offers.', icon: MessageCircle, color: 'orange' },\r\n    { name: 'Sale Completed', description: 'Sale complete.', icon: CheckCircle2, color: 'green' }\r\n];\r\n\r\n\r\n\r\n// --- Subcomponents ---\r\n\r\nconst StageIcon: React.FC<{ stage: Stage; size?: number }> = ({ stage, size = 20 }) => {\r\n    const IconComponent = stage.icon || CheckCircle2;\r\n    return <IconComponent size={size} />;\r\n};\r\n\r\nconst TimelineEvent: React.FC<{ event: TimelineEventType }> = ({ event }) => {\r\n    const typeStyles = {\r\n        milestone: 'bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800',\r\n        success: 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 border-green-200 dark:border-green-800',\r\n        action: 'bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-800',\r\n        info: 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700'\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-start gap-3 text-sm\">\r\n            <div className=\"flex-shrink-0 w-20 text-right text-xs text-gray-400 pt-0.5\">\r\n                {formatDistanceToNow(event.date, { addSuffix: true })}\r\n            </div>\r\n            <div className={`flex-1 px-3 py-2 rounded-lg border ${typeStyles[event.type] || typeStyles.info}`}>\r\n                {event.event}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst TimelineSkeleton = () => (\r\n    <div className=\"animate-pulse space-y-4\">\r\n        {[1, 2].map((i) => (\r\n            <div key={i} className=\"px-6 py-5 border-b border-gray-100 dark:border-gray-800\">\r\n                <div className=\"flex items-start gap-5\">\r\n                    <div className=\"w-20 h-20 rounded-xl bg-gray-200 dark:bg-gray-700 flex-shrink-0\" />\r\n                    <div className=\"flex-1 space-y-3\">\r\n                        <div className=\"h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded\" />\r\n                        <div className=\"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        ))}\r\n    </div>\r\n);\r\n\r\n// --- Main Component ---\r\n\r\nimport { getApplications } from '../../services/applicationsService';\r\nimport { getUserProperties } from '../../services/userPropertiesService';\r\n\r\nconst ApplicationTimelineWidget = () => {\r\n    const navigate = useNavigate();\r\n    const [activeTab, setActiveTab] = useState<'applications' | 'listings'>('applications');\r\n    const [expandedId, setExpandedId] = useState<string | null>(null);\r\n    const [showTimeline, setShowTimeline] = useState<Record<string, boolean>>({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [applications, setApplications] = useState<ApplicationItem[]>([]);\r\n    const [listings, setListings] = useState<ApplicationItem[]>([]);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Fetch Applications\r\n                const appsRes = await getApplications();\r\n                if (appsRes.data) {\r\n                    const mappedApps: ApplicationItem[] = appsRes.data.map((app: any) => ({\r\n                        id: app.id,\r\n                        type: 'rent', //Defaulting to rent as most applications are for rentals\r\n                        currentStage: app.status === 'approved' ? 'Tenancy Agreement' : app.status === 'rejected' ? 'Application Rejected' : 'Documents Submitted',\r\n                        currentStageNumber: app.status === 'approved' ? 4 : 2,\r\n                        totalStages: 4,\r\n                        progress: app.status === 'approved' ? 100 : 50,\r\n                        lastUpdated: new Date(app.updated_at),\r\n                        nextAction: app.status === 'approved' ? 'Sign Agreement' : 'Wait for review',\r\n                        estimatedCompletion: '1-2 weeks',\r\n                        property: {\r\n                            id: app.property_id,\r\n                            title: app.propertyInterested || 'Unknown Property',\r\n                            city: 'Unknown City', // Placeholder\r\n                            price: 0, // Placeholder\r\n                            image_urls: ['https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80'] // Placeholder\r\n                        },\r\n                        stages: RENT_STAGES.map((s, i) => ({\r\n                            ...s,\r\n                            status: (app.status === 'approved' && i < 4) || (app.status !== 'approved' && i < 2) ? 'completed' : (app.status !== 'approved' && i === 2) ? 'current' : 'upcoming'\r\n                        }))\r\n                    }));\r\n                    setApplications(mappedApps);\r\n                }\r\n\r\n                // Fetch Listings (User Properties)\r\n                const propsRes = await getUserProperties({ limit: 50 });\r\n                if (propsRes.data) {\r\n                    const mappedProps: ApplicationItem[] = propsRes.data.map((prop: any) => ({\r\n                        id: prop.id,\r\n                        type: prop.status === 'sold' ? 'sell' : 'rent', // Infer type\r\n                        currentStage: prop.status === 'available' ? 'Published & Live' : prop.status === 'sold' ? 'Sale Completed' : 'Property Listed',\r\n                        currentStageNumber: prop.status === 'available' ? 3 : prop.status === 'sold' ? 5 : 1,\r\n                        totalStages: 5,\r\n                        progress: prop.status === 'available' ? 60 : prop.status === 'sold' ? 100 : 20,\r\n                        lastUpdated: new Date(prop.updated_at),\r\n                        nextAction: 'Manage listing',\r\n                        property: {\r\n                            id: prop.id,\r\n                            title: prop.title,\r\n                            city: prop.city || 'Unknown',\r\n                            price: prop.price || 0,\r\n                            image_urls: prop.images && prop.images.length > 0 ? prop.images : ['https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80']\r\n                        },\r\n                        stats: { views: prop.view_count || 0, inquiries: 0, saved: prop.favorite_count || 0 },\r\n                        stages: SELL_STAGES.map((s, i) => ({\r\n                            ...s,\r\n                            status: (prop.status === 'sold') ? 'completed' : (prop.status === 'available' && i < 3) ? 'completed' : (prop.status === 'available' && i === 2) ? 'current' : 'upcoming'\r\n                        }))\r\n                    }));\r\n                    setListings(mappedProps);\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch timeline data\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const dataToShow = activeTab === 'applications' ? applications : listings;\r\n\r\n    const getStageColor = (status: string | undefined, color: string) => {\r\n        if (status === 'completed') return 'bg-green-500 border-green-500 text-white';\r\n        if (status === 'current') {\r\n            const colors: any = {\r\n                blue: 'bg-blue-500 border-blue-500',\r\n                purple: 'bg-purple-500 border-purple-500',\r\n                orange: 'bg-orange-500 border-orange-500',\r\n                yellow: 'bg-yellow-500 border-yellow-500',\r\n                green: 'bg-green-500 border-green-500'\r\n            };\r\n            return `${colors[color] || colors.orange} text-white ring-4 ring-orange-100 dark:ring-orange-900/30`;\r\n        }\r\n        return 'bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-400';\r\n    };\r\n\r\n    return (\r\n        <div id=\"realtime-tracking-widget\" className=\"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"px-8 py-8 border-b border-gray-100 dark:border-gray-800 bg-gradient-to-r from-orange-50/50 to-transparent dark:from-orange-900/10\">\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-xl\">\r\n                            <Activity size={28} className=\"text-orange-600 dark:text-orange-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3\">\r\n                                Real-Time Tracking\r\n                                <span className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm font-semibold rounded-full\">\r\n                                    <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\r\n                                    Live\r\n                                </span>\r\n                            </h2>\r\n                            <p className=\"text-base text-gray-600 dark:text-gray-300 mt-1\">\r\n                                Track every step of your property journey in real-time\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1.5\">\r\n                        <button onClick={() => setActiveTab('applications')} className={`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${activeTab === 'applications' ? 'bg-white dark:bg-gray-700 text-orange-600 dark:text-orange-400 shadow-sm' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'}`}>\r\n                            My Applications ({applications.length})\r\n                        </button>\r\n                        <button onClick={() => setActiveTab('listings')} className={`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${activeTab === 'listings' ? 'bg-white dark:bg-gray-700 text-orange-600 dark:text-orange-400 shadow-sm' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'}`}>\r\n                            My Listings ({listings.length})\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"divide-y divide-gray-100 dark:divide-gray-800\">\r\n                {loading ? <TimelineSkeleton /> : dataToShow.length === 0 ? (\r\n                    <div className=\"py-16 text-center\">\r\n                        <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center\">\r\n                            <FileText className=\"w-8 h-8 text-gray-400\" />\r\n                        </div>\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-1\">No active {activeTab}</h3>\r\n                        <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Start your property journey today</p>\r\n                    </div>\r\n                ) : (\r\n                    dataToShow.map((item) => (\r\n                        <div key={item.id} className=\"hover:bg-gray-50/50 dark:hover:bg-gray-800/30 transition-colors\">\r\n                            <div className=\"px-6 py-5 cursor-pointer\" onClick={() => setExpandedId(expandedId === item.id ? null : item.id)}>\r\n                                <div className=\"flex items-start gap-5\">\r\n                                    <div className=\"relative flex-shrink-0\">\r\n                                        <img src={item.property.image_urls[0]} alt={item.property.title} className=\"w-20 h-20 rounded-xl object-cover shadow-sm bg-gray-100 dark:bg-gray-700\" />\r\n                                        <span className={`absolute -bottom-1 -left-1 px-2 py-0.5 text-[10px] font-bold rounded-md uppercase shadow-sm ${item.type === 'buy' ? 'bg-blue-500' : item.type === 'rent' ? 'bg-purple-500' : 'bg-green-500'} text-white`}>\r\n                                            {item.type}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"flex items-start justify-between mb-2\">\r\n                                            <div>\r\n                                                <h3 className=\"font-semibold text-gray-900 dark:text-white text-lg\">{item.property.title}</h3>\r\n                                                <p className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mt-0.5\"><MapPin size={14} />{item.property.city}</p>\r\n                                            </div>\r\n                                            <div className=\"text-right\">\r\n                                                <p className=\"font-bold text-xl text-gray-900 dark:text-white\">£{item.property.price.toLocaleString()}</p>\r\n                                                <p className=\"text-xs text-gray-400 mt-1\">Updated {formatDistanceToNow(item.lastUpdated, { addSuffix: true })}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-4 mt-3\">\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                                    <div className={`w-6 h-6 rounded-full flex items-center justify-center ${item.progress >= 75 ? 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400' : 'bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400'}`}>\r\n                                                        {item.progress >= 75 ? <CheckCircle2 size={14} /> : <Clock size={14} />}\r\n                                                    </div>\r\n                                                    <span className=\"font-semibold text-gray-900 dark:text-white\">{item.currentStage}</span>\r\n                                                    <span className=\"text-sm text-gray-400\">Step {item.currentStageNumber} of {item.totalStages}</span>\r\n                                                </div>\r\n                                                <div className=\"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\r\n                                                    <div className=\"absolute inset-y-0 left-0 bg-gradient-to-r from-orange-400 to-orange-500 rounded-full transition-all duration-500\" style={{ width: `${item.progress}%` }} />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <ChevronDown size={20} className={`text-gray-400 transition-transform duration-200 ${expandedId === item.id ? 'rotate-180' : ''}`} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {expandedId === item.id && (\r\n                                <div className=\"px-6 pb-6 animate-fadeIn\">\r\n                                    <div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-5 mb-5\">\r\n                                        <h4 className=\"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2\"><Activity size={16} className=\"text-orange-500\" /> Complete Journey Progress</h4>\r\n                                        <div className=\"relative space-y-4\">\r\n                                            <div className=\"absolute left-5 top-4 bottom-4 w-0.5 bg-gray-200 dark:bg-gray-700\" />\r\n                                            {item.stages?.map((stage, idx) => (\r\n                                                <div key={idx} className=\"relative flex items-start gap-4\">\r\n                                                    <div className={`relative z-10 w-10 h-10 rounded-full flex items-center justify-center bg-white dark:bg-gray-900 ring-4 ring-gray-50 dark:ring-gray-800 ${getStageColor(stage.status, stage.color)}`}>\r\n                                                        <StageIcon stage={stage} size={16} />\r\n                                                    </div>\r\n                                                    <div className=\"flex-1 pb-2\">\r\n                                                        <h5 className=\"font-semibold text-gray-900 dark:text-white\">{stage.name}</h5>\r\n                                                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{stage.description}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {item.timeline && (\r\n                                        <div className=\"mb-5\">\r\n                                            <button onClick={(e) => { e.stopPropagation(); setShowTimeline(prev => ({ ...prev, [item.id]: !prev[item.id] })); }} className=\"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg\">\r\n                                                <span className=\"text-sm font-semibold flex items-center gap-2 text-gray-700 dark:text-gray-300\"><Clock size={16} /> Activity Timeline</span>\r\n                                                <ChevronDown size={16} className={showTimeline[item.id] ? 'rotate-180' : ''} />\r\n                                            </button>\r\n                                            {showTimeline[item.id] && (\r\n                                                <div className=\"mt-3 space-y-2 pl-2\">\r\n                                                    {item.timeline.map((event, idx) => <TimelineEvent key={idx} event={event} />)}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex gap-3\">\r\n                                        <button onClick={() => navigate(`/user/dashboard/property/${item.property.id}`)} className=\"px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-semibold flex items-center gap-2\">View Property <ExternalLink size={14} /></button>\r\n                                        <button className=\"px-5 py-2.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold flex items-center gap-2\"><MessageCircle size={14} /> Send Message</button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ApplicationTimelineWidget;\r\n\r\n","\"use client\";\r\n\r\nimport React from 'react';\r\nimport { MapPin, Star, ChevronRight, Building } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Mock Data\r\nconst NEARBY_AGENCIES = [\r\n    {\r\n        id: 'agency-1',\r\n        name: 'Prime Estate Agents',\r\n        rating: 4.8,\r\n        reviewCount: 124,\r\n        distance: '0.5 miles',\r\n        address: '123 High St',\r\n        image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80',\r\n        verified: true,\r\n    },\r\n    {\r\n        id: 'agency-2',\r\n        name: 'Luxury Living',\r\n        rating: 4.9,\r\n        reviewCount: 89,\r\n        distance: '1.2 miles',\r\n        address: '45 Park Lane',\r\n        image: 'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80',\r\n        verified: true,\r\n    },\r\n    {\r\n        id: 'agency-3',\r\n        name: 'Modern Homes UK',\r\n        rating: 4.6,\r\n        reviewCount: 205,\r\n        distance: '1.8 miles',\r\n        address: '78 Queen\\'s Road',\r\n        image: 'https://images.unsplash.com/photo-1554469384-e58fac16e23a?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80',\r\n        verified: true,\r\n    },\r\n];\r\n\r\nconst NearbyAgenciesList = () => {\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\r\n                        <Building size={20} className=\"text-blue-600 dark:text-blue-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"font-bold text-gray-900 dark:text-white\">Top Rated Agencies</h3>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Nearby professionals</p>\r\n                    </div>\r\n                </div>\r\n                <Link\r\n                    to=\"/user/dashboard/agencies\"\r\n                    className=\"text-xs font-semibold text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 flex items-center gap-1\"\r\n                >\r\n                    View All <ChevronRight size={14} />\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n                {NEARBY_AGENCIES.map((agency) => (\r\n                    <div key={agency.id} className=\"flex items-center gap-4 group cursor-pointer\">\r\n                        <img\r\n                            src={agency.image}\r\n                            alt={agency.name}\r\n                            className=\"w-12 h-12 rounded-lg object-cover bg-gray-200 dark:bg-gray-700\"\r\n                        />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <h4 className=\"font-semibold text-sm text-gray-900 dark:text-white truncate group-hover:text-orange-600 transition-colors\">\r\n                                    {agency.name}\r\n                                </h4>\r\n                                {agency.verified && (\r\n                                    <span className=\"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded-full font-medium\">\r\n                                        Verified\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 mt-0.5\">\r\n                                <div className=\"flex items-center text-xs font-medium text-gray-900 dark:text-white\">\r\n                                    <Star size={12} className=\"text-yellow-400 fill-yellow-400 mr-0.5\" />\r\n                                    {agency.rating}\r\n                                    <span className=\"text-gray-400 dark:text-gray-500 font-normal ml-0.5\">({agency.reviewCount})</span>\r\n                                </div>\r\n                                <span className=\"text-gray-300 dark:text-gray-600 text-xs\">•</span>\r\n                                <div className=\"flex items-center text-xs text-gray-500 dark:text-gray-400\">\r\n                                    <MapPin size={10} className=\"mr-0.5\" />\r\n                                    {agency.distance}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <button className=\"w-full mt-6 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium\">\r\n                Find Agent by Postcode\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NearbyAgenciesList;\r\n\r\n","\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Send, CheckCircle, AlertCircle, MapPin, Building, Phone } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nconst BrokerRequestWidget = () => {\r\n    const { user } = useAuth();\r\n    const [requestType, setRequestType] = useState('buy'); // buy, rent, sell, let\r\n    const [details, setDetails] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const [budget, setBudget] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n        setSuccess(false);\r\n\r\n        try {\r\n            // Simulate API call\r\n            await new Promise(resolve => setTimeout(resolve, 1500));\r\n\r\n            // Verification logic logic (e.g. check if user has verified phone)\r\n            // For now, just succeed\r\n            setSuccess(true);\r\n            setDetails('');\r\n            setLocation('');\r\n            setBudget('');\r\n        } catch (err: any) {\r\n            setError('Failed to submit request. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 h-full flex flex-col items-center justify-center text-center\">\r\n                <div className=\"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4\">\r\n                    <CheckCircle size={32} className=\"text-green-600 dark:text-green-400\" />\r\n                </div>\r\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-2\">Request Sent!</h3>\r\n                <p className=\"text-gray-600 dark:text-gray-300 text-sm mb-6 max-w-xs\">\r\n                    Your request has been broadcasted to verified top-rated brokers in your area. You'll receive proposals shortly.\r\n                </p>\r\n                <button\r\n                    onClick={() => setSuccess(false)}\r\n                    className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm font-medium\"\r\n                >\r\n                    Send Another Request\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\r\n            <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg\">\r\n                    <Send size={20} className=\"text-orange-600 dark:text-orange-400\" />\r\n                </div>\r\n                <div>\r\n                    <h3 className=\"font-bold text-gray-900 dark:text-white\">Request a Broker</h3>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Get proposals from top-rated agents</p>\r\n                </div>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                {/* Request Type Tabs */}\r\n                <div className=\"flex bg-gray-100 dark:bg-gray-700/50 p-1 rounded-lg\">\r\n                    {['buy', 'rent', 'sell'].map((type) => (\r\n                        <button\r\n                            key={type}\r\n                            type=\"button\"\r\n                            onClick={() => setRequestType(type)}\r\n                            className={`flex-1 py-1.5 text-xs font-medium rounded-md capitalize transition-all ${requestType === type\r\n                                ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm'\r\n                                : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\r\n                                }`}\r\n                        >\r\n                            {type}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Form Fields */}\r\n                <div className=\"space-y-3\">\r\n                    <div>\r\n                        <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                            Preferred Location\r\n                        </label>\r\n                        <div className=\"relative\">\r\n                            <MapPin size={14} className=\"absolute left-3 top-2.5 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={location}\r\n                                onChange={(e) => setLocation(e.target.value)}\r\n                                placeholder=\"e.g. Downtown, West End\"\r\n                                className=\"w-full pl-9 pr-3 py-2 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                            Budget / Price Range\r\n                        </label>\r\n                        <div className=\"relative\">\r\n                            <span className=\"absolute left-3 top-2.5 text-gray-400 text-xs font-bold\">£</span>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={budget}\r\n                                onChange={(e) => setBudget(e.target.value)}\r\n                                placeholder=\"e.g. 500k - 600k\"\r\n                                className=\"w-full pl-9 pr-3 py-2 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                            Requirements\r\n                        </label>\r\n                        <textarea\r\n                            value={details}\r\n                            onChange={(e) => setDetails(e.target.value)}\r\n                            placeholder=\"e.g. 2 bedrooms, balcony, pet friendly...\"\r\n                            rows={3}\r\n                            className=\"w-full p-3 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all resize-none\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"flex items-center gap-2 text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/10 p-2 rounded-lg\">\r\n                        <AlertCircle size={14} />\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"w-full py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-medium rounded-lg shadow-md shadow-orange-500/20 transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                >\r\n                    {loading ? (\r\n                        <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                    ) : (\r\n                        <Send size={16} />\r\n                    )}\r\n                    {loading ? 'Broadcasting...' : 'Broadcast Request'}\r\n                </button>\r\n\r\n                <p className=\"text-[10px] text-center text-gray-400 dark:text-gray-500\">\r\n                    Your request will be sent to verified brokers only.\r\n                </p>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BrokerRequestWidget;\r\n","'use client';\r\n\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Home, X, Navigation, ZoomIn, ZoomOut } from 'lucide-react';\r\n\r\ninterface UserLocation {\r\n    latitude: number;\r\n    longitude: number;\r\n}\r\n\r\ninterface Property {\r\n    id: string;\r\n    title?: string;\r\n    address_line_1?: string;\r\n    city?: string;\r\n    postcode?: string;\r\n    price?: number;\r\n    property_type?: string;\r\n    latitude?: number;\r\n    longitude?: number;\r\n    bedrooms?: number;\r\n    bathrooms?: number;\r\n    distance?: number | null;\r\n    category?: string;\r\n}\r\n\r\ninterface MapBounds {\r\n    minLat: number;\r\n    maxLat: number;\r\n    minLng: number;\r\n    maxLng: number;\r\n}\r\n\r\ninterface NearbyPropertiesMapProps {\r\n    properties?: Property[];\r\n    userLocation?: UserLocation | null;\r\n    onPropertyClick?: ((property: Property) => void) | null;\r\n}\r\n\r\n/**\r\n * Calculate distance between two coordinates using Haversine formula\r\n */\r\nconst calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\r\n    const R = 3959; // Earth's radius in miles\r\n    const dLat = (lat2 - lat1) * Math.PI / 180;\r\n    const dLon = (lon2 - lon1) * Math.PI / 180;\r\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    return R * c;\r\n};\r\n\r\nconst NearbyPropertiesMap = ({\r\n    properties = [],\r\n    userLocation = null,\r\n    onPropertyClick = null,\r\n}: NearbyPropertiesMapProps) => {\r\n    const navigate = useNavigate();\r\n    const [selectedProperty, setSelectedProperty] = useState<Property | null>(null);\r\n\r\n    const defaultLocation = { lat: 51.5074, lng: -0.1278 }; // London\r\n\r\n    const [mapCenter, setMapCenter] = useState(() => {\r\n        try {\r\n            if (userLocation && userLocation.latitude && userLocation.longitude) {\r\n                return { lat: userLocation.latitude, lng: userLocation.longitude };\r\n            }\r\n            return defaultLocation;\r\n        } catch {\r\n            return defaultLocation;\r\n        }\r\n    });\r\n    const [zoom, setZoom] = useState(12);\r\n\r\n    // Calculate distances and categorize properties\r\n    const propertiesWithDistance = useMemo(() => {\r\n        try {\r\n            if (!properties || !Array.isArray(properties) || properties.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            if (!userLocation || !userLocation.latitude || !userLocation.longitude) {\r\n                return properties.map(p => ({ ...p, distance: null, category: 'other' }));\r\n            }\r\n\r\n            return properties.map(property => {\r\n                if (!property || !property.latitude || !property.longitude) {\r\n                    return { ...property, distance: null, category: 'other' };\r\n                }\r\n\r\n                try {\r\n                    const distance = calculateDistance(\r\n                        userLocation.latitude,\r\n                        userLocation.longitude,\r\n                        property.latitude,\r\n                        property.longitude\r\n                    );\r\n\r\n                    let category = 'other';\r\n                    if (distance <= 1) category = 'very-near';\r\n                    else if (distance <= 3) category = 'near';\r\n                    else if (distance <= 5) category = 'moderate';\r\n                    else category = 'far';\r\n\r\n                    return {\r\n                        ...property,\r\n                        distance: Math.round(distance * 10) / 10,\r\n                        category,\r\n                    };\r\n                } catch {\r\n                    return { ...property, distance: null, category: 'other' };\r\n                }\r\n            });\r\n        } catch {\r\n            return properties || [];\r\n        }\r\n    }, [properties, userLocation]);\r\n\r\n    // Sort by distance (nearest first)\r\n    const sortedProperties = useMemo(() => {\r\n        return [...propertiesWithDistance].sort((a, b) => {\r\n            if (a.distance === null || a.distance === undefined) return 1;\r\n            if (b.distance === null || b.distance === undefined) return -1;\r\n            return a.distance - b.distance;\r\n        });\r\n    }, [propertiesWithDistance]);\r\n\r\n    // Filter properties with valid coordinates\r\n    const propertiesWithCoords = sortedProperties.filter(\r\n        p => p.latitude && p.longitude\r\n    );\r\n\r\n    // Calculate map bounds to fit all properties\r\n    const mapBounds = useMemo<MapBounds | null>(() => {\r\n        if (propertiesWithCoords.length === 0) return null;\r\n\r\n        const lats = propertiesWithCoords.map(p => p.latitude!);\r\n        const lngs = propertiesWithCoords.map(p => p.longitude!);\r\n\r\n        return {\r\n            minLat: Math.min(...lats),\r\n            maxLat: Math.max(...lats),\r\n            minLng: Math.min(...lngs),\r\n            maxLng: Math.max(...lngs),\r\n        };\r\n    }, [propertiesWithCoords]);\r\n\r\n    // Adjust map center to fit all properties\r\n    useEffect(() => {\r\n        if (mapBounds && propertiesWithCoords.length > 0) {\r\n            const centerLat = (mapBounds.minLat + mapBounds.maxLat) / 2;\r\n            const centerLng = (mapBounds.minLng + mapBounds.maxLng) / 2;\r\n            setMapCenter({ lat: centerLat, lng: centerLng });\r\n        } else if (userLocation && userLocation.latitude) {\r\n            setMapCenter({ lat: userLocation.latitude, lng: userLocation.longitude });\r\n        }\r\n    }, [mapBounds, userLocation, propertiesWithCoords.length]);\r\n\r\n    const handleMarkerClick = (property: Property) => {\r\n        setSelectedProperty(property);\r\n        if (onPropertyClick) {\r\n            onPropertyClick(property);\r\n        }\r\n    };\r\n\r\n    const handleViewDetails = (property: Property) => {\r\n        navigate(`/user/dashboard/property/${property.id}`);\r\n    };\r\n\r\n    // Get marker color based on distance category\r\n    const getMarkerColor = (category?: string) => {\r\n        switch (category) {\r\n            case 'very-near': return 'bg-green-500';\r\n            case 'near': return 'bg-orange-500';\r\n            case 'moderate': return 'bg-yellow-500';\r\n            case 'far': return 'bg-gray-400';\r\n            default: return 'bg-blue-500';\r\n        }\r\n    };\r\n\r\n    // Convert lat/lng to percentage position (for placeholder map)\r\n    const latLngToPosition = (lat: number, lng: number, bounds: MapBounds | null) => {\r\n        if (!bounds) {\r\n            const latOffset = ((lat - mapCenter.lat) * 100) / 0.1;\r\n            const lngOffset = ((lng - mapCenter.lng) * 100) / 0.1;\r\n            return {\r\n                left: `${50 + lngOffset}%`,\r\n                top: `${50 - latOffset}%`,\r\n            };\r\n        }\r\n\r\n        const latRange = bounds.maxLat - bounds.minLat || 0.1;\r\n        const lngRange = bounds.maxLng - bounds.minLng || 0.1;\r\n\r\n        const left = ((lng - bounds.minLng) / lngRange) * 100;\r\n        const top = ((bounds.maxLat - lat) / latRange) * 100;\r\n\r\n        return {\r\n            left: `${Math.max(5, Math.min(95, left))}%`,\r\n            top: `${Math.max(5, Math.min(95, top))}%`,\r\n        };\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full rounded-lg overflow-hidden bg-white dark:bg-gray-800\">\r\n            {/* Map Container */}\r\n            <div className=\"relative w-full h-full\">\r\n                {/* Google Maps Satellite Background */}\r\n                <iframe\r\n                    title=\"Map View\"\r\n                    width=\"100%\"\r\n                    height=\"100%\"\r\n                    frameBorder={0}\r\n                    style={{ border: 0, position: 'absolute', inset: 0, zIndex: 0 }}\r\n                    src={`https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d${30000 / zoom}!2d${mapCenter.lng}!3d${mapCenter.lat}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e1!3m2!1sen!2suk!4v1640000000000!5m2!1sen!2suk`}\r\n                    allowFullScreen\r\n                    loading=\"lazy\"\r\n                    referrerPolicy=\"no-referrer-when-downgrade\"\r\n                ></iframe>\r\n\r\n                {/* Overlay for markers */}\r\n                <div className=\"absolute inset-0 z-10 pointer-events-none\">\r\n                    <div className=\"relative w-full h-full pointer-events-auto\">\r\n\r\n                        {/* User Location Marker */}\r\n                        {userLocation && userLocation.latitude && (\r\n                            <div\r\n                                className=\"absolute transform -translate-x-1/2 -translate-y-1/2 z-20\"\r\n                                style={latLngToPosition(userLocation.latitude, userLocation.longitude, mapBounds)}\r\n                            >\r\n                                <div className=\"relative\">\r\n                                    <div className=\"w-6 h-6 bg-blue-600 rounded-full border-2 border-white shadow-lg flex items-center justify-center animate-pulse\">\r\n                                        <Navigation size={14} className=\"text-white\" />\r\n                                    </div>\r\n                                    <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap bg-blue-600 text-white text-xs px-2 py-1 rounded shadow-lg\">\r\n                                        Your Location\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Property Markers */}\r\n                        {propertiesWithCoords.map((property) => {\r\n                            const position = latLngToPosition(\r\n                                property.latitude!,\r\n                                property.longitude!,\r\n                                mapBounds\r\n                            );\r\n\r\n                            return (\r\n                                <div\r\n                                    key={property.id}\r\n                                    className=\"absolute transform -translate-x-1/2 -translate-y-1/2 z-10\"\r\n                                    style={position}\r\n                                >\r\n                                    <button\r\n                                        onClick={() => handleMarkerClick(property)}\r\n                                        className=\"relative group\"\r\n                                    >\r\n                                        <div className={`w-10 h-10 ${getMarkerColor(property.category)} rounded-full border-2 border-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer`}>\r\n                                            <Home size={20} className=\"text-white\" />\r\n                                        </div>\r\n\r\n                                        {/* Distance Badge */}\r\n                                        {property.distance !== null && property.distance !== undefined && (\r\n                                            <div className=\"absolute -bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                {property.distance} mi\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Selected Property Popup */}\r\n                                        {selectedProperty?.id === property.id && (\r\n                                            <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-30\">\r\n                                                <div className=\"flex items-start justify-between mb-2\">\r\n                                                    <div className=\"flex-1\">\r\n                                                        <h4 className=\"font-semibold text-gray-900 dark:text-gray-100 text-sm mb-1\">\r\n                                                            {property.title || 'Property'}\r\n                                                        </h4>\r\n                                                        <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-2\">\r\n                                                            {property.address_line_1 || property.city || 'UK'}\r\n                                                        </p>\r\n                                                        <p className=\"text-lg font-bold text-orange-600 dark:text-orange-400\">\r\n                                                            £{property.price?.toLocaleString()}\r\n                                                            {property.property_type === 'rent' && '/month'}\r\n                                                        </p>\r\n                                                        {property.distance !== null && property.distance !== undefined && (\r\n                                                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                                                                {property.distance} miles away\r\n                                                            </p>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            setSelectedProperty(null);\r\n                                                        }}\r\n                                                        className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2\"\r\n                                                    >\r\n                                                        <X size={16} />\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400 mb-3\">\r\n                                                    {property.bedrooms && property.bedrooms > 0 && (\r\n                                                        <span>{property.bedrooms} Bed{property.bedrooms !== 1 ? 's' : ''}</span>\r\n                                                    )}\r\n                                                    {property.bathrooms && property.bathrooms > 0 && (\r\n                                                        <span>{property.bathrooms} Bath{property.bathrooms !== 1 ? 's' : ''}</span>\r\n                                                    )}\r\n                                                </div>\r\n                                                <button\r\n                                                    onClick={() => handleViewDetails(property)}\r\n                                                    className=\"w-full px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors\"\r\n                                                >\r\n                                                    View Details\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </button>\r\n                                </div>\r\n                            );\r\n                        })}\r\n\r\n                        {/* Legend */}\r\n                        <div className=\"absolute bottom-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 z-20\">\r\n                            <p className=\"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2\">Distance</p>\r\n                            <div className=\"space-y-1\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-4 h-4 bg-green-500 rounded-full\"></div>\r\n                                    <span className=\"text-xs text-gray-600 dark:text-gray-400\">Very Near (&lt;1 mi)</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-4 h-4 bg-orange-500 rounded-full\"></div>\r\n                                    <span className=\"text-xs text-gray-600 dark:text-gray-400\">Near (1-3 mi)</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-4 h-4 bg-yellow-500 rounded-full\"></div>\r\n                                    <span className=\"text-xs text-gray-600 dark:text-gray-400\">Moderate (3-5 mi)</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-4 h-4 bg-gray-400 rounded-full\"></div>\r\n                                    <span className=\"text-xs text-gray-600 dark:text-gray-400\">Far (5+ mi)</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Zoom Controls */}\r\n                        <div className=\"absolute top-4 right-4 flex flex-col gap-2 z-20\">\r\n                            <button\r\n                                onClick={() => setZoom(prev => Math.min(20, prev + 1))}\r\n                                className=\"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                            >\r\n                                <ZoomIn size={20} className=\"text-gray-700 dark:text-gray-300\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setZoom(prev => Math.max(5, prev - 1))}\r\n                                className=\"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                            >\r\n                                <ZoomOut size={20} className=\"text-gray-700 dark:text-gray-300\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Properties Count */}\r\n                        <div className=\"absolute top-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg px-4 py-2 z-20\">\r\n                            <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">\r\n                                {propertiesWithCoords.length} {propertiesWithCoords.length === 1 ? 'Property' : 'Properties'} Nearby\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Properties List Sidebar (Optional - can be toggled) */}\r\n            {selectedProperty && (\r\n                <div className=\"absolute top-4 right-4 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-30 max-h-[80vh] overflow-y-auto\">\r\n                    <div className=\"flex items-start justify-between mb-3\">\r\n                        <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\">Property Details</h3>\r\n                        <button\r\n                            onClick={() => setSelectedProperty(null)}\r\n                            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n                        >\r\n                            <X size={20} />\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <p className=\"font-medium text-gray-900 dark:text-gray-100\">{selectedProperty.title}</p>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{selectedProperty.address_line_1}</p>\r\n                        <p className=\"text-lg font-bold text-orange-600 dark:text-orange-400\">\r\n                            £{selectedProperty.price?.toLocaleString()}\r\n                            {selectedProperty.property_type === 'rent' && '/month'}\r\n                        </p>\r\n                        {selectedProperty.distance !== null && selectedProperty.distance !== undefined && (\r\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                                {selectedProperty.distance} miles away\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NearbyPropertiesMap;\r\n\r\n","'use client';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport { Twitter, Instagram, Linkedin } from 'lucide-react';\r\n\r\nconst DashboardFooter = () => {\r\n    return (\r\n        <footer className=\"bg-white mt-auto\">\r\n            {/* Main Footer */}\r\n            <div className=\"container mx-auto px-4 py-8\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {/* ESTOSPACES.COM Column */}\r\n                    <div>\r\n                        <h3 className=\"text-sm font-bold uppercase mb-4\" style={{ color: '#1e3a5f' }}>ESTOSPACES.COM</h3>\r\n                        <ul className=\"space-y-2 text-sm\">\r\n                            <li>\r\n                                <Link to=\"/contact\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Contact Us\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/faq\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    FAQ\r\n                                </Link>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Search Column */}\r\n                    <div>\r\n                        <h3 className=\"text-sm font-bold uppercase mb-4\" style={{ color: '#1e3a5f' }}>Search</h3>\r\n                        <ul className=\"space-y-2 text-sm\">\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?tab=buy&type=residential\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Search homes for sale\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?tab=rent&type=residential\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Search homes for rent\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?tab=buy&type=commercial\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Commercial for sale\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?tab=rent&type=commercial\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Commercial to rent\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?new=true&tab=buy\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    New homes\r\n                                </Link>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Locations Column */}\r\n                    <div>\r\n                        <h3 className=\"text-sm font-bold uppercase mb-4\" style={{ color: '#1e3a5f' }}>Locations</h3>\r\n                        <ul className=\"space-y-2 text-sm\">\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?location=uk\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Major towns and cities in the UK\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?location=london\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    London\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?location=cornwall\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Cornwall\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?location=glasgow\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Glasgow\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?location=cardiff\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Cardiff\r\n                                </Link>\r\n                            </li>\r\n                            <li>\r\n                                <Link to=\"/user/dashboard/discover?location=edinburgh\" className=\"text-gray-700 hover:text-orange-600 transition-colors\">\r\n                                    Edinburgh\r\n                                </Link>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bottom Copyright Bar */}\r\n            <div className=\"\">\r\n                <div className=\"container mx-auto px-4 py-4\">\r\n                    <div className=\"flex flex-col md:flex-row justify-between items-center gap-4\">\r\n                        {/* Copyright */}\r\n                        <p className=\"text-sm text-gray-700\">\r\n                            © 2026 Estospaces. All rights reserved.\r\n                        </p>\r\n\r\n                        {/* Policy Links */}\r\n                        <div className=\"flex items-center gap-4 text-sm text-gray-700\">\r\n                            <Link to=\"/privacy\" className=\"hover:text-orange-600 transition-colors\">\r\n                                Privacy Policy\r\n                            </Link>\r\n                            <span className=\"text-gray-400\">|</span>\r\n                            <Link to=\"/cookies\" className=\"hover:text-orange-600 transition-colors\">\r\n                                Cookie Policy\r\n                            </Link>\r\n                            <span className=\"text-gray-400\">|</span>\r\n                            <Link to=\"/terms\" className=\"hover:text-orange-600 transition-colors\">\r\n                                Terms &amp; Conditions\r\n                            </Link>\r\n                        </div>\r\n\r\n                        {/* Social Media Icons */}\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <a\r\n                                href=\"https://x.com/ESTOSPACES\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-gray-400 hover:text-orange-600 transition-colors\"\r\n                                aria-label=\"X (Twitter)\"\r\n                            >\r\n                                <Twitter size={18} />\r\n                            </a>\r\n                            <a\r\n                                href=\"https://www.instagram.com/estospaces/ram\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-gray-400 hover:text-orange-600 transition-colors\"\r\n                                aria-label=\"Instagram\"\r\n                            >\r\n                                <Instagram size={18} />\r\n                            </a>\r\n                            <a\r\n                                href=\"https://www.linkedin.com/company/estospaces-solutions-private-limited/?viewAsMember=true\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-gray-400 hover:text-orange-600 transition-colors\"\r\n                                aria-label=\"LinkedIn\"\r\n                            >\r\n                                <Linkedin size={18} />\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    );\r\n};\r\n\r\nexport default DashboardFooter;\r\n\r\n","\"use client\";\r\n\r\nimport React, { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ArrowRight, Sparkles, X } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nconst ProfileCompletionCard = () => {\r\n    const navigate = useNavigate();\r\n    const { user, loading } = useAuth(); // User might be null, handle safely\r\n    const [isVisible, setIsVisible] = useState(true);\r\n\r\n    // Check if profile is incomplete\r\n    const isProfileIncomplete = useMemo(() => {\r\n        if (loading || !user) return false;\r\n\r\n        // Check for missing essential fields\r\n        const hasName = user?.name || user?.user_metadata?.full_name;\r\n        const hasPhone = user?.user_metadata?.phone;\r\n\r\n        return !hasName || !hasPhone;\r\n    }, [user, loading]);\r\n\r\n    // DEMO: Force visibility for user review if user is logged in\r\n    // In production, uncomment checking isProfileIncomplete\r\n    // if (!isProfileIncomplete || !isVisible) return null;\r\n    if (!user || !isVisible) return null;\r\n\r\n    return (\r\n        <div id=\"profile-widget\" className=\"animate-slideInRight\">\r\n            <div className=\"relative group\">\r\n                {/* Blinking/Pulsing Glow Effect - Refined for elegance */}\r\n                <div className=\"absolute -inset-0.5 bg-gradient-to-r from-orange-400/50 to-pink-600/50 rounded-xl opacity-50 blur-sm group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-pulse\"></div>\r\n\r\n                <div className=\"relative flex items-center gap-4 bg-white dark:bg-gray-800 p-3 pr-8 rounded-xl shadow-lg max-w-sm hover:shadow-xl transition-shadow duration-300\">\r\n\r\n                    {/* Icon */}\r\n                    <div className=\"flex-shrink-0 w-10 h-10 bg-orange-50 dark:bg-orange-900/20 rounded-full flex items-center justify-center\">\r\n                        <Sparkles size={18} className=\"text-orange-500\" />\r\n                    </div>\r\n\r\n                    {/* Content */}\r\n                    <div className=\"flex-1 mr-2\">\r\n                        <h4 className=\"text-sm font-bold text-gray-900 dark:text-white leading-tight\">\r\n                            Complete Profile\r\n                        </h4>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5 leading-tight\">\r\n                            Unlock verified access\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Action Button */}\r\n                    <button\r\n                        onClick={() => navigate('/user/dashboard/profile')}\r\n                        className=\"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full hover:scale-105 transition-transform shadow-md\"\r\n                    >\r\n                        <ArrowRight size={14} />\r\n                    </button>\r\n\r\n                    {/* Close Button - More subtle */}\r\n                    <button\r\n                        onClick={() => setIsVisible(false)}\r\n                        className=\"absolute top-2 right-2 w-5 h-5 bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 rounded-full flex items-center justify-center hover:bg-red-50 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\r\n                    >\r\n                        <X size={10} />\r\n                    </button>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileCompletionCard;\r\n\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect, useMemo, useCallback, Suspense } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  Search, Home, ArrowRight, MapPin, AlertCircle, TrendingUp, Star,\r\n  Loader2, X, Clock, Eye, DollarSign, Sparkles,\r\n  Building2, Key, Bookmark, Map as MapIcon\r\n} from 'lucide-react';\r\n\r\n// Contexts\r\nimport { useUserLocation } from '@/contexts/LocationContext';\r\nimport { usePropertyFilter } from '@/contexts/PropertyFilterContext';\r\nimport { useSavedProperties } from '@/contexts/SavedPropertiesContext';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\n// Components\r\nimport ApplicationTimelineWidget from '@/components/dashboard/ApplicationTimelineWidget';\r\nimport NearbyAgenciesList from '@/components/dashboard/NearbyAgenciesList';\r\nimport BrokerRequestWidget from '@/components/dashboard/BrokerRequestWidget';\r\nimport NearbyPropertiesMap from '@/components/dashboard/NearbyPropertiesMap';\r\nimport PropertyCard from '@/components/dashboard/PropertyCard';\r\nimport PropertyCardSkeleton from '@/components/dashboard/PropertyCardSkeleton';\r\nimport DashboardFooter from '@/components/dashboard/DashboardFooter';\r\nimport ProfileCompletionCard from '@/components/dashboard/ProfileCompletionCard';\r\n\r\n// Services\r\nimport * as propertyService from '@/services/propertyService';\r\n\r\nconst DashboardClient = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const { user } = useAuth();\r\n  const { activeLocation, loading: locationLoading } = useUserLocation();\r\n  const { setActiveTab } = usePropertyFilter();\r\n  const { savedProperties } = useSavedProperties();\r\n\r\n  // State for selected property type tab (Buy/Rent/Sold) - default to 'sold'\r\n  const [selectedPropertyType, setSelectedPropertyType] = useState(() => {\r\n    const urlType = searchParams.get('type');\r\n    if (urlType === 'buy' || urlType === 'rent' || urlType === 'sold') {\r\n      return urlType;\r\n    }\r\n    return 'sold';\r\n  });\r\n\r\n  // State for selected filter options (array for multiple selections)\r\n  const [selectedFilters, setSelectedFilters] = useState<string[]>(() => {\r\n    const filterParam = searchParams.get('filter');\r\n    if (filterParam) {\r\n      return filterParam.split(',').filter(f => f);\r\n    }\r\n    return [];\r\n  });\r\n\r\n  // Search & filter state\r\n  const [searchInput, setSearchInput] = useState(() => {\r\n    return searchParams.get('location') || '';\r\n  });\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [locationMessage, setLocationMessage] = useState<string | null>(null);\r\n\r\n  // Filtered properties state\r\n  const [filteredProperties, setFilteredProperties] = useState<any[]>([]);\r\n  const [showFilteredResults, setShowFilteredResults] = useState(false);\r\n  const [filteredCount, setFilteredCount] = useState(0);\r\n\r\n  // Sync selectedPropertyType with URL params\r\n  useEffect(() => {\r\n    const urlType = searchParams.get('type');\r\n    if (urlType === 'buy' || urlType === 'rent' || urlType === 'sold') {\r\n      setSelectedPropertyType(urlType);\r\n    } else if (!urlType) {\r\n      setSelectedPropertyType('sold');\r\n    }\r\n  }, [searchParams]);\r\n\r\n  // Sync selectedFilters with URL params\r\n  useEffect(() => {\r\n    const urlFilter = searchParams.get('filter');\r\n    if (urlFilter) {\r\n      setSelectedFilters(urlFilter.split(',').filter(f => f));\r\n    } else {\r\n      setSelectedFilters([]);\r\n    }\r\n  }, [searchParams]);\r\n\r\n  // Get time-based greeting\r\n  const getGreeting = () => {\r\n    const hour = new Date().getHours();\r\n    if (hour < 12) return 'Good morning';\r\n    if (hour < 17) return 'Good afternoon';\r\n    return 'Good evening';\r\n  };\r\n\r\n  // Get first name from user metadata\r\n  const firstName = user?.user_metadata?.full_name?.split(' ')[0] ||\r\n    user?.user_metadata?.name?.split(' ')[0] ||\r\n    user?.name?.split(' ')[0] ||\r\n    user?.email?.split('@')[0] ||\r\n    'there';\r\n\r\n  // Fetch filtered properties\r\n  const fetchFilteredProperties = useCallback(async () => {\r\n    setSearchLoading(true);\r\n    setError(null);\r\n    setShowFilteredResults(true);\r\n\r\n    try {\r\n      const filters: any = {\r\n        search: searchInput.trim(),\r\n        listingType: selectedPropertyType === 'rent' ? ['rent'] : ['sale'],\r\n      };\r\n\r\n      if (selectedPropertyType === 'sold') {\r\n        filters.status = ['sold'];\r\n      }\r\n\r\n      const result = await propertyService.getProperties(filters);\r\n\r\n      if (result.error) {\r\n        setError(result.error);\r\n        setFilteredProperties([]);\r\n        setFilteredCount(0);\r\n      } else if (result.data) {\r\n        setFilteredProperties(result.data);\r\n        setFilteredCount(result.data.length);\r\n        if (result.data.length === 0) {\r\n          setLocationMessage('No properties found matching your search. Try adjusting your criteria.');\r\n        }\r\n      }\r\n    } catch (err: any) {\r\n      console.error('[Dashboard] Error filtering properties:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  }, [selectedPropertyType, selectedFilters, searchInput]);\r\n\r\n  // Handle location search\r\n  const handleLocationSearch = useCallback((e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n    setError(null);\r\n    setLocationMessage(null);\r\n\r\n    if (selectedFilters.length > 0 || searchInput.trim()) {\r\n      fetchFilteredProperties();\r\n    } else {\r\n      const params = new URLSearchParams();\r\n      if (selectedPropertyType === 'buy') {\r\n        params.set('tab', 'buy');\r\n      } else if (selectedPropertyType === 'rent') {\r\n        params.set('tab', 'rent');\r\n      } else if (selectedPropertyType === 'sold') {\r\n        params.set('tab', 'buy');\r\n        params.set('status', 'sold');\r\n      }\r\n      navigate(`/user/dashboard/discover?${params.toString()}`);\r\n    }\r\n  }, [searchInput, selectedPropertyType, selectedFilters, navigate, fetchFilteredProperties]);\r\n\r\n  // Map location\r\n  const mapLocation = activeLocation || {\r\n    type: 'default',\r\n    postcode: 'SW1A 1AA',\r\n    latitude: 51.5074,\r\n    longitude: -0.1278,\r\n    city: 'London',\r\n    source: 'default',\r\n  };\r\n\r\n  // Map properties - pass raw properties with latitude/longitude for NearbyPropertiesMap\r\n  const mapProperties = useMemo(() => {\r\n    return filteredProperties.filter((p: any) => p && p.latitude && p.longitude);\r\n  }, [filteredProperties]);\r\n\r\n  return (\r\n    <div className=\"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto dark:bg-[#0a0a0a] min-h-screen transition-all duration-300\">\r\n\r\n      {/* Simple Welcome Greeting */}\r\n      <div id=\"greeting-section\" className=\"flex items-center justify-between animate-fadeIn\">\r\n        <div>\r\n          <h1 className=\"text-2xl lg:text-3xl font-semibold text-gray-900 dark:text-white\">\r\n            {getGreeting()}, <span className=\"text-orange-500 capitalize\">{firstName}</span> 👋\r\n          </h1>\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-sm mt-1\">\r\n            What would you like to do today?\r\n          </p>\r\n        </div>\r\n\r\n        {/* Profile Completion Widget - Top Right */}\r\n        <div className=\"ml-auto\">\r\n          <ProfileCompletionCard />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Hero Search Section - Modern Polished Design */}\r\n      <div id=\"hero-search\" className=\"relative rounded-3xl shadow-soft-xl overflow-hidden min-h-[500px] lg:min-h-[550px] flex flex-col items-center justify-center animate-fadeIn group\">\r\n        {/* Background Image with parallax effect */}\r\n        <div\r\n          className=\"absolute inset-0 bg-cover bg-center bg-no-repeat transition-transform duration-1000 group-hover:scale-105\"\r\n          style={{\r\n            backgroundImage: `url('https://images.pexels.com/photos/8293778/pexels-photo-8293778.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&dpr=2')`,\r\n          }}\r\n        />\r\n        {/* Elegant gradient overlay */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-gray-900/70 via-gray-900/50 to-orange-900/30\" />\r\n\r\n        {/* Top decorative gradient for seamless header blend */}\r\n        <div className=\"absolute top-0 left-0 w-full h-20 bg-gradient-to-b from-black/20 to-transparent\" />\r\n\r\n        {/* Hero Content - Centered */}\r\n        <div className=\"relative z-10 text-center px-4 md:px-6 max-w-5xl mx-auto w-full\">\r\n          <h1\r\n            className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight tracking-tight animate-slideUp\"\r\n            style={{ textShadow: '0 4px 20px rgba(0,0,0,0.5), 0 2px 8px rgba(0,0,0,0.3)' }}\r\n          >\r\n            Find your <span className=\"text-orange-400\" style={{ textShadow: '0 4px 20px rgba(251,146,60,0.4), 0 2px 8px rgba(0,0,0,0.3)' }}>perfect space</span>\r\n          </h1>\r\n          <p\r\n            className=\"text-white text-lg md:text-xl mb-10 max-w-2xl mx-auto animate-slideUp font-medium tracking-wide\"\r\n            style={{ animationDelay: '0.1s', textShadow: '0 2px 12px rgba(0,0,0,0.5), 0 1px 4px rgba(0,0,0,0.3)' }}\r\n          >\r\n            Discover thousands of premium properties for sale and rent across the UK\r\n          </p>\r\n\r\n          {/* Search Card - Clean Glass Effect */}\r\n          <div className=\"bg-white/95 backdrop-blur-2xl rounded-3xl p-6 lg:p-8 shadow-2xl max-w-4xl mx-auto animate-slideUp border border-white/50 ring-1 ring-black/5\" style={{ animationDelay: '0.2s' }}>\r\n            {/* Tabs */}\r\n            <div className=\"flex items-center gap-2 mb-6 bg-gray-100/80 p-1.5 rounded-2xl w-fit mx-auto border border-gray-200/50\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setSelectedPropertyType('buy');\r\n                  setSearchParams({ type: 'buy' }, { replace: true });\r\n                }}\r\n                className={`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${selectedPropertyType === 'buy'\r\n                  ? 'bg-white text-orange-600 shadow-sm ring-1 ring-black/5'\r\n                  : 'text-gray-500 hover:text-gray-900 hover:bg-gray-200/50'\r\n                  }`}\r\n              >\r\n                Buy\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setSelectedPropertyType('rent');\r\n                  setSearchParams({ type: 'rent' }, { replace: true });\r\n                }}\r\n                className={`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${selectedPropertyType === 'rent'\r\n                  ? 'bg-white text-orange-600 shadow-sm ring-1 ring-black/5'\r\n                  : 'text-gray-500 hover:text-gray-900 hover:bg-gray-200/50'\r\n                  }`}\r\n              >\r\n                Rent\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setSelectedPropertyType('sold');\r\n                  setSearchParams({ type: 'sold' }, { replace: true });\r\n                }}\r\n                className={`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${selectedPropertyType === 'sold'\r\n                  ? 'bg-white text-orange-600 shadow-sm ring-1 ring-black/5'\r\n                  : 'text-gray-500 hover:text-gray-900 hover:bg-gray-200/50'\r\n                  }`}\r\n              >\r\n                Sold\r\n              </button>\r\n            </div>\r\n\r\n            {/* Filter Options Row - Multiple Selection */}\r\n            <div className=\"flex flex-wrap items-center justify-center gap-3 mb-8\">\r\n              {[\r\n                { id: 'all', label: 'All Properties', icon: Sparkles },\r\n                { id: 'recently_added', label: 'Recently Added', icon: Clock },\r\n                { id: 'most_viewed', label: 'Most Visited', icon: Eye },\r\n                { id: 'high_demand', label: 'High Demand', icon: TrendingUp },\r\n                { id: 'budget_friendly', label: 'Budget Friendly', icon: DollarSign },\r\n              ].map((filter) => {\r\n                const Icon = filter.icon;\r\n                const isAllSelected = filter.id === 'all' && selectedFilters.length === 0;\r\n                const isSelected = filter.id === 'all' ? isAllSelected : selectedFilters.includes(filter.id);\r\n\r\n                return (\r\n                  <button\r\n                    key={filter.id}\r\n                    type=\"button\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      let newFilters: string[];\r\n\r\n                      if (filter.id === 'all') {\r\n                        newFilters = [];\r\n                      } else {\r\n                        if (selectedFilters.includes(filter.id)) {\r\n                          newFilters = selectedFilters.filter(f => f !== filter.id);\r\n                        } else {\r\n                          newFilters = [...selectedFilters, filter.id];\r\n                        }\r\n                      }\r\n\r\n                      setSelectedFilters(newFilters);\r\n\r\n                      const newParams = new URLSearchParams(searchParams);\r\n                      if (newFilters.length === 0) {\r\n                        newParams.delete('filter');\r\n                      } else {\r\n                        newParams.set('filter', newFilters.join(','));\r\n                      }\r\n                      setSearchParams(newParams, { replace: true });\r\n                    }}\r\n                    className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border ${isSelected\r\n                      ? 'bg-orange-50 text-orange-600 border-orange-200 shadow-none'\r\n                      : 'bg-white text-gray-600 border-gray-200 hover:border-gray-300 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Icon size={16} className={isSelected ? 'text-orange-500' : 'text-gray-400'} />\r\n                    <span>{filter.label}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Search Form - Inline */}\r\n            <form onSubmit={handleLocationSearch} className=\"flex flex-col sm:flex-row gap-4\">\r\n              <div className=\"flex-1 relative group/input\">\r\n                <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within/input:text-orange-500 transition-colors\" size={22} />\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchInput}\r\n                  onChange={(e) => setSearchInput(e.target.value)}\r\n                  placeholder=\"Enter postcode, city, or area...\"\r\n                  className=\"w-full pl-14 pr-12 py-4 bg-gray-50 hover:bg-white border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl text-gray-900 placeholder-gray-400 text-lg transition-all duration-300 outline-none shadow-inner\"\r\n                  disabled={searchLoading}\r\n                />\r\n                {searchInput && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setSearchInput('')}\r\n                    className=\"absolute right-5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100\"\r\n                  >\r\n                    <X size={20} />\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={searchLoading}\r\n                className=\"px-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 active:from-orange-700 active:to-orange-800 text-white rounded-2xl font-bold text-lg transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-3 min-w-[160px] shadow-lg shadow-orange-500/30 hover:shadow-orange-500/40 transform hover:-translate-y-1\"\r\n              >\r\n                {searchLoading ? (\r\n                  <>\r\n                    <Loader2 className=\"animate-spin\" size={24} />\r\n                    <span>Searching</span>\r\n                  </>\r\n                ) : (\r\n                  <span>Search</span>\r\n                )}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Action CTAs - Property Tech Style (hidden when showing filtered results) */}\r\n      {!showFilteredResults && (\r\n        <>\r\n          {/* PROMINENT: Broker + Agencies - Full Width Grid */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\r\n            <div className=\"lg:col-span-2\">\r\n              <Suspense fallback={<div className=\"h-64 bg-gray-100 rounded-2xl animate-pulse\" />}>\r\n                <BrokerRequestWidget />\r\n              </Suspense>\r\n            </div>\r\n            <div>\r\n              <Suspense fallback={<div className=\"h-64 bg-gray-100 rounded-2xl animate-pulse\" />}>\r\n                <NearbyAgenciesList />\r\n              </Suspense>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Action Cards Row */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <button\r\n              onClick={() => {\r\n                setActiveTab('buy');\r\n                navigate('/user/dashboard/discover?tab=buy');\r\n              }}\r\n              className=\"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left\"\r\n            >\r\n              <div className=\"p-3.5 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-violet-500/25\">\r\n                <Building2 size={24} className=\"text-white\" strokeWidth={1.5} />\r\n              </div>\r\n              <h3 className=\"font-semibold text-gray-900 dark:text-white mb-1\">Buy Property</h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-3\">Find your dream home</p>\r\n              <span className=\"text-violet-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all\">\r\n                Browse <ArrowRight size={14} />\r\n              </span>\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => {\r\n                setActiveTab('rent');\r\n                navigate('/user/dashboard/discover?tab=rent');\r\n              }}\r\n              className=\"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left\"\r\n            >\r\n              <div className=\"p-3.5 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-cyan-500/25\">\r\n                <Key size={24} className=\"text-white\" strokeWidth={1.5} />\r\n              </div>\r\n              <h3 className=\"font-semibold text-gray-900 dark:text-white mb-1\">Rent Property</h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-3\">Explore rentals</p>\r\n              <span className=\"text-cyan-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all\">\r\n                Explore <ArrowRight size={14} />\r\n              </span>\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => navigate('/user/dashboard/saved')}\r\n              className=\"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left\"\r\n            >\r\n              <div className=\"p-3.5 bg-gradient-to-br from-rose-500 to-pink-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-rose-500/25\">\r\n                <Bookmark size={24} className=\"text-white\" strokeWidth={1.5} />\r\n              </div>\r\n              <h3 className=\"font-semibold text-gray-900 dark:text-white mb-1\">Saved</h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-3\">{savedProperties?.length || 0} properties</p>\r\n              <span className=\"text-rose-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all\">\r\n                View All <ArrowRight size={14} />\r\n              </span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Real-Time Application Monitoring */}\r\n          <Suspense fallback={<div className=\"h-48 bg-gray-100 rounded-2xl animate-pulse\" />}>\r\n            <ApplicationTimelineWidget />\r\n          </Suspense>\r\n        </>\r\n      )}\r\n\r\n      {/* Filtered Properties Results */}\r\n      {showFilteredResults && (\r\n        <div className=\"animate-fadeIn\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-orange-500\">\r\n                {selectedFilters.includes('recently_added') && 'Recently Added Properties'}\r\n                {selectedFilters.includes('most_viewed') && !selectedFilters.includes('recently_added') && 'Most Visited Properties'}\r\n                {selectedFilters.includes('high_demand') && !selectedFilters.includes('recently_added') && !selectedFilters.includes('most_viewed') && 'High Demand Properties'}\r\n                {selectedFilters.includes('budget_friendly') && !selectedFilters.includes('recently_added') && !selectedFilters.includes('most_viewed') && !selectedFilters.includes('high_demand') && 'Budget Friendly Properties'}\r\n                {selectedFilters.length === 0 && searchInput && `Properties in \"${searchInput}\"`}\r\n                {selectedFilters.length === 0 && !searchInput && 'Search Results'}\r\n              </h2>\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                {searchLoading ? 'Loading...' : `${filteredCount} ${filteredCount === 1 ? 'property' : 'properties'} found`}\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={() => {\r\n                setShowFilteredResults(false);\r\n                setFilteredProperties([]);\r\n                setSelectedFilters([]);\r\n                setSearchInput('');\r\n              }}\r\n              className=\"text-sm text-orange-600 hover:text-orange-700 font-medium flex items-center gap-1\"\r\n            >\r\n              <X size={16} />\r\n              Clear Results\r\n            </button>\r\n          </div>\r\n\r\n          {searchLoading ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {[1, 2, 3, 4, 5, 6].map((i) => (\r\n                <PropertyCardSkeleton key={i} />\r\n              ))}\r\n            </div>\r\n          ) : filteredProperties.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {filteredProperties.map((property: any) => (\r\n                <PropertyCard\r\n                  key={property.id}\r\n                  property={property}\r\n                  onViewDetails={(p: any) => navigate(`/user/dashboard/property/${p.id}`)}\r\n                />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center border border-gray-200 dark:border-gray-700\">\r\n              <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Home size={32} className=\"text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">No Properties Found</h3>\r\n              <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Try adjusting your filters or search criteria</p>\r\n              <button\r\n                onClick={() => {\r\n                  setShowFilteredResults(false);\r\n                  setSelectedFilters([]);\r\n                  setSearchInput('');\r\n                  navigate('/user/dashboard/discover');\r\n                }}\r\n                className=\"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors\"\r\n              >\r\n                Browse All Properties\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* View More Button */}\r\n          {filteredProperties.length > 0 && filteredCount > 12 && (\r\n            <div className=\"text-center mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  const params = new URLSearchParams();\r\n                  params.set('tab', selectedPropertyType === 'rent' ? 'rent' : 'buy');\r\n                  if (selectedFilters.length > 0) {\r\n                    params.set('filter', selectedFilters.join(','));\r\n                  }\r\n                  if (searchInput) {\r\n                    params.set('location', searchInput);\r\n                  }\r\n                  navigate(`/user/dashboard/discover?${params.toString()}`);\r\n                }}\r\n                className=\"px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition-colors inline-flex items-center gap-2\"\r\n              >\r\n                View All {filteredCount} Properties\r\n                <ArrowRight size={18} />\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-slideDown\">\r\n          <div className=\"p-2 bg-red-100 dark:bg-red-900/40 rounded-lg\">\r\n            <AlertCircle className=\"text-red-600 dark:text-red-400\" size={18} />\r\n          </div>\r\n          <p className=\"flex-1 text-sm font-medium text-red-800 dark:text-red-200\">{error}</p>\r\n          <button\r\n            onClick={() => setError(null)}\r\n            className=\"text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 p-1.5 rounded-lg transition-colors\"\r\n          >\r\n            <X size={16} />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Location Message (Info/Warning) */}\r\n      {locationMessage && !error && (\r\n        <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex items-center gap-3 animate-slideDown\">\r\n          <div className=\"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg\">\r\n            <AlertCircle className=\"text-amber-600 dark:text-amber-400\" size={18} />\r\n          </div>\r\n          <p className=\"flex-1 text-sm text-amber-800 dark:text-amber-200\">{locationMessage}</p>\r\n          <button\r\n            onClick={() => setLocationMessage(null)}\r\n            className=\"text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 p-1.5 rounded-lg transition-colors\"\r\n          >\r\n            <X size={16} />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Map View - Nearby Properties (hidden when showing filtered results) */}\r\n      {!showFilteredResults && (\r\n        <div>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <MapIcon className=\"text-orange-500\" size={20} />\r\n                <h2 className=\"text-xl font-semibold text-gray-900 dark:text-orange-500\">Nearby Properties</h2>\r\n              </div>\r\n              <p className=\"text-xs text-gray-600 dark:text-gray-300 mt-1\">\r\n                Explore properties on the map - click markers to view details\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={() => navigate('/user/dashboard/discover')}\r\n              className=\"flex items-center gap-2 px-4 py-2 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 text-sm font-medium transition-colors\"\r\n            >\r\n              <span>Browse All Properties</span>\r\n              <ArrowRight size={16} />\r\n            </button>\r\n          </div>\r\n\r\n          {locationLoading ? (\r\n            <div className=\"bg-white dark:bg-white rounded-lg shadow-sm border border-gray-200 dark:border-gray-300 overflow-hidden\">\r\n              <div className=\"h-[600px] lg:h-[700px] flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                  <Loader2 className=\"animate-spin mx-auto mb-4 text-orange-500\" size={48} />\r\n                  <p className=\"text-gray-600 dark:text-gray-300\">Loading nearby properties...</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-white dark:bg-white rounded-lg shadow-sm overflow-hidden\">\r\n              <div className=\"h-[600px] lg:h-[700px]\">\r\n                <NearbyPropertiesMap\r\n                  properties={mapProperties}\r\n                  userLocation={mapLocation}\r\n                  onPropertyClick={(p: any) => navigate(`/user/dashboard/property/${p.id}`)}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Footer Section */}\r\n      <DashboardFooter />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardClient;\r\n","\"use client\";\r\n\r\nimport DashboardClient from './DashboardClient';\r\n\r\nexport default function DashboardPage() {\r\n  return <DashboardClient />;\r\n}\r\n"],"names":["__iconNode","Bookmark","createLucideIcon","Instagram","Navigation","ZoomIn","ZoomOut","CORE_URL","getServiceUrl","getUserProperties","status","page","limit","sortBy","order","url","data","apiFetch","responseHelper","properties","pagination","error","RENT_STAGES","ArrowRight","FileText","Clock","CheckCircle2","SELL_STAGES","Eye","Activity","MessageCircle","StageIcon","stage","size","IconComponent","jsx","TimelineEvent","event","typeStyles","jsxs","formatDistanceToNow","TimelineSkeleton","i","ApplicationTimelineWidget","navigate","useNavigate","activeTab","setActiveTab","useState","expandedId","setExpandedId","showTimeline","setShowTimeline","loading","setLoading","applications","setApplications","listings","setListings","useEffect","appsRes","getApplications","mappedApps","app","s","propsRes","mappedProps","prop","dataToShow","getStageColor","color","colors","item","MapPin","ChevronDown","_a","idx","e","prev","ExternalLink","NEARBY_AGENCIES","NearbyAgenciesList","Building","Link","ChevronRight","agency","Star","BrokerRequestWidget","user","useAuth","requestType","setRequestType","details","setDetails","location","setLocation","budget","setBudget","success","setSuccess","setError","handleSubmit","resolve","CheckCircle","Send","type","AlertCircle","calculateDistance","lat1","lon1","lat2","lon2","dLat","dLon","a","NearbyPropertiesMap","userLocation","onPropertyClick","selectedProperty","setSelectedProperty","defaultLocation","mapCenter","setMapCenter","zoom","setZoom","propertiesWithDistance","useMemo","p","property","distance","category","propertiesWithCoords","b","mapBounds","lats","lngs","centerLat","centerLng","handleMarkerClick","handleViewDetails","getMarkerColor","latLngToPosition","lat","lng","bounds","latOffset","latRange","lngRange","left","top","position","Home","X","DashboardFooter","Twitter","Linkedin","ProfileCompletionCard","isVisible","setIsVisible","hasName","hasPhone","_b","Sparkles","DashboardClient","searchParams","setSearchParams","useSearchParams","activeLocation","locationLoading","useUserLocation","usePropertyFilter","savedProperties","useSavedProperties","selectedPropertyType","setSelectedPropertyType","urlType","selectedFilters","setSelectedFilters","filterParam","f","searchInput","setSearchInput","searchLoading","setSearchLoading","locationMessage","setLocationMessage","filteredProperties","setFilteredProperties","showFilteredResults","setShowFilteredResults","filteredCount","setFilteredCount","urlFilter","getGreeting","hour","firstName","_d","_c","_e","_f","fetchFilteredProperties","useCallback","filters","result","propertyService.getProperties","err","handleLocationSearch","params","mapLocation","mapProperties","TrendingUp","DollarSign","filter","Icon","isAllSelected","isSelected","newFilters","newParams","Search","Fragment","Loader2","Suspense","Building2","Key","PropertyCardSkeleton","PropertyCard","MapIcon","DashboardPage"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}