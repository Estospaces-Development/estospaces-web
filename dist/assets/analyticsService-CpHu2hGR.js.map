{"version":3,"file":"analyticsService-CpHu2hGR.js","sources":["../../src/services/analyticsService.ts"],"sourcesContent":["/**\r\n * Analytics Service\r\n * Fetches analytics data from core-service backend\r\n */\r\n\r\nimport { apiFetch, getServiceUrl, getAuthHeaders } from '@/lib/apiUtils';\r\n\r\nconst CORE_URL = () => getServiceUrl('core');\r\n\r\nexport interface PropertyPerformance {\r\n    property: string;\r\n    views: number;\r\n    applications: number;\r\n    conversionRate: number;\r\n}\r\n\r\nexport interface ApplicationByProperty {\r\n    label: string;\r\n    value: number;\r\n}\r\n\r\nexport interface TrendData {\r\n    label: string;\r\n    value: number;\r\n}\r\n\r\nexport interface LeadAnalytics {\r\n    totalLeads: number;\r\n    totalProperties: number;\r\n    conversionRate: number;\r\n    passed: number;\r\n}\r\n\r\nexport interface AnalyticsData {\r\n    propertyPerformance: PropertyPerformance[];\r\n    applicationsByProperty: ApplicationByProperty[];\r\n    revenueTrend: TrendData[];\r\n    monthlyApplicationsTrend: TrendData[];\r\n    leadAnalytics: LeadAnalytics;\r\n}\r\n\r\nexport interface AnalyticsResponse {\r\n    data: AnalyticsData | null;\r\n    error: string | null;\r\n}\r\n\r\n/**\r\n * Fetch analytics data from the core-service backend\r\n * GET /api/v1/analytics (requires manager or admin role)\r\n */\r\nexport const getAnalyticsData = async (): Promise<AnalyticsResponse> => {\r\n    try {\r\n        const data = await apiFetch<AnalyticsData>(\r\n            `${CORE_URL()}/api/v1/analytics`,\r\n        );\r\n        return { data, error: null };\r\n    } catch (error: any) {\r\n        console.error('[analyticsService] Error:', error.message);\r\n        return { data: null, error: error.message };\r\n    }\r\n};\r\n"],"names":["CORE_URL","getServiceUrl","getAnalyticsData","apiFetch","error"],"mappings":"iDAOA,MAAMA,EAAW,IAAMC,EAAc,MAAM,EA2C9BC,EAAmB,SAAwC,CACpE,GAAI,CAIA,MAAO,CAAE,KAHI,MAAMC,EACf,GAAGH,GAAU,mBAAA,EAEF,MAAO,IAAA,CAC1B,OAASI,EAAY,CACjB,eAAQ,MAAM,4BAA6BA,EAAM,OAAO,EACjD,CAAE,KAAM,KAAM,MAAOA,EAAM,OAAA,CACtC,CACJ"}