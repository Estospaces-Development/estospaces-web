import{c as T,r as o,j as e,G as V,a as R,H as G,X as E,B as D,ad as H,u as Q,ae as U,a8 as O,S as M,V as K,q as W}from"./index-DOVRzmjE.js";import q from"./PropertyCard-Dz_FikwH.js";import{P as X}from"./PropertyCardSkeleton-Dxz1m39P.js";import{L as J}from"./layers-D3zEshaF.js";import{A as Y}from"./arrow-left-CKEYTJ9r.js";import{G as Z}from"./grid-3x3-Bu4u_VZb.js";import"./ShareModal-BAkFEMWG.js";import"./share-2-GnVVRYdw.js";import"./twitter-CrDG5WBu.js";import"./message-circle-CgMyiF1G.js";import"./eye-ZHS1zas0.js";import"./maximize-D4Ezb_UP.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],te=T("map",ee),re=({houses:n=[],agencies:c=[]})=>{const[i,m]=o.useState("standard"),[s,p]=o.useState(null),h={standard:{bg:"bg-gradient-to-br from-blue-50 via-green-50 to-blue-50 dark:from-blue-900/10 dark:via-green-900/10 dark:to-blue-900/10",pattern:"radial-gradient(circle, #3b82f6 1px, transparent 1px)",opacity:.2},satellite:{bg:"bg-gray-900",pattern:"radial-gradient(circle, #ffffff 1px, transparent 1px)",opacity:.15,overlay:"linear-gradient(to bottom right, rgba(17, 24, 39, 0.9), rgba(31, 41, 55, 0.8))"}}[i],g=(r,d)=>{p({...r,type:d})},x=()=>{p(null)};return e.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-20 flex bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-1",children:[e.jsxs("button",{onClick:()=>m("standard"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${i==="standard"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(J,{size:16}),"Standard"]}),e.jsxs("button",{onClick:()=>m("satellite"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${i==="satellite"?"bg-gray-800 dark:bg-white text-white dark:text-gray-900":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(V,{size:16}),"Satellite"]})]}),e.jsxs("div",{className:`relative w-full h-full transition-colors duration-500 ${h.bg}`,children:[e.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{opacity:h.opacity},children:e.jsx("div",{className:"w-full h-full",style:{backgroundImage:h.pattern,backgroundSize:"40px 40px"}})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm px-6 py-4 rounded-lg shadow-lg border border-gray-100 dark:border-gray-700",children:[e.jsx(R,{size:48,className:"mx-auto mb-2 text-orange-500"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-medium text-lg",children:"Interactive Map View"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Click markers to view details"})]})}),e.jsxs("div",{className:"absolute inset-0",children:[n.map((r,d)=>{const u=[{left:"25%",top:"35%"},{left:"65%",top:"45%"},{left:"45%",top:"65%"},{left:"15%",top:"75%"},{left:"85%",top:"25%"}],y=u[d%u.length];return e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-10",style:y,children:e.jsxs("button",{onClick:()=>g(r,"house"),className:"relative group focus:outline-none",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full border-2 border-white dark:border-gray-800 shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer",children:e.jsx(G,{size:20,className:"text-white"})}),(s==null?void 0:s.id)===r.id&&(s==null?void 0:s.type)==="house"&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-20 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm line-clamp-1",children:r.name||r.title}),e.jsx("button",{onClick:l=>{l.stopPropagation(),x()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:e.jsx(E,{size:16})})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 line-clamp-1",children:r.address}),e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:r.price})]})]})},`house-${r.id}`)}),c.map((r,d)=>{const u=[{left:"50%",top:"30%"},{left:"30%",top:"60%"},{left:"70%",top:"55%"}],y=u[d%u.length];return e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-10",style:y,children:e.jsxs("button",{onClick:()=>g(r,"agency"),className:"relative group focus:outline-none",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800 shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer",children:e.jsx(D,{size:20,className:"text-white"})}),(s==null?void 0:s.id)===r.id&&(s==null?void 0:s.type)==="agency"&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-20 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm line-clamp-1",children:r.name}),e.jsx("button",{onClick:l=>{l.stopPropagation(),x()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:e.jsx(E,{size:16})})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-1",children:r.address})]})]})},`agency-${r.id}`)})]}),e.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg p-3 border border-gray-200 dark:border-gray-700 z-10",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Properties"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Agencies"})]})]})}),s&&e.jsx("div",{className:"absolute inset-0 z-0",onClick:x})]})]})},ae="http://localhost:8080",se=[{id:"prop-1",title:"Modern Luxury Apartment",address_line_1:"123 Canary Wharf",city:"London",postcode:"E14 5AB",price:3500,bedrooms:2,bathrooms:2,area:950,property_type:"rent",image_urls:["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800"],description:"A stunning modern apartment with river views.",view_count:124,latitude:"51.5054",longitude:"-0.0235",agent_name:"Premium Estates",has_virtual_tour:!0},{id:"prop-2",title:"Executive Penthouse",address_line_1:"45 Victoria Street",city:"London",postcode:"SW1E 6AS",price:125e4,bedrooms:3,bathrooms:3,area:2100,property_type:"sale",image_urls:["https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800"],description:"Exclusive penthouse with panoramic city views.",view_count:89,latitude:"51.4984",longitude:"-0.1335",agent_name:"Luxury Living",has_virtual_tour:!0},{id:"prop-3",title:"Cozy Family Home",address_line_1:"78 Garden Road",city:"Manchester",postcode:"M14 6RF",price:45e4,bedrooms:4,bathrooms:2,area:1650,property_type:"sale",image_urls:["https://images.unsplash.com/photo-1480074568708-e7b720bb3f09?w=800"],description:"Perfect family home with a large garden.",view_count:56,latitude:"53.4808",longitude:"-2.2426",agent_name:"North Homes"},{id:"prop-4",title:"Stylish Studio",address_line_1:"12 Creative Lane",city:"Bristol",postcode:"BS1 2EQ",price:1200,bedrooms:1,bathrooms:1,area:450,property_type:"rent",image_urls:["https://images.unsplash.com/photo-1536376074432-8d2a3d31707d?w=800"],description:"Compact and stylish studio in the city heart.",view_count:210,latitude:"51.4545",longitude:"-2.5879",agent_name:"Urban Rentals"}],oe=()=>({"Content-Type":"application/json",Authorization:`Bearer ${typeof window<"u"?localStorage.getItem("esto_token"):""}`}),ie=async(n={})=>{const c=new URL(`${ae}/api/v1/properties`);return Object.keys(n).forEach(i=>{n[i]&&c.searchParams.append(i,n[i])}),H(c.toString(),{headers:oe()},se,"propertyService")};function le(){const n=Q(),[c]=U(),{activeTab:i,setActiveTab:m}=O(),[s,p]=o.useState(!0),[j,h]=o.useState([]),[g,x]=o.useState(""),[r,d]=o.useState(""),[u,y]=o.useState("all"),[l,k]=o.useState({min:"",max:""}),[f,P]=o.useState(""),[v,z]=o.useState(""),[w,L]=o.useState("grid"),[b,N]=o.useState(1),C=8;o.useEffect(()=>{const t=c.get("type");t==="rent"?m("rent"):t==="buy"&&m("buy"),F()},[c,m]);const F=async()=>{p(!0);const{data:t}=await ie();t&&h(t),p(!1)},S=o.useMemo(()=>j.filter(t=>{if(i==="buy"&&t.property_type!=="sale"||i==="rent"&&t.property_type!=="rent")return!1;if(g.trim()){const a=g.toLowerCase();if(!(t.title.toLowerCase().includes(a)||t.address_line_1.toLowerCase().includes(a)||t.city.toLowerCase().includes(a)||t.postcode.toLowerCase().includes(a)))return!1}if(r.trim()){const a=r.toLowerCase();if(!(t.city.toLowerCase().includes(a)||t.postcode.toLowerCase().includes(a)))return!1}return!(l.min&&t.price<parseInt(l.min)||l.max&&t.price>parseInt(l.max)||f&&t.bedrooms<parseInt(f)||v&&t.bathrooms<parseInt(v))}),[j,i,g,r,l,f,v]),_=Math.ceil(S.length/C),B=S.slice((b-1)*C,b*C),A=()=>{x(""),d(""),k({min:"",max:""}),P(""),z(""),N(1)},I=t=>t.filter(a=>a.latitude&&a.longitude).map(a=>({id:a.id,title:a.title,lat:parseFloat(a.latitude||"0"),lng:parseFloat(a.longitude||"0"),price:`Â£${a.price.toLocaleString()}`,address:a.address_line_1}));return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>n("/user/dashboard"),className:"mb-6 flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors group",children:[e.jsx(Y,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Discover Properties"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:i==="buy"?"Showing properties for sale":i==="rent"?"Showing properties for rent":"Find your next home across the UK"})]}),e.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 p-1 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("button",{onClick:()=>L("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${w==="grid"?"bg-orange-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Z,{size:18}),e.jsx("span",{children:"Grid"})]}),e.jsxs("button",{onClick:()=>L("map"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${w==="map"?"bg-orange-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(te,{size:18}),e.jsx("span",{children:"Map"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border dark:border-gray-700 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Postcode, street, or property name...",value:g,onChange:t=>x(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none transition-all text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"City or Town",value:r,onChange:t=>d(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none transition-all text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Price Range"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:l.min,onChange:t=>k({...l,min:t.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:l.max,onChange:t=>k({...l,max:t.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bedrooms"}),e.jsxs("select",{value:f,onChange:t=>P(t.target.value),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Any Beds"}),e.jsx("option",{value:"1",children:"1+ Bed"}),e.jsx("option",{value:"2",children:"2+ Beds"}),e.jsx("option",{value:"3",children:"3+ Beds"}),e.jsx("option",{value:"4",children:"4+ Beds"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bathrooms"}),e.jsxs("select",{value:v,onChange:t=>z(t.target.value),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none text-sm text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Any Baths"}),e.jsx("option",{value:"1",children:"1+ Bath"}),e.jsx("option",{value:"2",children:"2+ Baths"}),e.jsx("option",{value:"3",children:"3+ Baths"})]})]}),e.jsx("div",{className:"flex items-end lg:col-span-2",children:e.jsx("button",{onClick:A,className:"text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 text-sm font-medium h-12 px-6",children:"Clear All Filters"})})]})}),w==="map"?e.jsx("div",{className:"h-[700px] rounded-2xl overflow-hidden border dark:border-gray-700 shadow-xl",children:e.jsx(re,{houses:I(S)})}):e.jsxs(e.Fragment,{children:[s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((t,a)=>e.jsx(X,{},a))}):B.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map(t=>e.jsx(q,{property:t},t.id))}):e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-3xl border dark:border-gray-700 shadow-sm",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-6 bg-gray-100 dark:bg-gray-700 rounded-full mb-6",children:e.jsx(M,{className:"text-gray-400",size:48})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"No properties match your search"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 max-w-md mx-auto",children:"Try adjusting your filters or search terms. We're constantly adding new listings across the UK."}),e.jsx("button",{onClick:A,className:"mt-8 px-8 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-all shadow-md active:scale-95",children:"Clear Filters"})]}),_>1&&e.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4",children:[e.jsx("button",{disabled:b===1,onClick:()=>N(t=>t-1),className:"p-2 rounded-xl border dark:border-gray-700 bg-white dark:bg-gray-800 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm",children:e.jsx(K,{size:24})}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:["Page ",e.jsx("span",{className:"text-gray-900 dark:text-white",children:b})," of ",_]}),e.jsx("button",{disabled:b>=_,onClick:()=>N(t=>t+1),className:"p-2 rounded-xl border dark:border-gray-700 bg-white dark:bg-gray-800 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm",children:e.jsx(W,{size:24})})]})]})]})})}function ve(){return e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}),children:e.jsx(le,{})})}export{ve as default};
//# sourceMappingURL=page-7TBg6rgx.js.map
