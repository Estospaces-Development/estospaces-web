import{c as $,u as F,r as o,j as e,s as b,k as v,C as w,S as I,X as H,ai as O,aj as P,ak as Y,x as Q,H as W,f as G,F as J}from"./index-D9fuy-ar.js";import{A as U}from"./arrow-left-BaPK0xsr.js";import{C as X}from"./check-check-CYkEMG4N.js";import{T as C}from"./trash-2-cfMB4hgX.js";import{C as q}from"./clock-D-pnzsNv.js";import{D as K}from"./dollar-sign-CqDN36Ty.js";import{M as V}from"./message-circle-Bh_ZnSbQ.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],ee=$("inbox",Z);function de(){const _=F(),[g,u]=o.useState([]),[ae,y]=o.useState(!0),[h,S]=o.useState("all"),[p,re]=o.useState("all"),[n,f]=o.useState(""),[i,c]=o.useState([]),z=async()=>{y(!0);try{const a=await O();a.notifications&&u(a.notifications)}catch(a){console.error("Error fetching notifications:",a)}finally{y(!1)}};o.useEffect(()=>{z()},[]);const x=g.filter(a=>!a.is_read).length,d=o.useMemo(()=>g.filter(a=>{const r=h==="all"||(h==="unread"?!a.is_read:a.is_read),t=p==="all"||a.type===p,s=!n||a.title.toLowerCase().includes(n.toLowerCase())||a.message.toLowerCase().includes(n.toLowerCase());return r&&t&&s}),[g,h,p,n]),k=async a=>{try{await P(a),u(r=>r.map(t=>t.id===a?{...t,is_read:!0}:t))}catch(r){console.error("Error marking as read:",r)}},D=async()=>{try{await Y(),u(a=>a.map(r=>({...r,is_read:!0})))}catch(a){console.error("Error marking all as read:",a)}},j=async a=>{u(r=>r.filter(t=>t.id!==a))},M=a=>{switch(a){case"appointment_approved":return e.jsx(w,{size:20,className:"text-green-500"});case"appointment_rejected":return e.jsx(v,{size:20,className:"text-red-500"});case"application_update":return e.jsx(J,{size:20,className:"text-blue-500"});case"profile_verified":case"document_verified":return e.jsx(G,{size:20,className:"text-green-500"});case"ticket_response":return e.jsx(V,{size:20,className:"text-purple-500"});case"property_saved":return e.jsx(W,{size:20,className:"text-orange-500"});case"price_drop":return e.jsx(K,{size:20,className:"text-green-500"});case"viewing_booked":return e.jsx(Q,{size:20,className:"text-blue-500"});default:return e.jsx(b,{size:20,className:"text-gray-500"})}},A=a=>{switch(a){case"appointment_approved":case"profile_verified":case"document_verified":case"price_drop":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"appointment_rejected":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"application_update":case"viewing_booked":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"ticket_response":return"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800";case"property_saved":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600"}},T=a=>{const r=Math.floor((Date.now()-new Date(a).getTime())/1e3);return r<60?"Just now":r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<604800?`${Math.floor(r/86400)} days ago`:new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})},E=()=>{i.length===d.length?c([]):c(d.map(a=>a.id))},L=()=>{i.forEach(a=>j(a)),c([])},B=()=>{i.forEach(a=>k(a)),c([])},N=o.useMemo(()=>{const a={};return d.forEach(r=>{const t=new Date(r.created_at),s=new Date,m=new Date(s);m.setDate(m.getDate()-1);let l;t.toDateString()===s.toDateString()?l="Today":t.toDateString()===m.toDateString()?l="Yesterday":t>new Date(s.getTime()-7*864e5)?l="This Week":l="Older",a[l]||(a[l]=[]),a[l].push(r)}),a},[d]),R=["Today","Yesterday","This Week","This Month","Older"];return e.jsxs("div",{className:"min-h-full bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 lg:px-6 py-6",children:[e.jsxs("button",{onClick:()=>_("/manager/dashboard"),className:"mb-4 flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:[e.jsx(U,{size:20}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(b,{className:"text-orange-500"})," Notifications",x>0&&e.jsxs("span",{className:"px-2.5 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-sm font-medium rounded-full",children:[x," new"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Stay updated with your property activities"})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Total",value:g.length,icon:b,iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400"},{label:"Unread",value:x,icon:v,iconBg:"bg-orange-100 dark:bg-orange-900/30",iconColor:"text-orange-600 dark:text-orange-400"},{label:"Read",value:g.length-x,icon:w,iconBg:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400"}].map(a=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 ${a.iconBg} rounded-lg`,children:e.jsx(a.icon,{size:20,className:a.iconColor})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.value}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.label})]})]})},a.label))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search notificationsâ€¦",value:n,onChange:a=>f(a.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500"}),n&&e.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(H,{size:16})})]}),e.jsx("div",{className:"flex gap-2",children:["all","unread","read"].map(a=>e.jsx("button",{onClick:()=>S(a),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-colors capitalize ${h===a?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:a},a))})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:E,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:i.length===d.length?"Deselect All":"Select All"}),i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:B,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx(X,{size:16})," Mark Read"]}),e.jsxs("button",{onClick:L,className:"text-sm text-red-600 dark:text-red-400 hover:underline flex items-center gap-1",children:[e.jsx(C,{size:16})," Delete"]})]})]}),x>0&&e.jsx("button",{onClick:D,className:"text-sm text-orange-600 dark:text-orange-400 font-medium hover:underline",children:"Mark all as read"})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 lg:px-6 pb-8",children:d.length===0?e.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(ee,{size:48,className:"mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You're all caught up!"})]}):R.filter(a=>N[a]).map(a=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 px-1",children:a}),e.jsx("div",{className:"space-y-2",children:N[a].map(r=>e.jsxs("div",{onClick:()=>{r.is_read||k(r.id)},className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all hover:shadow-sm ${r.is_read?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-75":A(r.type)}`,children:[e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:t=>{t.stopPropagation(),i.includes(r.id)?c(s=>s.filter(m=>m!==r.id)):c(s=>[...s,r.id])},className:"mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:M(r.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:`text-sm font-semibold ${r.is_read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:r.title}),!r.is_read&&e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:r.message}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(q,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:T(r.created_at)})]})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),j(r.id)},className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:e.jsx(C,{size:16})})]},r.id))})]},a))})]})}export{de as default};
//# sourceMappingURL=page-2EBLWthG.js.map
