{"version":3,"file":"page-9dGF_DjC.js","sources":["../../src/pages/auth/register/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useAuth, getRedirectPath } from '@/contexts/AuthContext';\r\nimport { Check, X, Eye, EyeOff, User, Briefcase } from 'lucide-react';\r\n\r\nexport default function RegisterPage() {\r\n    const navigate = useNavigate();\r\n    const { isAuthenticated, loading: authLoading, getRole, register } = useAuth();\r\n\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [role, setRole] = useState('user');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const rules: Record<string, boolean> = {\r\n        length: password.length >= 8,\r\n        upper: /[A-Z]/.test(password),\r\n        lower: /[a-z]/.test(password),\r\n        number: /[0-9]/.test(password),\r\n        symbol: /[^A-Za-z0-9]/.test(password),\r\n    };\r\n\r\n    const allRulesPassed = Object.values(rules).every(Boolean);\r\n\r\n    // Redirect if already authenticated\r\n    useEffect(() => {\r\n        if (isAuthenticated && !authLoading) {\r\n            const userRole = getRole();\r\n            navigate(getRedirectPath(userRole));\r\n        }\r\n    }, [isAuthenticated, authLoading, getRole, navigate]);\r\n\r\n    const handleSignup = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!name.trim()) {\r\n            setError('Please enter your name');\r\n            return;\r\n        }\r\n        if (!email.trim() || !/^\\S+@\\S+\\.\\S+$/.test(email)) {\r\n            setError('Please enter a valid email');\r\n            return;\r\n        }\r\n        if (!allRulesPassed) {\r\n            setError('Please meet all password requirements');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const result = await register(name, email, password, role);\r\n\r\n            if (!result.success) {\r\n                setError(result.error || 'Sign-up failed. Please try again.');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Registration successful â€” redirect to appropriate dashboard\r\n            setSuccess(true);\r\n            setTimeout(() => {\r\n                navigate(getRedirectPath(role));\r\n            }, 1500);\r\n        } catch {\r\n            setError('An unexpected error occurred. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (authLoading) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-[300px]\">\r\n                <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mb-4\"></div>\r\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm\">Loading...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"flex flex-col items-center text-center\">\r\n                <div className=\"mb-8\">\r\n                    <img src=\"/images/auth/logo.jpg\" alt=\"Estospaces\" width={160} height={40} className=\"h-10 w-auto\" />\r\n                </div>\r\n\r\n                <div className=\"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6\">\r\n                    <Check className=\"text-green-600 dark:text-green-400\" size={32} />\r\n                </div>\r\n\r\n                <h2 className=\"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2\">\r\n                    Account Created!\r\n                </h2>\r\n\r\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-4\">\r\n                    Redirecting to your dashboard...\r\n                </p>\r\n\r\n                <div className=\"bg-orange-50 dark:bg-orange-900/20 rounded-lg px-4 py-2 mb-4\">\r\n                    <p className=\"text-primary text-sm font-medium\">\r\n                        Signed up as: {role === 'manager' ? 'Property Manager' : 'User'}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center\">\r\n            {/* Logo */}\r\n            <div className=\"mb-8\">\r\n                <img src=\"/images/auth/logo.jpg\" alt=\"Estospaces\" width={160} height={40} className=\"h-10 w-auto\" />\r\n            </div>\r\n\r\n            <h2 className=\"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 text-center\">\r\n                Sign up for Estospaces\r\n            </h2>\r\n\r\n            <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-8 text-center\">\r\n                Create your account to get started\r\n            </p>\r\n\r\n            <form onSubmit={handleSignup} className=\"w-full\">\r\n                {/* Role Selection */}\r\n                <div className=\"mb-6\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-3\">I am a</label>\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setRole('user')}\r\n                            className={`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all duration-200 ${role === 'user'\r\n                                ? 'border-primary bg-orange-50 dark:bg-orange-900/20 text-primary'\r\n                                : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                                }`}\r\n                        >\r\n                            <User size={24} className={role === 'user' ? 'text-primary' : 'text-gray-400'} />\r\n                            <span className=\"mt-2 font-medium text-sm\">User</span>\r\n                            <span className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">Looking for property</span>\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setRole('manager')}\r\n                            className={`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all duration-200 ${role === 'manager'\r\n                                ? 'border-primary bg-orange-50 dark:bg-orange-900/20 text-primary'\r\n                                : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                                }`}\r\n                        >\r\n                            <Briefcase size={24} className={role === 'manager' ? 'text-primary' : 'text-gray-400'} />\r\n                            <span className=\"mt-2 font-medium text-sm\">Manager</span>\r\n                            <span className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">Managing properties</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Name Input */}\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Full Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter your full name\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-md outline-none focus:border-primary transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Email Input */}\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Email</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        placeholder=\"Enter your email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-md outline-none focus:border-primary transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Password Input */}\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Password</label>\r\n                    <div className=\"relative\">\r\n                        <input\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            placeholder=\"Create a password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className=\"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-md outline-none focus:border-primary transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\r\n                        />\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                        >\r\n                            {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Password Rules */}\r\n                <ul className=\"mb-6 space-y-1\">\r\n                    {[\r\n                        { key: 'length', text: 'At least 8 characters' },\r\n                        { key: 'upper', text: 'One uppercase letter' },\r\n                        { key: 'lower', text: 'One lowercase letter' },\r\n                        { key: 'number', text: 'One number' },\r\n                        { key: 'symbol', text: 'One special symbol' },\r\n                    ].map(({ key, text }) => (\r\n                        <li\r\n                            key={key}\r\n                            className={`flex items-center gap-2 text-xs ${rules[key] ? 'text-green-600' : 'text-gray-400'\r\n                                }`}\r\n                        >\r\n                            {rules[key] ? <Check size={14} /> : <X size={14} />}\r\n                            {text}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                {error && (\r\n                    <p className=\"text-red-500 text-sm mb-4 text-center\">{error}</p>\r\n                )}\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"w-full py-3 bg-primary text-white font-medium rounded-md hover:bg-opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                    {loading ? 'Creating account...' : 'Sign Up'}\r\n                </button>\r\n            </form>\r\n\r\n            <div className=\"mt-8 text-center text-sm text-gray-600 dark:text-gray-400\">\r\n                Already have an account?{' '}\r\n                <Link to=\"/login\" className=\"text-primary font-medium hover:underline\">\r\n                    Sign in\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":["RegisterPage","navigate","useNavigate","isAuthenticated","authLoading","getRole","register","useAuth","name","setName","useState","email","setEmail","password","setPassword","role","setRole","showPassword","setShowPassword","loading","setLoading","error","setError","success","setSuccess","rules","allRulesPassed","useEffect","userRole","getRedirectPath","handleSignup","e","result","jsxs","jsx","Check","User","Briefcase","EyeOff","Eye","key","text","X","Link"],"mappings":"4NAOA,SAAwBA,GAAe,CACnC,MAAMC,EAAWC,EAAA,EACX,CAAE,gBAAAC,EAAiB,QAASC,EAAa,QAAAC,EAAS,SAAAC,CAAA,EAAaC,EAAA,EAE/D,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAE,EAC7B,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAC/B,CAACG,EAAUC,CAAW,EAAIJ,EAAAA,SAAS,EAAE,EACrC,CAACK,EAAMC,CAAO,EAAIN,EAAAA,SAAS,MAAM,EACjC,CAACO,EAAcC,CAAe,EAAIR,EAAAA,SAAS,EAAK,EAChD,CAACS,EAASC,CAAU,EAAIV,EAAAA,SAAS,EAAK,EACtC,CAACW,EAAOC,CAAQ,EAAIZ,EAAAA,SAAS,EAAE,EAC/B,CAACa,EAASC,CAAU,EAAId,EAAAA,SAAS,EAAK,EAEtCe,EAAiC,CACnC,OAAQZ,EAAS,QAAU,EAC3B,MAAO,QAAQ,KAAKA,CAAQ,EAC5B,MAAO,QAAQ,KAAKA,CAAQ,EAC5B,OAAQ,QAAQ,KAAKA,CAAQ,EAC7B,OAAQ,eAAe,KAAKA,CAAQ,CAAA,EAGlCa,EAAiB,OAAO,OAAOD,CAAK,EAAE,MAAM,OAAO,EAGzDE,EAAAA,UAAU,IAAM,CACZ,GAAIxB,GAAmB,CAACC,EAAa,CACjC,MAAMwB,EAAWvB,EAAA,EACjBJ,EAAS4B,EAAgBD,CAAQ,CAAC,CACtC,CACJ,EAAG,CAACzB,EAAiBC,EAAaC,EAASJ,CAAQ,CAAC,EAEpD,MAAM6B,EAAe,MAAOC,GAAuB,CAG/C,GAFAA,EAAE,eAAA,EAEE,CAACvB,EAAK,OAAQ,CACdc,EAAS,wBAAwB,EACjC,MACJ,CACA,GAAI,CAACX,EAAM,KAAA,GAAU,CAAC,iBAAiB,KAAKA,CAAK,EAAG,CAChDW,EAAS,4BAA4B,EACrC,MACJ,CACA,GAAI,CAACI,EAAgB,CACjBJ,EAAS,uCAAuC,EAChD,MACJ,CAEAF,EAAW,EAAI,EACfE,EAAS,EAAE,EAEX,GAAI,CACA,MAAMU,EAAS,MAAM1B,EAASE,EAAMG,EAAOE,EAAUE,CAAI,EAEzD,GAAI,CAACiB,EAAO,QAAS,CACjBV,EAASU,EAAO,OAAS,mCAAmC,EAC5DZ,EAAW,EAAK,EAChB,MACJ,CAGAI,EAAW,EAAI,EACf,WAAW,IAAM,CACbvB,EAAS4B,EAAgBd,CAAI,CAAC,CAClC,EAAG,IAAI,CACX,MAAQ,CACJO,EAAS,iDAAiD,CAC9D,QAAA,CACIF,EAAW,EAAK,CACpB,CACJ,EAEA,OAAIhB,EAEI6B,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACX,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oEAAA,CAAqE,EACpFA,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,YAAA,CAAU,CAAA,EACtE,EAIJX,EAEIU,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,OACX,SAAAA,EAAAA,IAAC,OAAI,IAAI,wBAAwB,IAAI,aAAa,MAAO,IAAK,OAAQ,GAAI,UAAU,cAAc,EACtG,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,iGACX,SAAAA,EAAAA,IAACC,GAAM,UAAU,qCAAqC,KAAM,EAAA,CAAI,CAAA,CACpE,EAEAD,EAAAA,IAAC,KAAA,CAAG,UAAU,8DAA8D,SAAA,mBAE5E,EAEAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,mCAE7D,QAEC,MAAA,CAAI,UAAU,+DACX,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,CAAA,iBAC7BlB,IAAS,UAAY,mBAAqB,MAAA,CAAA,CAC7D,CAAA,CACJ,CAAA,EACJ,EAKJkB,EAAAA,KAAC,MAAA,CAAI,UAAU,6BAEX,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,OACX,SAAAA,EAAAA,IAAC,OAAI,IAAI,wBAAwB,IAAI,aAAa,MAAO,IAAK,OAAQ,GAAI,UAAU,cAAc,EACtG,EAEAA,EAAAA,IAAC,KAAA,CAAG,UAAU,0EAA0E,SAAA,yBAExF,EAEAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4DAA4D,SAAA,qCAEzE,EAEAD,EAAAA,KAAC,OAAA,CAAK,SAAUH,EAAc,UAAU,SAEpC,SAAA,CAAAG,EAAAA,KAAC,MAAA,CAAI,UAAU,OACX,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,SAAM,EACzFD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,QAAS,IAAMjB,EAAQ,MAAM,EAC7B,UAAW,iGAAiGD,IAAS,OAC/G,iEACA,kJACF,GAEJ,SAAA,CAAAmB,MAACE,GAAK,KAAM,GAAI,UAAWrB,IAAS,OAAS,eAAiB,gBAAiB,EAC/EmB,EAAAA,IAAC,OAAA,CAAK,UAAU,2BAA2B,SAAA,OAAI,EAC/CA,EAAAA,IAAC,OAAA,CAAK,UAAU,gDAAgD,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,EAExFD,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,QAAS,IAAMjB,EAAQ,SAAS,EAChC,UAAW,iGAAiGD,IAAS,UAC/G,iEACA,kJACF,GAEJ,SAAA,CAAAmB,MAACG,GAAU,KAAM,GAAI,UAAWtB,IAAS,UAAY,eAAiB,gBAAiB,EACvFmB,EAAAA,IAAC,OAAA,CAAK,UAAU,2BAA2B,SAAA,UAAO,EAClDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gDAAgD,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAAA,CACvF,CAAA,CACJ,CAAA,EACJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACX,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,YAAS,EAC5FA,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,YAAY,uBACZ,MAAO1B,EACP,SAAWuB,GAAMtB,EAAQsB,EAAE,OAAO,KAAK,EACvC,UAAU,uOAAA,CAAA,CACd,EACJ,EAGAE,EAAAA,KAAC,MAAA,CAAI,UAAU,OACX,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,QAAK,EACxFA,EAAAA,IAAC,QAAA,CACG,KAAK,QACL,YAAY,mBACZ,MAAOvB,EACP,SAAWoB,GAAMnB,EAASmB,EAAE,OAAO,KAAK,EACxC,UAAU,uOAAA,CAAA,CACd,EACJ,EAGAE,EAAAA,KAAC,MAAA,CAAI,UAAU,OACX,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,WAAQ,EAC3FD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACX,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACG,KAAMjB,EAAe,OAAS,WAC9B,YAAY,oBACZ,MAAOJ,EACP,SAAWkB,GAAMjB,EAAYiB,EAAE,OAAO,KAAK,EAC3C,UAAU,6OAAA,CAAA,EAEdG,EAAAA,IAAC,SAAA,CACG,KAAK,SACL,QAAS,IAAMhB,EAAgB,CAACD,CAAY,EAC5C,UAAU,wFAET,SAAAA,QAAgBqB,EAAA,CAAO,KAAM,GAAI,EAAKJ,EAAAA,IAACK,EAAA,CAAI,KAAM,EAAA,CAAI,CAAA,CAAA,CAC1D,CAAA,CACJ,CAAA,EACJ,EAGAL,EAAAA,IAAC,KAAA,CAAG,UAAU,iBACT,SAAA,CACG,CAAE,IAAK,SAAU,KAAM,uBAAA,EACvB,CAAE,IAAK,QAAS,KAAM,sBAAA,EACtB,CAAE,IAAK,QAAS,KAAM,sBAAA,EACtB,CAAE,IAAK,SAAU,KAAM,YAAA,EACvB,CAAE,IAAK,SAAU,KAAM,oBAAA,CAAqB,EAC9C,IAAI,CAAC,CAAE,IAAAM,EAAK,KAAAC,KACVR,EAAAA,KAAC,KAAA,CAEG,UAAW,mCAAmCR,EAAMe,CAAG,EAAI,iBAAmB,eAC1E,GAEH,SAAA,CAAAf,EAAMe,CAAG,EAAIN,MAACC,EAAA,CAAM,KAAM,GAAI,EAAKD,EAAAA,IAACQ,EAAA,CAAE,KAAM,EAAA,CAAI,EAChDD,CAAA,CAAA,EALID,CAAA,CAOZ,EACL,EAECnB,GACGa,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAyC,SAAAb,EAAM,EAGhEa,EAAAA,IAAC,SAAA,CACG,KAAK,SACL,SAAUf,EACV,UAAU,8IAET,WAAU,sBAAwB,SAAA,CAAA,CACvC,EACJ,EAEAc,EAAAA,KAAC,MAAA,CAAI,UAAU,4DAA4D,SAAA,CAAA,2BAC9C,UACxBU,EAAA,CAAK,GAAG,SAAS,UAAU,2CAA2C,SAAA,SAAA,CAEvE,CAAA,CAAA,CACJ,CAAA,EACJ,CAER"}