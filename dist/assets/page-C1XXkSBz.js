import{c as L,a5 as pe,a6 as be,u as I,r as i,j as e,F as $,a as H,g as se,L as k,q as ye,h as O,C as fe,k as V,H as ne,X as D,ag as je,ah as ve,ai as we,a2 as Ne,T as ke,S as Se,w as re,B as Ce}from"./index-Da7XMO_V.js";import{g as Pe}from"./applicationsService-DIDU2x9Z.js";import{A as G}from"./activity-CjNLBg-e.js";import{C as T}from"./circle-check-BOtlr7mK.js";import{C as E}from"./clock-DxdokMfQ.js";import{M as Y}from"./message-circle-DHy2dGbh.js";import{A}from"./arrow-right-Ds6Oqwjp.js";import{E as K}from"./eye-DZPq23ha.js";import{S as W}from"./send-Br80mSum.js";import{f as ie}from"./formatDistanceToNow-DXTjigy3.js";import{B as ze}from"./building-BugdD1JZ.js";import{S as Ae}from"./star-CE5u2uMJ.js";import{Z as De,a as Me}from"./zoom-out-DNqkkjZA.js";import _e from"./PropertyCard-DKWCqJd3.js";import{P as Le}from"./PropertyCardSkeleton-DoXbXKOA.js";import{T as Te,L as Re}from"./twitter-BFJNeGBu.js";import{S as le}from"./sparkles-C6faFffv.js";import{T as Ee}from"./trending-up-DZzFJD-J.js";import{D as Ie}from"./dollar-sign-Ct0i7cF1.js";import{M as $e}from"./map-YIJBkWP1.js";import"./ShareModal-vEUtzNvG.js";import"./share-2-ClnZqC4G.js";import"./maximize-DSHDdrQv.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],Be=L("bookmark",qe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ue=L("external-link",Fe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Ge=L("instagram",Ve);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],He=L("key",We);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ye=L("navigation",Oe),Ke=()=>be("core"),Ze=async({status:r=null,page:t=1,limit:h=10,sortBy:x="created_at",order:b="desc"}={})=>{try{const u=new URL(`${Ke()}/api/v1/properties`);u.searchParams.append("page",String(t)),u.searchParams.append("limit",String(h)),u.searchParams.append("sort_by",x),u.searchParams.append("sort_order",b),r&&u.searchParams.append("status",r);const y=await pe(u.toString()),f=Array.isArray(y)?y:y.properties||y,c=y.total||(Array.isArray(y)?y.length:0);return{data:f,pagination:{page:t,limit:h,totalCount:c,totalPages:Math.ceil(c/h),hasNextPage:c>t*h,hasPreviousPage:t>1},error:null}}catch(u){return console.error("[userPropertiesService] Error:",u.message),{data:null,pagination:null,error:{message:u.message||"Failed to fetch properties"}}}},Je=[{name:"Application Submitted",description:"Your buying application has been received.",icon:W,color:"blue",tips:["Ensure documents ready"]},{name:"Document Verification",description:"Verifying identity and funds.",icon:$,color:"purple",tips:["Upload ID"],requiredDocs:["ID","Proof of Funds"]},{name:"Property Inspection",description:"Schedule viewing.",icon:K,color:"orange",tips:["Check structure"]},{name:"Offer Negotiation",description:"Offer under review.",icon:Y,color:"yellow",tips:["Set budget"]},{name:"Completion",description:"Finalize contracts.",icon:T,color:"green",tips:["Sign contracts"]}],oe=[{name:"Interest Registered",description:"Interest shown.",icon:A,color:"blue",tips:["Broker will contact"]},{name:"Documents Submitted",description:"Docs under review.",icon:$,color:"purple",tips:["Employment proof"],requiredDocs:["ID","References"]},{name:"Viewing Scheduled",description:"Viewing arranged.",icon:E,color:"orange",tips:["Ask about utilities"]},{name:"Tenancy Agreement",description:"Sign agreement.",icon:T,color:"green",tips:["Read terms"]}],de=[{name:"Property Listed",description:"Listing prepared.",icon:$,color:"blue"},{name:"Photos & Valuation",description:"Photos in progress.",icon:K,color:"purple"},{name:"Published & Live",description:"Property is live.",icon:G,color:"green"},{name:"Viewings & Offers",description:" receiving offers.",icon:Y,color:"orange"},{name:"Sale Completed",description:"Sale complete.",icon:T,color:"green"}],Qe=[{id:"app-1",type:"buy",currentStage:"Document Verification",currentStageNumber:2,totalStages:5,progress:40,lastUpdated:new Date(Date.now()-72e5),nextAction:"Upload remaining documents",estimatedCompletion:"3-5 business days",property:{id:"prop-1",title:"Modern 3BR Apartment",city:"Canary Wharf, London",price:45e4,image_urls:["https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400"]},broker:{name:"Sarah Mitchell",phone:"+44 7700 900123",avatar:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=100"},stages:Je.map((r,t)=>({...r,status:t<1?"completed":t===1?"current":"upcoming",completedAt:t<1?new Date:null})),timeline:[{date:new Date(Date.now()-864e5),event:"Application submitted",type:"milestone"},{date:new Date(Date.now()-72e5),event:"Awaiting: Proof of funds",type:"action"}]},{id:"app-2",type:"rent",currentStage:"Viewing Scheduled",currentStageNumber:3,totalStages:4,progress:75,lastUpdated:new Date(Date.now()-18e5),nextAction:"Attend scheduled viewing",viewingDate:new Date(Date.now()+1728e5),estimatedCompletion:"1-2 weeks",property:{id:"prop-2",title:"Luxury Studio Flat",city:"Manchester City Centre",price:1500,image_urls:["https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=400"]},broker:{name:"James Wilson",phone:"+44 7700 900456",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100"},stages:oe.map((r,t)=>({...r,status:t<2?"completed":t===2?"current":"upcoming",completedAt:t<2?new Date:null})),timeline:[{date:new Date(Date.now()-18e5),event:"Viewing scheduled for tomorrow",type:"action"}]}],Xe=[{id:"list-1",type:"sell",currentStage:"Published & Live",currentStageNumber:3,totalStages:5,progress:60,lastUpdated:new Date(Date.now()-36e5),nextAction:"Review incoming inquiries",property:{id:"prop-3",title:"Victorian Townhouse",city:"Cotswolds",price:85e4,image_urls:["https://images.unsplash.com/photo-1568605114967-8130f3a36994?q=80&w=400"]},stats:{views:127,inquiries:8,saved:23},stages:de.map((r,t)=>({...r,status:t<2?"completed":t===2?"current":"upcoming",completedAt:t<2?new Date:null})),timeline:[{date:new Date(Date.now()-36e5),event:"8 new inquiries received",type:"info"}]}],et=({stage:r,size:t=20})=>{const h=r.icon||T;return e.jsx(h,{size:t})},tt=({event:r})=>{const t={milestone:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800",success:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 border-green-200 dark:border-green-800",action:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-800",info:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700"};return e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"flex-shrink-0 w-20 text-right text-xs text-gray-400 pt-0.5",children:ie(r.date,{addSuffix:!0})}),e.jsx("div",{className:`flex-1 px-3 py-2 rounded-lg border ${t[r.type]||t.info}`,children:r.event})]})},at=()=>e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2].map(r=>e.jsx("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-200 dark:bg-gray-700 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded"})]})]})},r))}),st=()=>{const r=I(),[t,h]=i.useState("applications"),[x,b]=i.useState(null),[u,y]=i.useState({}),[f,c]=i.useState(!0),[C,o]=i.useState([]),[P,N]=i.useState([]);i.useEffect(()=>{(async()=>{c(!0);try{const g=await Pe();if(g.data){const S=g.data.map(n=>({id:n.id,type:"rent",currentStage:n.status==="approved"?"Tenancy Agreement":n.status==="rejected"?"Application Rejected":"Documents Submitted",currentStageNumber:n.status==="approved"?4:2,totalStages:4,progress:n.status==="approved"?100:50,lastUpdated:new Date(n.updated_at),nextAction:n.status==="approved"?"Sign Agreement":"Wait for review",estimatedCompletion:"1-2 weeks",property:{id:n.property_id,title:n.propertyInterested||"Unknown Property",city:"Unknown City",price:0,image_urls:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80"]},stages:oe.map((a,d)=>({...a,status:n.status==="approved"&&d<4||n.status!=="approved"&&d<2?"completed":n.status!=="approved"&&d===2?"current":"upcoming"}))}));o(S)}const m=await Ze({limit:50});if(m.data){const S=m.data.map(n=>({id:n.id,type:n.status==="sold"?"sell":"rent",currentStage:n.status==="available"?"Published & Live":n.status==="sold"?"Sale Completed":"Property Listed",currentStageNumber:n.status==="available"?3:n.status==="sold"?5:1,totalStages:5,progress:n.status==="available"?60:n.status==="sold"?100:20,lastUpdated:new Date(n.updated_at),nextAction:"Manage listing",property:{id:n.id,title:n.title,city:n.city||"Unknown",price:n.price||0,image_urls:n.images&&n.images.length>0?n.images:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80"]},stats:{views:n.view_count||0,inquiries:0,saved:n.favorite_count||0},stages:de.map((a,d)=>({...a,status:n.status==="sold"||n.status==="available"&&d<3?"completed":n.status==="available"&&d===2?"current":"upcoming"}))}));N(S)}}catch(g){console.error("Failed to fetch timeline data",g)}finally{c(!1)}})()},[]);const j=t==="applications"?C:P,w=(l,g)=>{if(l==="completed")return"bg-green-500 border-green-500 text-white";if(l==="current"){const m={blue:"bg-blue-500 border-blue-500",purple:"bg-purple-500 border-purple-500",orange:"bg-orange-500 border-orange-500",yellow:"bg-yellow-500 border-yellow-500",green:"bg-green-500 border-green-500"};return`${m[g]||m.orange} text-white ring-4 ring-orange-100 dark:ring-orange-900/30`}return"bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-400"};return e.jsxs("div",{id:"realtime-tracking-widget",className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"px-8 py-8 border-b border-gray-100 dark:border-gray-800 bg-gradient-to-r from-orange-50/50 to-transparent dark:from-orange-900/10",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:e.jsx(G,{size:28,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:["Real-Time Tracking",e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm font-semibold rounded-full",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-300 mt-1",children:"Track every step of your property journey in real-time"})]})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1.5",children:[e.jsxs("button",{onClick:()=>h("applications"),className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${t==="applications"?"bg-white dark:bg-gray-700 text-orange-600 dark:text-orange-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:["My Applications (",Qe.length,")"]}),e.jsxs("button",{onClick:()=>h("listings"),className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${t==="listings"?"bg-white dark:bg-gray-700 text-orange-600 dark:text-orange-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:["My Listings (",Xe.length,")"]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:f?e.jsx(at,{}):j.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center",children:e.jsx($,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:["No active ",t]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Start your property journey today"})]}):j.map(l=>{var g;return e.jsxs("div",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/30 transition-colors",children:[e.jsx("div",{className:"px-6 py-5 cursor-pointer",onClick:()=>b(x===l.id?null:l.id),children:e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:l.property.image_urls[0],alt:l.property.title,className:"w-20 h-20 rounded-xl object-cover shadow-sm bg-gray-100 dark:bg-gray-700"}),e.jsx("span",{className:`absolute -bottom-1 -left-1 px-2 py-0.5 text-[10px] font-bold rounded-md uppercase shadow-sm ${l.type==="buy"?"bg-blue-500":l.type==="rent"?"bg-purple-500":"bg-green-500"} text-white`,children:l.type})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:l.property.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mt-0.5",children:[e.jsx(H,{size:14}),l.property.city]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-xl text-gray-900 dark:text-white",children:["Â£",l.property.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Updated ",ie(l.lastUpdated,{addSuffix:!0})]})]})]}),e.jsx("div",{className:"flex items-center gap-4 mt-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${l.progress>=75?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400"}`,children:l.progress>=75?e.jsx(T,{size:14}):e.jsx(E,{size:14})}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:l.currentStage}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Step ",l.currentStageNumber," of ",l.totalStages]})]}),e.jsx("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-orange-400 to-orange-500 rounded-full transition-all duration-500",style:{width:`${l.progress}%`}})})]})})]}),e.jsx(se,{size:20,className:`text-gray-400 transition-transform duration-200 ${x===l.id?"rotate-180":""}`})]})}),x===l.id&&e.jsxs("div",{className:"px-6 pb-6 animate-fadeIn",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-5 mb-5",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(G,{size:16,className:"text-orange-500"})," Complete Journey Progress"]}),e.jsxs("div",{className:"relative space-y-4",children:[e.jsx("div",{className:"absolute left-5 top-4 bottom-4 w-0.5 bg-gray-200 dark:bg-gray-700"}),(g=l.stages)==null?void 0:g.map((m,S)=>e.jsxs("div",{className:"relative flex items-start gap-4",children:[e.jsx("div",{className:`relative z-10 w-10 h-10 rounded-full flex items-center justify-center bg-white dark:bg-gray-900 ring-4 ring-gray-50 dark:ring-gray-800 ${w(m.status,m.color)}`,children:e.jsx(et,{stage:m,size:16})}),e.jsxs("div",{className:"flex-1 pb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m.description})]})]},S))]})]}),l.timeline&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("button",{onClick:m=>{m.stopPropagation(),y(S=>({...S,[l.id]:!S[l.id]}))},className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-semibold flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(E,{size:16})," Activity Timeline"]}),e.jsx(se,{size:16,className:u[l.id]?"rotate-180":""})]}),u[l.id]&&e.jsx("div",{className:"mt-3 space-y-2 pl-2",children:l.timeline.map((m,S)=>e.jsx(tt,{event:m},S))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>r(`/user/dashboard/property/${l.property.id}`),className:"px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:["View Property ",e.jsx(Ue,{size:14})]}),e.jsxs("button",{className:"px-5 py-2.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold flex items-center gap-2",children:[e.jsx(Y,{size:14})," Send Message"]})]})]})]},l.id)})})]})},rt=[{id:"agency-1",name:"Prime Estate Agents",rating:4.8,reviewCount:124,distance:"0.5 miles",address:"123 High St",image:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80",verified:!0},{id:"agency-2",name:"Luxury Living",rating:4.9,reviewCount:89,distance:"1.2 miles",address:"45 Park Lane",image:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80",verified:!0},{id:"agency-3",name:"Modern Homes UK",rating:4.6,reviewCount:205,distance:"1.8 miles",address:"78 Queen's Road",image:"https://images.unsplash.com/photo-1554469384-e58fac16e23a?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80",verified:!0}],nt=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ze,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Top Rated Agencies"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Nearby professionals"})]})]}),e.jsxs(k,{to:"/user/dashboard/agencies",className:"text-xs font-semibold text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 flex items-center gap-1",children:["View All ",e.jsx(ye,{size:14})]})]}),e.jsx("div",{className:"space-y-4",children:rt.map(r=>e.jsxs("div",{className:"flex items-center gap-4 group cursor-pointer",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-12 h-12 rounded-lg object-cover bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-white truncate group-hover:text-orange-600 transition-colors",children:r.name}),r.verified&&e.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded-full font-medium",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("div",{className:"flex items-center text-xs font-medium text-gray-900 dark:text-white",children:[e.jsx(Ae,{size:12,className:"text-yellow-400 fill-yellow-400 mr-0.5"}),r.rating,e.jsxs("span",{className:"text-gray-400 dark:text-gray-500 font-normal ml-0.5",children:["(",r.reviewCount,")"]})]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600 text-xs",children:"â€¢"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(H,{size:10,className:"mr-0.5"}),r.distance]})]})]})]},r.id))}),e.jsx("button",{className:"w-full mt-6 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Find Agent by Postcode"})]}),it=()=>{const{user:r}=O(),[t,h]=i.useState("buy"),[x,b]=i.useState(""),[u,y]=i.useState(""),[f,c]=i.useState(""),[C,o]=i.useState(!1),[P,N]=i.useState(!1),[j,w]=i.useState(null),l=async g=>{g.preventDefault(),o(!0),w(null),N(!1);try{await new Promise(m=>setTimeout(m,1500)),N(!0),b(""),y(""),c("")}catch{w("Failed to submit request. Please try again.")}finally{o(!1)}};return P?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 h-full flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx(fe,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Request Sent!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6 max-w-xs",children:"Your request has been broadcasted to verified top-rated brokers in your area. You'll receive proposals shortly."}),e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm font-medium",children:"Send Another Request"})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(W,{size:20,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Request a Broker"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Get proposals from top-rated agents"})]})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700/50 p-1 rounded-lg",children:["buy","rent","sell"].map(g=>e.jsx("button",{type:"button",onClick:()=>h(g),className:`flex-1 py-1.5 text-xs font-medium rounded-md capitalize transition-all ${t===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:g},g))}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Preferred Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{size:14,className:"absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{type:"text",value:u,onChange:g=>y(g.target.value),placeholder:"e.g. Downtown, West End",className:"w-full pl-9 pr-3 py-2 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Budget / Price Range"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-400 text-xs font-bold",children:"Â£"}),e.jsx("input",{type:"text",value:f,onChange:g=>c(g.target.value),placeholder:"e.g. 500k - 600k",className:"w-full pl-9 pr-3 py-2 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Requirements"}),e.jsx("textarea",{value:x,onChange:g=>b(g.target.value),placeholder:"e.g. 2 bedrooms, balcony, pet friendly...",rows:3,className:"w-full p-3 text-sm bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all resize-none",required:!0})]})]}),j&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/10 p-2 rounded-lg",children:[e.jsx(V,{size:14}),j]}),e.jsxs("button",{type:"submit",disabled:C,className:"w-full py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-medium rounded-lg shadow-md shadow-orange-500/20 transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[C?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(W,{size:16}),C?"Broadcasting...":"Broadcast Request"]}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 dark:text-gray-500",children:"Your request will be sent to verified brokers only."})]})]})},lt=(r,t,h,x)=>{const u=(h-r)*Math.PI/180,y=(x-t)*Math.PI/180,f=Math.sin(u/2)*Math.sin(u/2)+Math.cos(r*Math.PI/180)*Math.cos(h*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 3959*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))},ot=({properties:r=[],userLocation:t=null,onPropertyClick:h=null})=>{var n;const x=I(),[b,u]=i.useState(null),y={lat:51.5074,lng:-.1278},[f,c]=i.useState(()=>{try{return t&&t.latitude&&t.longitude?{lat:t.latitude,lng:t.longitude}:y}catch{return y}}),[C,o]=i.useState(12),P=i.useMemo(()=>{try{return!r||!Array.isArray(r)||r.length===0?[]:!t||!t.latitude||!t.longitude?r.map(a=>({...a,distance:null,category:"other"})):r.map(a=>{if(!a||!a.latitude||!a.longitude)return{...a,distance:null,category:"other"};try{const d=lt(t.latitude,t.longitude,a.latitude,a.longitude);let p="other";return d<=1?p="very-near":d<=3?p="near":d<=5?p="moderate":p="far",{...a,distance:Math.round(d*10)/10,category:p}}catch{return{...a,distance:null,category:"other"}}})}catch{return r||[]}},[r,t]),j=i.useMemo(()=>[...P].sort((a,d)=>a.distance===null||a.distance===void 0?1:d.distance===null||d.distance===void 0?-1:a.distance-d.distance),[P]).filter(a=>a.latitude&&a.longitude),w=i.useMemo(()=>{if(j.length===0)return null;const a=j.map(p=>p.latitude),d=j.map(p=>p.longitude);return{minLat:Math.min(...a),maxLat:Math.max(...a),minLng:Math.min(...d),maxLng:Math.max(...d)}},[j]);i.useEffect(()=>{if(w&&j.length>0){const a=(w.minLat+w.maxLat)/2,d=(w.minLng+w.maxLng)/2;c({lat:a,lng:d})}else t&&t.latitude&&c({lat:t.latitude,lng:t.longitude})},[w,t,j.length]);const l=a=>{u(a),h&&h(a)},g=a=>{x(`/user/dashboard/property/${a.id}`)},m=a=>{switch(a){case"very-near":return"bg-green-500";case"near":return"bg-orange-500";case"moderate":return"bg-yellow-500";case"far":return"bg-gray-400";default:return"bg-blue-500"}},S=(a,d,p)=>{if(!p){const B=(a-f.lat)*100/.1;return{left:`${50+(d-f.lng)*100/.1}%`,top:`${50-B}%`}}const z=p.maxLat-p.minLat||.1,M=p.maxLng-p.minLng||.1,R=(d-p.minLng)/M*100,q=(p.maxLat-a)/z*100;return{left:`${Math.max(5,Math.min(95,R))}%`,top:`${Math.max(5,Math.min(95,q))}%`}};return e.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("iframe",{title:"Map View",width:"100%",height:"100%",frameBorder:0,style:{border:0,position:"absolute",inset:0,zIndex:0},src:`https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d${3e4/C}!2d${f.lng}!3d${f.lat}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e1!3m2!1sen!2suk!4v1640000000000!5m2!1sen!2suk`,allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none",children:e.jsxs("div",{className:"relative w-full h-full pointer-events-auto",children:[t&&t.latitude&&e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-20",style:S(t.latitude,t.longitude,w),children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full border-2 border-white shadow-lg flex items-center justify-center animate-pulse",children:e.jsx(Ye,{size:14,className:"text-white"})}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap bg-blue-600 text-white text-xs px-2 py-1 rounded shadow-lg",children:"Your Location"})]})}),j.map(a=>{var p;const d=S(a.latitude,a.longitude,w);return e.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-10",style:d,children:e.jsxs("button",{onClick:()=>l(a),className:"relative group",children:[e.jsx("div",{className:`w-10 h-10 ${m(a.category)} rounded-full border-2 border-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform cursor-pointer`,children:e.jsx(ne,{size:20,className:"text-white"})}),a.distance!==null&&a.distance!==void 0&&e.jsxs("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:[a.distance," mi"]}),(b==null?void 0:b.id)===a.id&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm mb-1",children:a.title||"Property"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:a.address_line_1||a.city||"UK"}),e.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:["Â£",(p=a.price)==null?void 0:p.toLocaleString(),a.property_type==="rent"&&"/month"]}),a.distance!==null&&a.distance!==void 0&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[a.distance," miles away"]})]}),e.jsx("button",{onClick:z=>{z.stopPropagation(),u(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:e.jsx(D,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400 mb-3",children:[a.bedrooms&&a.bedrooms>0&&e.jsxs("span",{children:[a.bedrooms," Bed",a.bedrooms!==1?"s":""]}),a.bathrooms&&a.bathrooms>0&&e.jsxs("span",{children:[a.bathrooms," Bath",a.bathrooms!==1?"s":""]})]}),e.jsx("button",{onClick:()=>g(a),className:"w-full px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors",children:"View Details"})]})]})},a.id)}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 z-20",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Distance"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Very Near (<1 mi)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Near (1-3 mi)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Moderate (3-5 mi)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Far (5+ mi)"})]})]})]}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-20",children:[e.jsx("button",{onClick:()=>o(a=>Math.min(20,a+1)),className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsx(De,{size:20,className:"text-gray-700 dark:text-gray-300"})}),e.jsx("button",{onClick:()=>o(a=>Math.max(5,a-1)),className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsx(Me,{size:20,className:"text-gray-700 dark:text-gray-300"})})]}),e.jsx("div",{className:"absolute top-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg px-4 py-2 z-20",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:[j.length," ",j.length===1?"Property":"Properties"," Nearby"]})})]})})]}),b&&e.jsxs("div",{className:"absolute top-4 right-4 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-30 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Property Details"}),e.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(D,{size:20})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.address_line_1}),e.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:["Â£",(n=b.price)==null?void 0:n.toLocaleString(),b.property_type==="rent"&&"/month"]}),b.distance!==null&&b.distance!==void 0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.distance," miles away"]})]})]})]})},dt=()=>e.jsxs("footer",{className:"bg-white mt-auto",children:[e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase mb-4",style:{color:"#1e3a5f"},children:"ESTOSPACES.COM"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(k,{to:"/contact",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Contact Us"})}),e.jsx("li",{children:e.jsx(k,{to:"/faq",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"FAQ"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase mb-4",style:{color:"#1e3a5f"},children:"Search"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?tab=buy&type=residential",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Search homes for sale"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?tab=rent&type=residential",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Search homes for rent"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?tab=buy&type=commercial",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Commercial for sale"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?tab=rent&type=commercial",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Commercial to rent"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?new=true&tab=buy",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"New homes"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase mb-4",style:{color:"#1e3a5f"},children:"Locations"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?location=uk",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Major towns and cities in the UK"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?location=london",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"London"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?location=cornwall",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Cornwall"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?location=glasgow",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Glasgow"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?location=cardiff",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Cardiff"})}),e.jsx("li",{children:e.jsx(k,{to:"/user/dashboard/discover?location=edinburgh",className:"text-gray-700 hover:text-orange-600 transition-colors",children:"Edinburgh"})})]})]})]})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Â© 2026 Estospaces. All rights reserved."}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-700",children:[e.jsx(k,{to:"/privacy",className:"hover:text-orange-600 transition-colors",children:"Privacy Policy"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx(k,{to:"/cookies",className:"hover:text-orange-600 transition-colors",children:"Cookie Policy"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx(k,{to:"/terms",className:"hover:text-orange-600 transition-colors",children:"Terms & Conditions"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"https://x.com/ESTOSPACES",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-orange-600 transition-colors","aria-label":"X (Twitter)",children:e.jsx(Te,{size:18})}),e.jsx("a",{href:"https://www.instagram.com/estospaces/ram",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-orange-600 transition-colors","aria-label":"Instagram",children:e.jsx(Ge,{size:18})}),e.jsx("a",{href:"https://www.linkedin.com/company/estospaces-solutions-private-limited/?viewAsMember=true",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-orange-600 transition-colors","aria-label":"LinkedIn",children:e.jsx(Re,{size:18})})]})]})})})]}),ct=()=>{const r=I(),{user:t,loading:h}=O(),[x,b]=i.useState(!0);return i.useMemo(()=>{var f,c;if(h||!t)return!1;const u=(t==null?void 0:t.name)||((f=t==null?void 0:t.user_metadata)==null?void 0:f.full_name),y=(c=t==null?void 0:t.user_metadata)==null?void 0:c.phone;return!u||!y},[t,h]),!t||!x?null:e.jsx("div",{id:"profile-widget",className:"animate-slideInRight",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-orange-400/50 to-pink-600/50 rounded-xl opacity-50 blur-sm group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-pulse"}),e.jsxs("div",{className:"relative flex items-center gap-4 bg-white dark:bg-gray-800 p-3 pr-8 rounded-xl shadow-lg max-w-sm hover:shadow-xl transition-shadow duration-300",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-50 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:e.jsx(le,{size:18,className:"text-orange-500"})}),e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white leading-tight",children:"Complete Profile"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 leading-tight",children:"Unlock verified access"})]}),e.jsx("button",{onClick:()=>r("/user/dashboard/profile"),className:"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full hover:scale-105 transition-transform shadow-md",children:e.jsx(A,{size:14})}),e.jsx("button",{onClick:()=>b(!1),className:"absolute top-2 right-2 w-5 h-5 bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 rounded-full flex items-center justify-center hover:bg-red-50 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(D,{size:10})})]})]})})},gt=()=>{var Z,J,Q,X,ee,te;const r=I(),[t,h]=je(),{user:x}=O(),{activeLocation:b,loading:u}=ve(),{setActiveTab:y}=we(),{savedProperties:f}=Ne(),[c,C]=i.useState(()=>{const s=t.get("type");return s==="buy"||s==="rent"||s==="sold"?s:"sold"}),[o,P]=i.useState(()=>{const s=t.get("filter");return s?s.split(",").filter(v=>v):[]}),[N,j]=i.useState(()=>t.get("location")||""),[w,l]=i.useState(!1),[g,m]=i.useState(null),[S,n]=i.useState(null),[a,d]=i.useState([]),[p,z]=i.useState(!1),[M,R]=i.useState(0);i.useEffect(()=>{const s=t.get("type");s==="buy"||s==="rent"||s==="sold"?C(s):s||C("sold")},[t]),i.useEffect(()=>{const s=t.get("filter");P(s?s.split(",").filter(v=>v):[])},[t]);const q=()=>{const s=new Date().getHours();return s<12?"Good morning":s<17?"Good afternoon":"Good evening"},B=((J=(Z=x==null?void 0:x.user_metadata)==null?void 0:Z.full_name)==null?void 0:J.split(" ")[0])||((X=(Q=x==null?void 0:x.user_metadata)==null?void 0:Q.name)==null?void 0:X.split(" ")[0])||((ee=x==null?void 0:x.name)==null?void 0:ee.split(" ")[0])||((te=x==null?void 0:x.email)==null?void 0:te.split("@")[0])||"there",F=i.useCallback(async()=>{l(!0),m(null),z(!0);try{const s={search:N.trim(),listingType:c==="rent"?["rent"]:["sale"]};c==="sold"&&(s.status=["sold"]);const v=await ke(s);v.error?(m(v.error),d([]),R(0)):v.data&&(d(v.data),R(v.data.length),v.data.length===0&&n("No properties found matching your search. Try adjusting your criteria."))}catch(s){console.error("[Dashboard] Error filtering properties:",s),m(s.message)}finally{l(!1)}},[c,o,N]),ce=i.useCallback(s=>{if(s==null||s.preventDefault(),m(null),n(null),o.length>0||N.trim())F();else{const v=new URLSearchParams;c==="buy"?v.set("tab","buy"):c==="rent"?v.set("tab","rent"):c==="sold"&&(v.set("tab","buy"),v.set("status","sold")),r(`/user/dashboard/discover?${v.toString()}`)}},[N,c,o,r,F]),ge=b||{type:"default",postcode:"SW1A 1AA",latitude:51.5074,longitude:-.1278,city:"London",source:"default"},xe=i.useMemo(()=>a.filter(s=>s&&s.latitude&&s.longitude),[a]);return e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto dark:bg-[#0a0a0a] min-h-screen transition-all duration-300",children:[e.jsxs("div",{id:"greeting-section",className:"flex items-center justify-between animate-fadeIn",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-semibold text-gray-900 dark:text-white",children:[q(),", ",e.jsx("span",{className:"text-orange-500 capitalize",children:B})," ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"What would you like to do today?"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(ct,{})})]}),e.jsxs("div",{id:"hero-search",className:"relative rounded-3xl shadow-soft-xl overflow-hidden min-h-[500px] lg:min-h-[550px] flex flex-col items-center justify-center animate-fadeIn group",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-transform duration-1000 group-hover:scale-105",style:{backgroundImage:"url('https://images.pexels.com/photos/8293778/pexels-photo-8293778.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&dpr=2')"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/70 via-gray-900/50 to-orange-900/30"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-20 bg-gradient-to-b from-black/20 to-transparent"}),e.jsxs("div",{className:"relative z-10 text-center px-4 md:px-6 max-w-5xl mx-auto w-full",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight tracking-tight animate-slideUp",style:{textShadow:"0 4px 20px rgba(0,0,0,0.5), 0 2px 8px rgba(0,0,0,0.3)"},children:["Find your ",e.jsx("span",{className:"text-orange-400",style:{textShadow:"0 4px 20px rgba(251,146,60,0.4), 0 2px 8px rgba(0,0,0,0.3)"},children:"perfect space"})]}),e.jsx("p",{className:"text-white text-lg md:text-xl mb-10 max-w-2xl mx-auto animate-slideUp font-medium tracking-wide",style:{animationDelay:"0.1s",textShadow:"0 2px 12px rgba(0,0,0,0.5), 0 1px 4px rgba(0,0,0,0.3)"},children:"Discover thousands of premium properties for sale and rent across the UK"}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl rounded-3xl p-6 lg:p-8 shadow-2xl max-w-4xl mx-auto animate-slideUp border border-white/50 ring-1 ring-black/5",style:{animationDelay:"0.2s"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 bg-gray-100/80 p-1.5 rounded-2xl w-fit mx-auto border border-gray-200/50",children:[e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),C("buy"),h({type:"buy"},{replace:!0})},className:`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${c==="buy"?"bg-white text-orange-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Buy"}),e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),C("rent"),h({type:"rent"},{replace:!0})},className:`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${c==="rent"?"bg-white text-orange-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Rent"}),e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),C("sold"),h({type:"sold"},{replace:!0})},className:`px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${c==="sold"?"bg-white text-orange-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-900 hover:bg-gray-200/50"}`,children:"Sold"})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-8",children:[{id:"all",label:"All Properties",icon:le},{id:"recently_added",label:"Recently Added",icon:E},{id:"most_viewed",label:"Most Visited",icon:K},{id:"high_demand",label:"High Demand",icon:Ee},{id:"budget_friendly",label:"Budget Friendly",icon:Ie}].map(s=>{const v=s.icon,me=s.id==="all"&&o.length===0,ae=s.id==="all"?me:o.includes(s.id);return e.jsxs("button",{type:"button",onClick:he=>{he.preventDefault();let _;s.id==="all"?_=[]:o.includes(s.id)?_=o.filter(ue=>ue!==s.id):_=[...o,s.id],P(_);const U=new URLSearchParams(t);_.length===0?U.delete("filter"):U.set("filter",_.join(",")),h(U,{replace:!0})},className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border ${ae?"bg-orange-50 text-orange-600 border-orange-200 shadow-none":"bg-white text-gray-600 border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(v,{size:16,className:ae?"text-orange-500":"text-gray-400"}),e.jsx("span",{children:s.label})]},s.id)})}),e.jsxs("form",{onSubmit:ce,className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative group/input",children:[e.jsx(Se,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within/input:text-orange-500 transition-colors",size:22}),e.jsx("input",{type:"text",value:N,onChange:s=>j(s.target.value),placeholder:"Enter postcode, city, or area...",className:"w-full pl-14 pr-12 py-4 bg-gray-50 hover:bg-white border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl text-gray-900 placeholder-gray-400 text-lg transition-all duration-300 outline-none shadow-inner",disabled:w}),N&&e.jsx("button",{type:"button",onClick:()=>j(""),className:"absolute right-5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:e.jsx(D,{size:20})})]}),e.jsx("button",{type:"submit",disabled:w,className:"px-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 active:from-orange-700 active:to-orange-800 text-white rounded-2xl font-bold text-lg transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-3 min-w-[160px] shadow-lg shadow-orange-500/30 hover:shadow-orange-500/40 transform hover:-translate-y-1",children:w?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"animate-spin",size:24}),e.jsx("span",{children:"Searching"})]}):e.jsx("span",{children:"Search"})})]})]})]})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-gray-100 rounded-2xl animate-pulse"}),children:e.jsx(it,{})})}),e.jsx("div",{children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-gray-100 rounded-2xl animate-pulse"}),children:e.jsx(nt,{})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{y("buy"),r("/user/dashboard/discover?tab=buy")},className:"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"p-3.5 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-violet-500/25",children:e.jsx(Ce,{size:24,className:"text-white",strokeWidth:1.5})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Buy Property"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Find your dream home"}),e.jsxs("span",{className:"text-violet-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all",children:["Browse ",e.jsx(A,{size:14})]})]}),e.jsxs("button",{onClick:()=>{y("rent"),r("/user/dashboard/discover?tab=rent")},className:"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"p-3.5 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-cyan-500/25",children:e.jsx(He,{size:24,className:"text-white",strokeWidth:1.5})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Rent Property"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Explore rentals"}),e.jsxs("span",{className:"text-cyan-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all",children:["Explore ",e.jsx(A,{size:14})]})]}),e.jsxs("button",{onClick:()=>r("/user/dashboard/saved"),className:"group bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"p-3.5 bg-gradient-to-br from-rose-500 to-pink-600 rounded-2xl w-fit mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-rose-500/25",children:e.jsx(Be,{size:24,className:"text-white",strokeWidth:1.5})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Saved"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:[(f==null?void 0:f.length)||0," properties"]}),e.jsxs("span",{className:"text-rose-600 text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all",children:["View All ",e.jsx(A,{size:14})]})]})]}),e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl animate-pulse"}),children:e.jsx(st,{})})]}),p&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-orange-500",children:[o.includes("recently_added")&&"Recently Added Properties",o.includes("most_viewed")&&!o.includes("recently_added")&&"Most Visited Properties",o.includes("high_demand")&&!o.includes("recently_added")&&!o.includes("most_viewed")&&"High Demand Properties",o.includes("budget_friendly")&&!o.includes("recently_added")&&!o.includes("most_viewed")&&!o.includes("high_demand")&&"Budget Friendly Properties",o.length===0&&N&&`Properties in "${N}"`,o.length===0&&!N&&"Search Results"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w?"Loading...":`${M} ${M===1?"property":"properties"} found`})]}),e.jsxs("button",{onClick:()=>{z(!1),d([]),P([]),j("")},className:"text-sm text-orange-600 hover:text-orange-700 font-medium flex items-center gap-1",children:[e.jsx(D,{size:16}),"Clear Results"]})]}),w?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsx(Le,{},s))}):a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(s=>e.jsx(_e,{property:s,onViewDetails:v=>r(`/user/dashboard/property/${v.id}`)},s.id))}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ne,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Try adjusting your filters or search criteria"}),e.jsx("button",{onClick:()=>{z(!1),P([]),j(""),r("/user/dashboard/discover")},className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors",children:"Browse All Properties"})]}),a.length>0&&M>12&&e.jsx("div",{className:"text-center mt-6",children:e.jsxs("button",{onClick:()=>{const s=new URLSearchParams;s.set("tab",c==="rent"?"rent":"buy"),o.length>0&&s.set("filter",o.join(",")),N&&s.set("location",N),r(`/user/dashboard/discover?${s.toString()}`)},className:"px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition-colors inline-flex items-center gap-2",children:["View All ",M," Properties",e.jsx(A,{size:18})]})})]}),g&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-slideDown",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/40 rounded-lg",children:e.jsx(V,{className:"text-red-600 dark:text-red-400",size:18})}),e.jsx("p",{className:"flex-1 text-sm font-medium text-red-800 dark:text-red-200",children:g}),e.jsx("button",{onClick:()=>m(null),className:"text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 p-1.5 rounded-lg transition-colors",children:e.jsx(D,{size:16})})]}),S&&!g&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex items-center gap-3 animate-slideDown",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg",children:e.jsx(V,{className:"text-amber-600 dark:text-amber-400",size:18})}),e.jsx("p",{className:"flex-1 text-sm text-amber-800 dark:text-amber-200",children:S}),e.jsx("button",{onClick:()=>n(null),className:"text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 p-1.5 rounded-lg transition-colors",children:e.jsx(D,{size:16})})]}),!p&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"text-orange-500",size:20}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-orange-500",children:"Nearby Properties"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:"Explore properties on the map - click markers to view details"})]}),e.jsxs("button",{onClick:()=>r("/user/dashboard/discover"),className:"flex items-center gap-2 px-4 py-2 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 text-sm font-medium transition-colors",children:[e.jsx("span",{children:"Browse All Properties"}),e.jsx(A,{size:16})]})]}),u?e.jsx("div",{className:"bg-white dark:bg-white rounded-lg shadow-sm border border-gray-200 dark:border-gray-300 overflow-hidden",children:e.jsx("div",{className:"h-[600px] lg:h-[700px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(re,{className:"animate-spin mx-auto mb-4 text-orange-500",size:48}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading nearby properties..."})]})})}):e.jsx("div",{className:"bg-white dark:bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"h-[600px] lg:h-[700px]",children:e.jsx(ot,{properties:xe,userLocation:ge,onPropertyClick:s=>r(`/user/dashboard/property/${s.id}`)})})})]}),e.jsx(dt,{})]})};function Rt(){return e.jsx(gt,{})}export{Rt as default};
//# sourceMappingURL=page-C1XXkSBz.js.map
