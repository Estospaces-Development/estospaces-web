{"version":3,"file":"page-B7Pm-344.js","sources":["../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js","../../src/services/reviewsService.ts","../../src/pages/user/dashboard/reviews/page.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"emmmcr\"\n    }\n  ],\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }]\n];\nconst ThumbsUp = createLucideIcon(\"thumbs-up\", __iconNode);\n\nexport { __iconNode, ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.js.map\n","/**\r\n * Reviews Service\r\n * Fetches and manages property reviews from the core-service backend\r\n */\r\n\r\nimport { apiFetch, getServiceUrl } from '@/lib/apiUtils';\r\n\r\nconst CORE_URL = () => getServiceUrl('core');\r\n\r\n// ── Interfaces ──────────────────────────────────────────────────────────────\r\n\r\nexport interface Review {\r\n    id: string;\r\n    property_id: string;\r\n    user_id: string;\r\n    rating: number;\r\n    comment: string;\r\n    status: 'pending' | 'approved' | 'rejected';\r\n    created_at: string;\r\n}\r\n\r\nexport interface ReviewResponse {\r\n    success: boolean;\r\n    data: {\r\n        reviews: Review[];\r\n        average_rating: number;\r\n        total_reviews: number;\r\n    } | null;\r\n    error?: string;\r\n}\r\n\r\n// ── API Functions ───────────────────────────────────────────────────────────\r\n\r\n/**\r\n * Get reviews for a property\r\n */\r\nexport async function getPropertyReviews(propertyId: string): Promise<ReviewResponse> {\r\n    try {\r\n        return await apiFetch<ReviewResponse>(`${CORE_URL()}/api/v1/reviews/property/${propertyId}`);\r\n    } catch (error: any) {\r\n        console.error('[reviewsService] Error:', error.message);\r\n        return { success: false, data: null, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Get current user's reviews\r\n */\r\nexport async function getUserReviews(): Promise<{ success: boolean; data: Review[] | null; error?: string }> {\r\n    try {\r\n        return await apiFetch<{ success: boolean; data: Review[] | null }>(`${CORE_URL()}/api/v1/reviews/mine`);\r\n    } catch (error: any) {\r\n        console.error('[reviewsService] Error:', error.message);\r\n        return { success: false, data: null, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Create a review\r\n */\r\nexport async function createReview(reviewData: {\r\n    property_id: string;\r\n    rating: number;\r\n    comment: string;\r\n}): Promise<{ success: boolean; data: Review | null; error?: string }> {\r\n    try {\r\n        return await apiFetch<{ success: boolean; data: Review | null }>(`${CORE_URL()}/api/v1/reviews`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(reviewData),\r\n        });\r\n    } catch (error: any) {\r\n        console.error('[reviewsService] Error:', error.message);\r\n        return { success: false, data: null, error: error.message };\r\n    }\r\n}\r\n\r\nexport const reviewsService = {\r\n    getPropertyReviews,\r\n    getUserReviews,\r\n    createReview,\r\n};\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Star, ThumbsUp, MessageSquare } from 'lucide-react';\r\n\r\n// Services\r\nimport { reviewsService, Review } from '@/services/reviewsService';\r\n\r\nexport default function ReviewsPage() {\r\n    const [reviews, setReviews] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchReviews = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const result = await reviewsService.getUserReviews();\r\n            if (result.data) {\r\n                const mapped = result.data.map((r: any) => ({\r\n                    ...r,\r\n                    property_title: 'Property Review', // Join with property title if possible\r\n                    property_image: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=200&h=200&fit=crop',\r\n                    date: new Date(r.created_at).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }),\r\n                    likes: 0 // Backend doesn't support likes yet\r\n                }));\r\n                setReviews(mapped);\r\n            }\r\n        } catch (err) {\r\n            console.error('[Reviews] Error fetching:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchReviews();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"p-4 lg:p-6 bg-gray-50 dark:bg-gray-900 min-h-screen\">\r\n            <div className=\"mb-6\">\r\n                <h1 className=\"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-orange-500 mb-2\">My Reviews</h1>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">Reviews you&apos;ve written for properties and agents</p>\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500\"></div>\r\n                </div>\r\n            ) : reviews.length > 0 ? (\r\n                <div className=\"grid gap-6\">\r\n                    {reviews.map((review) => (\r\n                        <div key={review.id} className=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm\">\r\n                            <div className=\"flex justify-between items-start mb-4\">\r\n                                <div className=\"flex gap-4\">\r\n                                    <img src={review.property_image} alt={review.property_title} className=\"w-16 h-16 rounded-lg object-cover\" />\r\n                                    <div>\r\n                                        <h3 className=\"font-semibold text-gray-900 dark:text-white\">{review.property_title}</h3>\r\n                                        <div className=\"flex items-center gap-1 mt-1\">\r\n                                            {[...Array(5)].map((_, i) => (\r\n                                                <Star key={i} size={14} className={`${i < review.rating ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}`} />\r\n                                            ))}\r\n                                            <span className=\"text-sm text-gray-500 ml-2\">{review.date}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\">\r\n                                    Published\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-gray-600 dark:text-gray-300 mb-4\">{review.comment}</p>\r\n                            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n                                <button className=\"flex items-center gap-1 hover:text-orange-600 transition-colors\">\r\n                                    <ThumbsUp size={16} />\r\n                                    <span>Helpful ({review.likes})</span>\r\n                                </button>\r\n                                <button className=\"flex items-center gap-1 hover:text-orange-600 transition-colors\">\r\n                                    <MessageSquare size={16} />\r\n                                    <span>Reply</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-12 text-center\">\r\n                    <Star size={48} className=\"mx-auto mb-4 text-gray-300\" />\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-orange-500 mb-2\">No reviews yet</h3>\r\n                    <p className=\"text-gray-600 dark:text-orange-400 mb-4\">Review properties you&apos;ve visited or rented</p>\r\n                    <button className=\"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors\">\r\n                        View Properties\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["__iconNode","ThumbsUp","createLucideIcon","CORE_URL","getServiceUrl","getPropertyReviews","propertyId","apiFetch","error","getUserReviews","createReview","reviewData","reviewsService","ReviewsPage","reviews","setReviews","useState","loading","setLoading","fetchReviews","result","mapped","r","err","useEffect","jsxs","jsx","review","_","i","Star","MessageSquare"],"mappings":"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","x_google_ignoreList":[0]}