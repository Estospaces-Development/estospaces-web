import{u as Q,j as e,k as z,a as Y,q as L,U as K,F as j,x as U,a7 as r,b as $,C as T,y as R,B as X,H as W,S as Z,n as ee,r as D,X as B,a8 as re,M as te,P as ae,f as se,a9 as ne,h as le}from"./index-D9fuy-ar.js";import{C as S}from"./clock-D-pnzsNv.js";import{T as ie}from"./trending-up-Cau2qQQ4.js";import{U as H}from"./upload-CgTRKx3z.js";import{S as de}from"./square-pen-8EbQGg23.js";import{r as q}from"./index-DRtMzFzR.js";import{U as oe}from"./user-check-BQ5ngFC1.js";import{F as ce}from"./file-check-CZYD0i0i.js";import{K as M,E as ge}from"./key-7rd0FkSC.js";import{c as xe}from"./contractsService-cBdU8hYz.js";import{D as G}from"./dollar-sign-CqDN36Ty.js";import{A as me}from"./arrow-left-BaPK0xsr.js";import{H as J}from"./history-CquQ6LtT.js";import{B as ue}from"./briefcase-Bt4IU3b4.js";import{F as he}from"./funnel-BFpuJI0k.js";import{P as pe}from"./plus-wruqDZww.js";const be=({application:a,onClick:u})=>{var P;const y=Q(),c=t=>{switch(t){case r.DRAFT:return{label:"Draft",color:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",dotColor:"bg-gray-400",icon:de};case r.PENDING:return{label:"Pending Review",color:"bg-yellow-50 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",dotColor:"bg-yellow-500",icon:S};case r.SUBMITTED:return{label:"Submitted",color:"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",dotColor:"bg-blue-500",icon:j};case r.APPOINTMENT_BOOKED:return{label:"Appointment Booked",color:"bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",dotColor:"bg-purple-500",icon:U};case r.VIEWING_SCHEDULED:return{label:"Viewing Scheduled",color:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400",dotColor:"bg-indigo-500",icon:U};case r.VIEWING_COMPLETED:return{label:"Viewing Completed",color:"bg-cyan-50 text-cyan-600 dark:bg-cyan-900/30 dark:text-cyan-400",dotColor:"bg-cyan-500",icon:T};case r.UNDER_REVIEW:return{label:"Under Review",color:"bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",dotColor:"bg-amber-500",icon:S};case r.DOCUMENTS_REQUESTED:return{label:"Documents Requested",color:"bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",dotColor:"bg-orange-500",icon:H};case r.VERIFICATION_IN_PROGRESS:return{label:"Verification in Progress",color:"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",dotColor:"bg-blue-500",icon:ie};case r.APPROVED:return{label:"Approved",color:"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",dotColor:"bg-emerald-500",icon:T};case r.REJECTED:return{label:"Rejected",color:"bg-red-50 text-red-600 dark:bg-red-900/30 dark:text-red-400",dotColor:"bg-red-500",icon:R};case r.WITHDRAWN:return{label:"Withdrawn",color:"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400",dotColor:"bg-gray-400",icon:R};case r.COMPLETED:return{label:"Completed",color:"bg-green-50 text-green-600 dark:bg-green-900/30 dark:text-green-400",dotColor:"bg-green-500",icon:T};default:return{label:(t==null?void 0:t.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase()))||"Unknown",color:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",dotColor:"bg-gray-400",icon:j}}},N=()=>{switch(a.status){case r.DRAFT:return{label:"Continue",action:"edit"};case r.DOCUMENTS_REQUESTED:return{label:"Upload",action:"upload"};case r.UNDER_REVIEW:return{label:"View",action:"view"};default:return{label:"View",action:"view"}}},g=t=>t?new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"N/A",h=t=>{if(!t)return"N/A";const d=new Date(t),w=new Date().getTime()-d.getTime(),i=Math.floor(w/(1e3*60*60*24)),E=Math.floor(w/(1e3*60*60)),I=Math.floor(w/(1e3*60));return I<60?`${I}m ago`:E<24?`${E}h ago`:i===1?"Yesterday":i<7?`${i} days ago`:g(t)},b=()=>{if(!a.deadline)return!1;const t=new Date(a.deadline),d=new Date,k=new Date(d.getTime()+4320*60*1e3);return t<=k&&t>d},n=c(a.status),x=N(),f=t=>{t.stopPropagation(),y("/manager/messages")},l=()=>{switch(a.status){case r.DRAFT:return 10;case r.PENDING:case r.SUBMITTED:return 20;case r.APPOINTMENT_BOOKED:case r.VIEWING_SCHEDULED:return 30;case r.VIEWING_COMPLETED:return 40;case r.UNDER_REVIEW:return 55;case r.DOCUMENTS_REQUESTED:return 65;case r.VERIFICATION_IN_PROGRESS:return 80;case r.APPROVED:case r.COMPLETED:return 100;case r.REJECTED:case r.WITHDRAWN:return 0;default:return 15}},p=()=>{if(!a.appointment)return null;const{date:t,time:d}=a.appointment;return t?`${new Date(t).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})}${d?` at ${d}`:""}`:null};return(()=>{var d;const t=(d=a.propertyType)==null?void 0:d.toLowerCase();return t==="apartment"||t==="flat"?X:W})(),e.jsx("div",{onClick:u,className:`group bg-white dark:bg-gray-800 rounded-xl border overflow-hidden transition-all duration-200 cursor-pointer hover:shadow-lg ${a.requiresAction?"border-orange-200 dark:border-orange-800 ring-1 ring-orange-100 dark:ring-orange-900/30":"border-gray-200 dark:border-gray-700 hover:border-orange-200 dark:hover:border-orange-800"}`,children:e.jsxs("div",{className:"flex font-outfit",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-32 sm:w-40 lg:w-48",children:[e.jsx("img",{src:a.propertyImage,alt:a.propertyTitle,className:"w-full h-full object-cover min-h-[160px]",onError:t=>{t.target.src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=200"}}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${n.color} backdrop-blur-sm`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${n.dotColor}`}),n.label]})}),a.requiresAction&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded-full shadow-sm",children:[e.jsx(z,{size:12}),"Action"]})})]}),e.jsxs("div",{className:"flex-1 p-4 lg:p-5 flex flex-col justify-between min-w-0",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base lg:text-lg truncate group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:a.propertyTitle||"Untitled Property"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[e.jsx(Y,{size:13,className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:a.propertyAddress||"Address not specified"})]})]}),e.jsx(L,{size:20,className:"text-gray-300 dark:text-gray-600 group-hover:text-orange-400 transition-colors flex-shrink-0 mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(K,{size:14,className:"flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate",children:a.agentName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(S,{size:14,className:"flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate",children:h(a.lastUpdated||a.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx(j,{size:14,className:"flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate font-mono text-xs",children:a.referenceId})]})]}),a.hasAppointment&&p()&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 px-3 py-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-100 dark:border-purple-800 rounded-lg",children:[e.jsx(U,{size:14,className:"text-purple-600 dark:text-purple-400"}),e.jsxs("span",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:["Appointment: ",p()]})]}),a.status!==r.REJECTED&&a.status!==r.WITHDRAWN&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:[l(),"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${a.status===r.APPROVED?"bg-green-500":"bg-gradient-to-r from-orange-400 to-orange-500"}`,style:{width:`${l()}%`}})})]}),b()&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-lg",children:[e.jsx(S,{size:13,className:"text-red-500"}),e.jsxs("span",{className:"text-xs font-medium text-red-600 dark:text-red-400",children:["Due: ",g(a.deadline)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["£",(P=a.propertyPrice)==null?void 0:P.toLocaleString()]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:a.propertyType==="rent"?"/month":""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"p-2 text-gray-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Message Agent",children:e.jsx($,{size:18})}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),u()},className:"flex items-center gap-1.5 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition-colors shadow-sm hover:shadow",children:[x.label,e.jsx(L,{size:16})]})]})]})]})]})})},ye=({status:a,listingType:u="sale"})=>{const c=(()=>{const n=[{id:"submitted",label:"Application Submitted",description:"Your application has been received",icon:j,statuses:[r.PENDING,r.SUBMITTED]},{id:"under_review",label:"Under Review",description:"Agent is reviewing your application",icon:Z,statuses:[r.UNDER_REVIEW]},{id:"verification",label:u==="rent"?"Tenant Verification":"Buyer Verification",description:u==="rent"?"Background & credit check in progress":"Financial verification in progress",icon:oe,statuses:[r.DOCUMENTS_REQUESTED]},{id:"documents",label:"Document Review",description:"Final document verification",icon:ce,statuses:[]},{id:"decision",label:"Final Decision",description:a===r.APPROVED||a===r.COMPLETED?"Congratulations! Your application is approved":a===r.REJECTED?"Application was not approved":"Awaiting final decision",icon:a===r.APPROVED||a===r.COMPLETED?T:a===r.REJECTED?R:S,statuses:[r.APPROVED,r.REJECTED,r.COMPLETED]}];return(a===r.APPROVED||a===r.COMPLETED)&&n.push({id:"completion",label:u==="rent"?"Move In Ready":"Key Handover",description:a===r.COMPLETED?u==="rent"?"Keys collected & moved in":"Keys handed over & completed":u==="rent"?"Prepare for your move-in date":"Proceed to contract signing",icon:u==="rent"?M:W,statuses:[r.COMPLETED]}),n})(),g=a===r.WITHDRAWN?-1:a===r.REJECTED?c.length-2:a===r.COMPLETED||a===r.APPROVED?c.length-1:a===r.DOCUMENTS_REQUESTED?2:a===r.UNDER_REVIEW?1:0,h=()=>{switch(a){case r.APPROVED:return"text-green-600 bg-green-100 border-green-200";case r.REJECTED:return"text-red-600 bg-red-100 border-red-200";case r.WITHDRAWN:return"text-gray-600 bg-gray-100 border-gray-200";case r.DOCUMENTS_REQUESTED:return"text-orange-600 bg-orange-100 border-orange-200";default:return"text-blue-600 bg-blue-100 border-blue-200"}},b=()=>{switch(a){case r.PENDING:case r.SUBMITTED:return"Submitted";case r.UNDER_REVIEW:return"Under Review";case r.DOCUMENTS_REQUESTED:return"Documents Needed";case r.APPROVED:return"Approved";case r.REJECTED:return"Not Approved";case r.WITHDRAWN:return"Withdrawn";default:return"Processing"}};return a===r.WITHDRAWN?e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx(R,{className:"w-7 h-7 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Application Withdrawn"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You have withdrawn this application"})]})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between font-outfit",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Application Progress"}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:u==="rent"?"Rental Application":"Purchase Application"})]}),e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium border ${h()}`,children:b()})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"relative",children:c.map((n,x)=>{const f=n.icon,l=x<g,p=x===g,m=a===r.REJECTED&&x===g;return e.jsxs("div",{className:"relative flex items-start pb-8 last:pb-0",children:[x<c.length-1&&e.jsx("div",{className:`absolute left-6 top-12 w-0.5 h-full -ml-px ${l?"bg-green-500":p&&!m?"bg-orange-300":"bg-gray-200 dark:bg-gray-700"}`}),e.jsx("div",{className:`relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 ${l?"bg-green-500 border-green-500 text-white":p&&!m?"bg-orange-500 border-orange-500 text-white animate-pulse":m?"bg-red-500 border-red-500 text-white":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-400"}`,children:l?e.jsx(T,{className:"w-6 h-6"}):m?e.jsx(R,{className:"w-6 h-6"}):e.jsx(f,{className:"w-5 h-5"})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0 font-outfit",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-semibold ${l||p?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:n.label}),p&&!m&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-xs font-medium rounded-full",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-pulse"}),"Current"]})]}),e.jsx("p",{className:`text-sm mt-1 ${l||p?"text-gray-600 dark:text-gray-400":"text-gray-400 dark:text-gray-600"}`,children:n.description}),p&&a===r.DOCUMENTS_REQUESTED&&e.jsxs("div",{className:"mt-3 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-700 dark:text-orange-400",children:[e.jsx(z,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Action Required"})]}),e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-300 mt-1",children:"Please upload the requested documents to proceed"})]})]})]},n.id)})})}),a!==r.APPROVED&&a!==r.REJECTED&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 font-outfit",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(S,{size:16}),e.jsxs("span",{children:["Estimated processing time: ",e.jsx("strong",{children:"3-5 business days"})]})]})})]})};function fe({applicationId:a,propertyPrice:u,onClose:y,onSuccess:c}){const{success:N,error:g}=ee(),[h,b]=D.useState(!1),[n,x]=D.useState({application_id:a,start_date:"",end_date:"",monthly_rent:u||0,deposit_amount:(u||0)*1.2,terms_and_conditions:"Standard Assured Shorthold Tenancy Agreement terms apply."}),f=async l=>{l.preventDefault(),b(!0);const{data:p,error:m}=await xe(n);if(m){g(m),b(!1);return}N("Contract drafted successfully"),c(),y()};return q.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 font-outfit",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl shadow-2xl animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(j,{className:"text-orange-500"}),"Draft Tenancy Agreement"]}),e.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(B,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:e.jsxs("form",{id:"contract-form",onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Monthly Rent (£)"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.monthly_rent,onChange:l=>x({...n,monthly_rent:parseFloat(l.target.value)}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Security Deposit (£)"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.deposit_amount,onChange:l=>x({...n,deposit_amount:parseFloat(l.target.value)}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"date",required:!0,value:n.start_date,onChange:l=>x({...n,start_date:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"date",value:n.end_date,onChange:l=>x({...n,end_date:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Special Terms & Conditions"}),e.jsx("textarea",{rows:6,value:n.terms_and_conditions,onChange:l=>x({...n,terms_and_conditions:l.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white resize-none",placeholder:"Enter any specific clauses or terms..."})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg flex gap-3 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx(z,{className:"flex-shrink-0 mt-0.5",size:16}),e.jsx("p",{children:"Once drafted, the tenant will be notified to review and sign the agreement. You will need to countersign after they have signed."})]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-2xl",children:[e.jsx("button",{type:"button",onClick:y,className:"px-6 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",form:"contract-form",disabled:h,className:"px-6 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-medium transition-colors shadow-sm disabled:opacity-70 flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:18}),"Draft Contract"]})})]})]})}),document.body)}const je=({applicationId:a,application:u,onClose:y,onUpdateStatus:c})=>{var _,o,A;const N=Q(),{allApplications:g,withdrawApplication:h}=re(),[b,n]=D.useState(!1),[x,f]=D.useState(!1),[l,p]=D.useState(!1),[m,P]=D.useState("overview"),t=u||(g==null?void 0:g.find(s=>s.id===a));if(!t)return e.jsx("div",{className:"min-h-full bg-gray-50 dark:bg-gray-900 flex items-center justify-center font-outfit",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Application Not Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"This application may have been removed or doesn't exist."}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors",children:"Back to Applications"})]})});const d=![r.WITHDRAWN,r.APPROVED,r.REJECTED].includes(t.status),k=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):"N/A",w=s=>s===void 0?"Price on request":`£${s.toLocaleString("en-GB")}`,i=async()=>{c?c(a,r.WITHDRAWN):await h(a),n(!1)},E=async()=>{c&&(c(a,r.COMPLETED),f(!1))},O=(()=>{const s=[{id:1,type:"submitted",title:"Application Submitted",description:"Your application was successfully submitted",date:t.submittedDate||t.createdAt,icon:j,color:"blue"}],v=new Date(t.submittedDate||t.createdAt).getTime();return t.status!==r.PENDING&&t.status!==r.SUBMITTED&&s.push({id:2,type:"review",title:"Under Review",description:"Agent started reviewing your application",date:new Date(v+1440*60*1e3).toISOString(),icon:S,color:"orange"}),t.status===r.DOCUMENTS_REQUESTED&&s.push({id:3,type:"documents",title:"Documents Requested",description:"Additional documents are required",date:new Date(v+2880*60*1e3).toISOString(),icon:z,color:"yellow"}),t.status===r.APPROVED&&s.push({id:4,type:"approved",title:"Application Approved",description:"Congratulations! Your application has been approved",date:t.lastUpdated||new Date().toISOString(),icon:T,color:"green"}),t.status===r.REJECTED&&s.push({id:4,type:"rejected",title:"Application Not Approved",description:"Unfortunately, your application was not approved",date:t.lastUpdated||new Date().toISOString(),icon:R,color:"red"}),t.status===r.COMPLETED&&s.push({id:5,type:"completed",title:t.listingType==="rent"?"Keys Collected":"Handover Complete",description:t.listingType==="rent"?"You have collected the keys and moved in":"Key handover completed successfully",date:t.lastUpdated||new Date().toISOString(),icon:M,color:"green"}),t.status===r.WITHDRAWN&&s.push({id:4,type:"withdrawn",title:"Application Withdrawn",description:"You withdrew this application",date:t.lastUpdated||new Date().toISOString(),icon:R,color:"gray"}),s.sort((C,F)=>new Date(F.date).getTime()-new Date(C.date).getTime())})(),V=[{id:"overview",label:"Overview",icon:W},{id:"documents",label:"Documents",icon:j},{id:"history",label:"Activity",icon:J}];return e.jsxs("div",{className:"min-h-full bg-gray-50 dark:bg-gray-900 font-outfit",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:y,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(me,{size:20}),e.jsx("span",{className:"font-medium",children:"Back to Applications"})]}),e.jsx("div",{className:"flex items-center gap-3",children:d&&e.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 border border-red-300 dark:border-red-700 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Withdraw"})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 py-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsx("div",{className:"lg:w-80 h-48 lg:h-auto flex-shrink-0",children:e.jsx("img",{src:t.propertyImage,alt:t.propertyTitle,className:"w-full h-full object-cover",onError:s=>{s.target.src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400"}})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.listingType==="rent"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:t.listingType==="rent"?"Rental":"Purchase"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Ref: ",t.referenceId]})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t.propertyTitle||"Untitled Property"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-4",children:[e.jsx(Y,{size:16}),e.jsx("span",{children:t.propertyAddress||"Address not specified"})]}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[w(t.propertyPrice),t.listingType==="rent"&&e.jsx("span",{className:"text-base font-normal text-gray-500 ml-1",children:"/month"})]})]}),e.jsxs("button",{onClick:()=>N(`/manager/dashboard/property/${t.propertyId}`),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium transition-colors",children:[e.jsx("span",{children:"View Property"}),e.jsx(ge,{size:16})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Submitted"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:k(t.submittedDate||t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Updated"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:k(t.lastUpdated||t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Property Type"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white capitalize",children:t.propertyType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Application Type"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white capitalize",children:t.listingType==="rent"?"Rental":"Purchase"})]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(ye,{status:t.status,listingType:t.listingType})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:V.map(s=>{const v=s.icon;return e.jsxs("button",{onClick:()=>P(s.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${m===s.id?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(v,{size:18}),e.jsx("span",{children:s.label})]},s.id)})})}),e.jsxs("div",{className:"p-6",children:[m==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(K,{size:20,className:"text-orange-500"}),"Agent Information"]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center text-white text-xl font-bold flex-shrink-0 shadow-md",children:((o=(_=t.agentName)==null?void 0:_.charAt(0))==null?void 0:o.toUpperCase())||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.agentName}),t.agentAgency&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1",children:[e.jsx(X,{size:14}),t.agentAgency]}),t.agentEmail&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1",children:[e.jsx(te,{size:14}),t.agentEmail]}),t.agentPhone&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1",children:[e.jsx(ae,{size:14}),t.agentPhone]})]})]}),e.jsxs("button",{onClick:()=>N("/manager/messages"),className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-all shadow-sm",children:[e.jsx($,{size:18}),e.jsx("span",{children:"Message Agent"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:20,className:"text-orange-500"}),"Application Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Application ID"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white font-mono text-sm",children:t.referenceId})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:t.listingType==="rent"?"Rental Application":"Purchase Application"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Property Value"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w(t.propertyPrice)})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.status===r.APPROVED?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t.status===r.REJECTED?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":t.status===r.DOCUMENTS_REQUESTED?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:(A=t.status)==null?void 0:A.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())})]})]})]}),t.status!==r.APPROVED&&t.status!==r.REJECTED&&t.status!==r.WITHDRAWN?e.jsxs("div",{className:"lg:col-span-2 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 rounded-xl p-6 border border-orange-200 dark:border-orange-800/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(L,{size:20,className:"text-orange-500"}),"What's Next?"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.status===r.DOCUMENTS_REQUESTED?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold shadow-sm",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Upload Documents"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Submit the requested documents via the Documents tab"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 opacity-50",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Verification"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Our team will verify your submitted documents"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 opacity-50",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Final Decision"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Receive approval or feedback on your application"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center flex-shrink-0 shadow-sm",children:e.jsx(T,{size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Application Received"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Your basic details have been submitted"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 ${t.status===r.UNDER_REVIEW?"bg-orange-500 text-white shadow-sm":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"} rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold`,children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Agent Review"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Agent is reviewing your suitability"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 opacity-50",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Final Decision"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Typically within 3-5 business days"})]})]})]})})]}):t.status===r.APPROVED&&e.jsx("div",{className:"lg:col-span-2 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 text-white rounded-full flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Congratulations! Your Application is Approved"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["The agent has approved your application. Contact them to proceed with the next steps",t.listingType==="rent"?" including signing the tenancy agreement and arranging your move-in date.":" including contract signing and completion."]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>N("/manager/messages"),className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 text-green-700 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg font-medium transition-colors shadow-sm",children:[e.jsx($,{size:18}),e.jsx("span",{children:"Contact Agent"})]}),t.listingType==="rent"&&e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors shadow-sm",children:[e.jsx(j,{size:18}),e.jsx("span",{children:"Draft Contract"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors shadow-sm",children:[e.jsx(j,{size:18}),e.jsx("span",{children:"Sign & Complete"})]})]})]})]})}),t.status===r.COMPLETED&&e.jsx("div",{className:"lg:col-span-2 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-6 border border-indigo-200 dark:border-indigo-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-600 text-white rounded-full flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(M,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Application Process Complete"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Congratulations! The entire application process is complete. You have successfully ",t.listingType==="rent"?"rented":"purchased"," this property."]}),e.jsxs("button",{onClick:()=>N("/manager/dashboard"),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(W,{size:18}),e.jsx("span",{children:"Back to Dashboard"})]})]})]})})]}),m==="documents"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(se,{size:20,className:"text-orange-500"}),"Required Documents"]}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-lg text-sm font-medium hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:[e.jsx(H,{size:14}),"Upload All"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["Passport or ID Proof","Recent Utility Bill","Employment Contract","3 Months Bank Statements"].map((s,v)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-orange-200 dark:hover:border-orange-800 transition-all shadow-sm group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${v<2?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:v<2?e.jsx(T,{size:20,className:"text-green-600 dark:text-green-400"}):e.jsx(j,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:v<2?"Verified":"Pending upload"})]})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",children:v<2?e.jsx(j,{size:18}):e.jsx(H,{size:18})})]},v))})]})}),m==="history"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-8 flex items-center gap-2",children:[e.jsx(J,{size:20,className:"text-orange-500"}),"Application Timeline"]}),e.jsx("div",{className:"relative ml-4",children:O.map((s,v)=>{const C=s.icon,F={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",orange:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",green:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",red:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400",yellow:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",gray:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"};return e.jsxs("div",{className:"relative flex items-start pb-10 last:pb-2",children:[v<O.length-1&&e.jsx("div",{className:"absolute left-5 top-10 w-0.5 h-full bg-gray-200 dark:bg-gray-700 -ml-px"}),e.jsx("div",{className:`relative z-10 w-10 h-10 rounded-full flex items-center justify-center shadow-sm ${F[s.color]}`,children:e.jsx(C,{size:18})}),e.jsxs("div",{className:"ml-6 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(S,{size:12}),k(s.date)]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 leading-relaxed",children:s.description})]})]},s.id)})})]})})]})]})]}),b&&q.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"w-14 h-14 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{size:28,className:"text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Withdraw Application?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"This will remove your interest in the property. This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Keep it"}),e.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-sm",children:"Confirm Withdraw"})]})]})}),document.body),x&&q.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{size:28,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Finalize Handover?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"By confirming, you acknowledge that you have received the keys and the process is now complete."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors shadow-sm",children:"Complete Now"})]})]})}),document.body),l&&e.jsx(fe,{applicationId:t.id,propertyPrice:t.propertyPrice||0,onClose:()=>p(!1),onSuccess:()=>{}})]})},Ne=({searchQuery:a,setSearchQuery:u,statusFilter:y,setStatusFilter:c,propertyTypeFilter:N,setPropertyTypeFilter:g,dateRangeFilter:h,setDateRangeFilter:b,showFilters:n,setShowFilters:x,hideToggleButton:f=!1})=>{const[l,p]=D.useState(!1),m=n!==void 0?n:l,P=x||p,t=[{value:"all",label:"All Statuses"},{value:r.DRAFT,label:"Draft"},{value:r.SUBMITTED,label:"Submitted"},{value:r.UNDER_REVIEW,label:"Under Review"},{value:r.DOCUMENTS_REQUESTED,label:"Documents Requested"},{value:r.APPROVED,label:"Approved"},{value:r.REJECTED,label:"Rejected"},{value:r.WITHDRAWN,label:"Withdrawn"}],d=[{value:"all",label:"All Types"},{value:"apartment",label:"Apartment"},{value:"condo",label:"Condo"},{value:"house",label:"House"},{value:"townhouse",label:"Townhouse"}],k=y!=="all"||N!=="all"||h.start!==null||h.end!==null,w=()=>{c("all"),g("all"),b({start:null,end:null})};return e.jsxs("div",{className:"space-y-4 font-outfit",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by property name, location, or application ID...",value:a,onChange:i=>u(i.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white transition-all shadow-sm"})]}),!f&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>P(!m),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(he,{size:16}),e.jsx("span",{children:"Filters"}),k&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-orange-500 text-white text-xs rounded-full",children:"Active"})]}),k&&e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(B,{size:16}),e.jsx("span",{children:"Clear Filters"})]})]}),f&&k&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(B,{size:16}),e.jsx("span",{children:"Clear Filters"})]})}),m&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4 shadow-sm animate-in fade-in slide-in-from-top-2 duration-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsx("select",{value:y,onChange:i=>c(i.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:t.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Property Type"}),e.jsx("select",{value:N,onChange:i=>g(i.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:d.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"date",value:h.start||"",onChange:i=>b({...h,start:i.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm"})}),e.jsx("div",{children:e.jsx("input",{type:"date",value:h.end||"",onChange:i=>b({...h,end:i.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm"})})]})]})]})})]})};function ke({initialView:a="list"}){const{user:u}=le(),y=ee(),{allApplications:c,isLoading:N,searchQuery:g,setSearchQuery:h,statusFilter:b,setStatusFilter:n,propertyTypeFilter:x,setPropertyTypeFilter:f,dateRangeFilter:l,setDateRangeFilter:p,updateApplicationStatus:m}=re(),[P,t]=D.useState(a),[d,k]=D.useState(null),[w,i]=D.useState(!1),E=c,I=D.useMemo(()=>{const o=E.length,A=E.filter(C=>C.status===r.PENDING||C.status===r.SUBMITTED).length,s=E.filter(C=>C.requiresAction).length,v=E.filter(C=>C.status===r.APPROVED).length;return[{label:"Total Active",value:o.toString(),icon:j,color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/20"},{label:"Pending Review",value:A.toString(),icon:S,color:"text-orange-600",bg:"bg-orange-50 dark:bg-orange-900/20"},{label:"Action Required",value:s.toString(),icon:z,color:"text-red-600",bg:"bg-red-50 dark:bg-red-900/20"},{label:"Completed",value:v.toString(),icon:T,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"}]},[E]),O=o=>{k(o),t("detail"),window.scrollTo({top:0,behavior:"smooth"})},V=()=>{t("list"),k(null)},_=async(o,A)=>{try{await m(o,A),y.success(`Application status updated to ${A.replace(/_/g," ")}`)}catch{y.error("Failed to update status")}};return P==="detail"&&d?e.jsx(je,{applicationId:d,onClose:V,onUpdateStatus:_}):e.jsxs("div",{className:"space-y-6 font-outfit animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Applications"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Track and manage your property applications"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{className:"px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-semibold text-sm flex items-center gap-2 transition-all shadow-md active:scale-95",children:[e.jsx(pe,{size:18})," New Application"]})})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:I.map(o=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsx("div",{className:`p-2.5 rounded-xl ${o.bg} ${o.color}`,children:e.jsx(o.icon,{size:20})})}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:o.label}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.value})]},o.label))}),e.jsx(Ne,{searchQuery:g,setSearchQuery:h,statusFilter:b,setStatusFilter:n,propertyTypeFilter:x,setPropertyTypeFilter:f,dateRangeFilter:l,setDateRangeFilter:p,showFilters:w,setShowFilters:i}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:N?Array.from({length:4}).map((o,A)=>e.jsx("div",{className:"h-[200px] bg-gray-100 dark:bg-gray-800 animate-pulse rounded-2xl border border-gray-200 dark:border-gray-700"},A)):E.length>0?E.map(o=>e.jsx(be,{application:o,onClick:()=>O(o.id)},o.id)):e.jsxs("div",{className:"col-span-full py-20 bg-white dark:bg-gray-800 rounded-3xl border border-dashed border-gray-300 dark:border-gray-700 flex flex-col items-center justify-center text-center px-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(j,{size:40,className:"text-gray-300"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No applications found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm",children:g||b!=="all"?"No applications match your current filters. Try adjusting them to see more results.":"You haven't submitted any applications yet. When you do, they'll appear here."}),(g||b!=="all"||x!=="all")&&e.jsx("button",{onClick:()=>{h(""),n("all"),f("all"),p({start:null,end:null})},className:"mt-6 text-orange-500 font-bold hover:underline",children:"Clear all filters"})]})})]})}function We(){return e.jsx(ne,{children:e.jsx(D.Suspense,{fallback:e.jsx("div",{className:"h-48 flex items-center justify-center font-bold",children:"Loading Applications..."}),children:e.jsx(ke,{})})})}export{We as default};
//# sourceMappingURL=page-BObDwsG5.js.map
