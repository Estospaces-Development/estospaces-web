{"version":3,"file":"page-DcLoxAg6.js","sources":["../../src/pages/manager/contracts/page.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { FileText, CheckCircle, Clock, AlertCircle, PenTool, Eye, RefreshCw } from 'lucide-react';\r\nimport { getUserContracts, getContract, signContract, Contract } from '@/services/contractsService';\r\nimport { useToast } from '@/contexts/ToastContext';\r\n\r\ntype Tab = 'all' | 'draft' | 'pending' | 'active' | 'terminated';\r\n\r\nconst STATUS_MAP: Record<string, { label: string; color: string; icon: React.ReactNode }> = {\r\n    draft: { label: 'Draft', color: 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300', icon: <FileText size={14} /> },\r\n    pending_user_signature: { label: 'Awaiting Tenant', color: 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400', icon: <Clock size={14} /> },\r\n    pending_manager_signature: { label: 'Awaiting Your Signature', color: 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400', icon: <PenTool size={14} /> },\r\n    active: { label: 'Active', color: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400', icon: <CheckCircle size={14} /> },\r\n    terminated: { label: 'Terminated', color: 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400', icon: <AlertCircle size={14} /> },\r\n};\r\n\r\nexport default function ManagerContractsPage() {\r\n    const [contracts, setContracts] = useState<Contract[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [signingId, setSigningId] = useState<string | null>(null);\r\n    const [viewContract, setViewContract] = useState<Contract | null>(null);\r\n    const [activeTab, setActiveTab] = useState<Tab>('all');\r\n    const { success, error: toastError } = useToast();\r\n\r\n    const fetchContracts = useCallback(async () => {\r\n        setLoading(true);\r\n        const { data, error } = await getUserContracts();\r\n        if (error) {\r\n            toastError(error);\r\n        } else if (data) {\r\n            setContracts(data);\r\n        }\r\n        setLoading(false);\r\n    }, [toastError]);\r\n\r\n    useEffect(() => { fetchContracts(); }, [fetchContracts]);\r\n\r\n    const handleCountersign = async (id: string) => {\r\n        setSigningId(id);\r\n        const { data, error } = await signContract(id, 'manager');\r\n        if (error) {\r\n            toastError(error);\r\n        } else if (data) {\r\n            success('Contract countersigned successfully!');\r\n            // Update in list\r\n            setContracts(prev => prev.map(c => c.id === id ? data : c));\r\n            if (viewContract?.id === id) setViewContract(data);\r\n        }\r\n        setSigningId(null);\r\n    };\r\n\r\n    const filteredContracts = contracts.filter(c => {\r\n        if (activeTab === 'all') return true;\r\n        if (activeTab === 'pending') return c.status === 'pending_user_signature' || c.status === 'pending_manager_signature';\r\n        return c.status === activeTab;\r\n    });\r\n\r\n    const tabs: { key: Tab; label: string; count: number }[] = [\r\n        { key: 'all', label: 'All', count: contracts.length },\r\n        { key: 'pending', label: 'Pending', count: contracts.filter(c => c.status.startsWith('pending')).length },\r\n        { key: 'active', label: 'Active', count: contracts.filter(c => c.status === 'active').length },\r\n        { key: 'draft', label: 'Drafts', count: contracts.filter(c => c.status === 'draft').length },\r\n    ];\r\n\r\n    const formatDate = (d?: string) => d ? new Date(d).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }) : '—';\r\n    const formatCurrency = (v?: number) => v != null ? `£${v.toLocaleString('en-GB', { minimumFractionDigits: 2 })}` : '—';\r\n\r\n    return (\r\n        <div className=\"p-6 md:p-8 font-outfit\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                        <FileText className=\"text-orange-500\" /> Contracts\r\n                    </h1>\r\n                    <p className=\"text-gray-500 dark:text-gray-400 text-sm mt-1\">\r\n                        Manage tenancy agreements and digital signatures\r\n                    </p>\r\n                </div>\r\n                <button\r\n                    onClick={fetchContracts}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors\"\r\n                >\r\n                    <RefreshCw size={16} className={loading ? 'animate-spin' : ''} /> Refresh\r\n                </button>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex gap-2 mb-6 overflow-x-auto pb-2\">\r\n                {tabs.map(tab => (\r\n                    <button\r\n                        key={tab.key}\r\n                        onClick={() => setActiveTab(tab.key)}\r\n                        className={`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all ${activeTab === tab.key\r\n                                ? 'bg-orange-500 text-white shadow-md'\r\n                                : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n                            }`}\r\n                    >\r\n                        {tab.label} <span className=\"ml-1 opacity-70\">({tab.count})</span>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Loading */}\r\n            {loading && (\r\n                <div className=\"flex items-center justify-center py-20\">\r\n                    <div className=\"w-8 h-8 border-3 border-orange-500 border-t-transparent rounded-full animate-spin\" />\r\n                </div>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {!loading && filteredContracts.length === 0 && (\r\n                <div className=\"text-center py-20\">\r\n                    <FileText className=\"mx-auto text-gray-300 dark:text-gray-600 mb-4\" size={48} />\r\n                    <h3 className=\"text-lg font-semibold text-gray-600 dark:text-gray-400\">No contracts found</h3>\r\n                    <p className=\"text-sm text-gray-400 dark:text-gray-500 mt-1\">\r\n                        Contracts are created from approved applications.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Contract Cards */}\r\n            {!loading && filteredContracts.length > 0 && (\r\n                <div className=\"grid gap-4\">\r\n                    {filteredContracts.map(contract => {\r\n                        const status = STATUS_MAP[contract.status] || STATUS_MAP.draft;\r\n                        const needsCountersign = contract.status === 'pending_manager_signature';\r\n\r\n                        return (\r\n                            <div\r\n                                key={contract.id}\r\n                                className={`bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm hover:shadow-md transition-shadow ${needsCountersign ? 'ring-2 ring-orange-400/50' : ''\r\n                                    }`}\r\n                            >\r\n                                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                                    {/* Left Side */}\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"flex items-center gap-3 mb-2\">\r\n                                            <span className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${status.color}`}>\r\n                                                {status.icon} {status.label}\r\n                                            </span>\r\n                                            <span className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                                                {contract.contract_type === 'rental' ? 'Tenancy Agreement' : contract.contract_type}\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\r\n                                            <div>\r\n                                                <span className=\"text-gray-400 dark:text-gray-500 text-xs\">Rent</span>\r\n                                                <p className=\"font-semibold text-gray-900 dark:text-white\">{formatCurrency(contract.monthly_rent)}/mo</p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <span className=\"text-gray-400 dark:text-gray-500 text-xs\">Deposit</span>\r\n                                                <p className=\"font-semibold text-gray-900 dark:text-white\">{formatCurrency(contract.deposit_amount)}</p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <span className=\"text-gray-400 dark:text-gray-500 text-xs\">Start</span>\r\n                                                <p className=\"font-medium text-gray-700 dark:text-gray-300\">{formatDate(contract.start_date)}</p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <span className=\"text-gray-400 dark:text-gray-500 text-xs\">End</span>\r\n                                                <p className=\"font-medium text-gray-700 dark:text-gray-300\">{formatDate(contract.end_date)}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Signature Status */}\r\n                                        <div className=\"flex items-center gap-4 mt-3 text-xs\">\r\n                                            <span className={`flex items-center gap-1 ${contract.user_signed_at ? 'text-green-600 dark:text-green-400' : 'text-gray-400 dark:text-gray-500'}`}>\r\n                                                {contract.user_signed_at ? <CheckCircle size={12} /> : <Clock size={12} />}\r\n                                                Tenant {contract.user_signed_at ? `signed ${formatDate(contract.user_signed_at)}` : 'not signed'}\r\n                                            </span>\r\n                                            <span className={`flex items-center gap-1 ${contract.manager_signed_at ? 'text-green-600 dark:text-green-400' : 'text-gray-400 dark:text-gray-500'}`}>\r\n                                                {contract.manager_signed_at ? <CheckCircle size={12} /> : <Clock size={12} />}\r\n                                                You {contract.manager_signed_at ? `signed ${formatDate(contract.manager_signed_at)}` : 'not signed'}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Actions */}\r\n                                    <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                                        <button\r\n                                            onClick={() => setViewContract(contract)}\r\n                                            className=\"flex items-center gap-1.5 px-4 py-2 rounded-xl text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\r\n                                        >\r\n                                            <Eye size={16} /> View\r\n                                        </button>\r\n                                        {needsCountersign && (\r\n                                            <button\r\n                                                onClick={() => handleCountersign(contract.id)}\r\n                                                disabled={signingId === contract.id}\r\n                                                className=\"flex items-center gap-1.5 px-4 py-2 rounded-xl text-sm font-medium bg-orange-500 hover:bg-orange-600 text-white shadow-sm transition-colors disabled:opacity-70\"\r\n                                            >\r\n                                                {signingId === contract.id ? (\r\n                                                    <><span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> Signing...</>\r\n                                                ) : (\r\n                                                    <><PenTool size={16} /> Countersign</>\r\n                                                )}\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            )}\r\n\r\n            {/* View Contract Modal */}\r\n            {viewContract && (\r\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\" onClick={() => setViewContract(null)}>\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl shadow-2xl max-h-[85vh] flex flex-col\" onClick={e => e.stopPropagation()}>\r\n                        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n                            <h2 className=\"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                                <FileText className=\"text-orange-500\" /> Contract Details\r\n                            </h2>\r\n                            <button onClick={() => setViewContract(null)} className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors text-gray-500\">✕</button>\r\n                        </div>\r\n                        <div className=\"p-6 overflow-y-auto custom-scrollbar space-y-4\">\r\n                            {(() => {\r\n                                const s = STATUS_MAP[viewContract.status] || STATUS_MAP.draft;\r\n                                return (\r\n                                    <span className={`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${s.color}`}>\r\n                                        {s.icon} {s.label}\r\n                                    </span>\r\n                                );\r\n                            })()}\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4\">\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Monthly Rent</p>\r\n                                    <p className=\"text-lg font-bold text-gray-900 dark:text-white\">{formatCurrency(viewContract.monthly_rent)}</p>\r\n                                </div>\r\n                                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4\">\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Security Deposit</p>\r\n                                    <p className=\"text-lg font-bold text-gray-900 dark:text-white\">{formatCurrency(viewContract.deposit_amount)}</p>\r\n                                </div>\r\n                                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4\">\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Start Date</p>\r\n                                    <p className=\"font-semibold text-gray-900 dark:text-white\">{formatDate(viewContract.start_date)}</p>\r\n                                </div>\r\n                                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4\">\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">End Date</p>\r\n                                    <p className=\"font-semibold text-gray-900 dark:text-white\">{formatDate(viewContract.end_date)}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {viewContract.terms_and_conditions && (\r\n                                <div>\r\n                                    <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Terms & Conditions</h3>\r\n                                    <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap\">\r\n                                        {viewContract.terms_and_conditions}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Signatures */}\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className={`rounded-xl p-4 border ${viewContract.user_signed_at ? 'border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20' : 'border-gray-200 dark:border-gray-700'}`}>\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Tenant Signature</p>\r\n                                    <p className={`font-semibold text-sm ${viewContract.user_signed_at ? 'text-green-700 dark:text-green-400' : 'text-gray-400'}`}>\r\n                                        {viewContract.user_signed_at ? `Signed ${formatDate(viewContract.user_signed_at)}` : 'Pending'}\r\n                                    </p>\r\n                                </div>\r\n                                <div className={`rounded-xl p-4 border ${viewContract.manager_signed_at ? 'border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20' : 'border-gray-200 dark:border-gray-700'}`}>\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Your Signature</p>\r\n                                    <p className={`font-semibold text-sm ${viewContract.manager_signed_at ? 'text-green-700 dark:text-green-400' : 'text-gray-400'}`}>\r\n                                        {viewContract.manager_signed_at ? `Signed ${formatDate(viewContract.manager_signed_at)}` : 'Pending'}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer with Countersign button if needed */}\r\n                        <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-2xl\">\r\n                            <button\r\n                                onClick={() => setViewContract(null)}\r\n                                className=\"px-5 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n                            >\r\n                                Close\r\n                            </button>\r\n                            {viewContract.status === 'pending_manager_signature' && (\r\n                                <button\r\n                                    onClick={() => handleCountersign(viewContract.id)}\r\n                                    disabled={signingId === viewContract.id}\r\n                                    className=\"px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-medium shadow-sm transition-colors disabled:opacity-70 flex items-center gap-2\"\r\n                                >\r\n                                    {signingId === viewContract.id ? (\r\n                                        <><span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> Signing...</>\r\n                                    ) : (\r\n                                        <><PenTool size={16} /> Countersign</>\r\n                                    )}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["STATUS_MAP","jsx","FileText","Clock","PenTool","CheckCircle","AlertCircle","ManagerContractsPage","contracts","setContracts","useState","loading","setLoading","signingId","setSigningId","viewContract","setViewContract","activeTab","setActiveTab","success","toastError","useToast","fetchContracts","useCallback","data","error","getUserContracts","useEffect","handleCountersign","id","signContract","prev","c","filteredContracts","tabs","formatDate","d","formatCurrency","v","jsxs","RefreshCw","tab","contract","status","needsCountersign","Eye","Fragment","e","s"],"mappings":"2SAOA,MAAMA,EAAsF,CACxF,MAAO,CAAE,MAAO,QAAS,MAAO,gEAAiE,KAAMC,EAAAA,IAACC,EAAA,CAAS,KAAM,EAAA,CAAI,CAAA,EAC3H,uBAAwB,CAAE,MAAO,kBAAmB,MAAO,uEAAwE,KAAMD,EAAAA,IAACE,EAAA,CAAM,KAAM,EAAA,CAAI,CAAA,EAC1J,0BAA2B,CAAE,MAAO,0BAA2B,MAAO,2EAA4E,KAAMF,EAAAA,IAACG,EAAA,CAAQ,KAAM,EAAA,CAAI,CAAA,EAC3K,OAAQ,CAAE,MAAO,SAAU,MAAO,uEAAwE,KAAMH,EAAAA,IAACI,EAAA,CAAY,KAAM,EAAA,CAAI,CAAA,EACvI,WAAY,CAAE,MAAO,aAAc,MAAO,+DAAgE,KAAMJ,EAAAA,IAACK,EAAA,CAAY,KAAM,EAAA,CAAI,CAAA,CAC3I,EAEA,SAAwBC,GAAuB,CAC3C,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EACnD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAwB,IAAI,EACxD,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAA0B,IAAI,EAChE,CAACO,EAAWC,CAAY,EAAIR,EAAAA,SAAc,KAAK,EAC/C,CAAE,QAAAS,EAAS,MAAOC,CAAA,EAAeC,EAAA,EAEjCC,EAAiBC,EAAAA,YAAY,SAAY,CAC3CX,EAAW,EAAI,EACf,KAAM,CAAE,KAAAY,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAAA,EAC1BD,EACAL,EAAWK,CAAK,EACTD,GACPf,EAAae,CAAI,EAErBZ,EAAW,EAAK,CACpB,EAAG,CAACQ,CAAU,CAAC,EAEfO,EAAAA,UAAU,IAAM,CAAEL,EAAA,CAAkB,EAAG,CAACA,CAAc,CAAC,EAEvD,MAAMM,EAAoB,MAAOC,GAAe,CAC5Cf,EAAae,CAAE,EACf,KAAM,CAAE,KAAAL,EAAM,MAAAC,CAAA,EAAU,MAAMK,EAAaD,EAAI,SAAS,EACpDJ,EACAL,EAAWK,CAAK,EACTD,IACPL,EAAQ,sCAAsC,EAE9CV,EAAasB,GAAQA,EAAK,IAAIC,GAAKA,EAAE,KAAOH,EAAKL,EAAOQ,CAAC,CAAC,GACtDjB,GAAA,YAAAA,EAAc,MAAOc,GAAIb,EAAgBQ,CAAI,GAErDV,EAAa,IAAI,CACrB,EAEMmB,EAAoBzB,EAAU,OAAOwB,GACnCf,IAAc,MAAc,GAC5BA,IAAc,UAAkBe,EAAE,SAAW,0BAA4BA,EAAE,SAAW,4BACnFA,EAAE,SAAWf,CACvB,EAEKiB,EAAqD,CACvD,CAAE,IAAK,MAAO,MAAO,MAAO,MAAO1B,EAAU,MAAA,EAC7C,CAAE,IAAK,UAAW,MAAO,UAAW,MAAOA,EAAU,OAAOwB,GAAKA,EAAE,OAAO,WAAW,SAAS,CAAC,EAAE,MAAA,EACjG,CAAE,IAAK,SAAU,MAAO,SAAU,MAAOxB,EAAU,OAAOwB,GAAKA,EAAE,SAAW,QAAQ,EAAE,MAAA,EACtF,CAAE,IAAK,QAAS,MAAO,SAAU,MAAOxB,EAAU,OAAOwB,GAAKA,EAAE,SAAW,OAAO,EAAE,MAAA,CAAO,EAGzFG,EAAcC,GAAeA,EAAI,IAAI,KAAKA,CAAC,EAAE,mBAAmB,QAAS,CAAE,IAAK,UAAW,MAAO,QAAS,KAAM,SAAA,CAAW,EAAI,IAChIC,EAAkBC,GAAeA,GAAK,KAAO,IAAIA,EAAE,eAAe,QAAS,CAAE,sBAAuB,CAAA,CAAG,CAAC,GAAK,IAEnH,OACIC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2EACV,SAAA,CAAAtC,EAAAA,IAACC,EAAA,CAAS,UAAU,iBAAA,CAAkB,EAAE,YAAA,EAC5C,EACAD,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,kDAAA,CAE7D,CAAA,EACJ,EACAsC,EAAAA,KAAC,SAAA,CACG,QAASjB,EACT,UAAU,4LAEV,SAAA,CAAArB,MAACuC,GAAU,KAAM,GAAI,UAAW7B,EAAU,eAAiB,GAAI,EAAE,UAAA,CAAA,CAAA,CACrE,EACJ,QAGC,MAAA,CAAI,UAAU,uCACV,SAAAuB,EAAK,IAAIO,GACNF,EAAAA,KAAC,SAAA,CAEG,QAAS,IAAMrB,EAAauB,EAAI,GAAG,EACnC,UAAW,6EAA6ExB,IAAcwB,EAAI,IAChG,qCACA,wGACN,GAEH,SAAA,CAAAA,EAAI,MAAM,IAACF,EAAAA,KAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,CAAA,IAAEE,EAAI,MAAM,GAAA,CAAA,CAAC,CAAA,CAAA,EAPtDA,EAAI,GAAA,CAShB,EACL,EAGC9B,SACI,MAAA,CAAI,UAAU,yCACX,SAAAV,EAAAA,IAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,CAAA,CACvG,EAIH,CAACU,GAAWsB,EAAkB,SAAW,GACtCM,OAAC,MAAA,CAAI,UAAU,oBACX,SAAA,CAAAtC,EAAAA,IAACC,EAAA,CAAS,UAAU,gDAAgD,KAAM,GAAI,EAC9ED,EAAAA,IAAC,KAAA,CAAG,UAAU,yDAAyD,SAAA,qBAAkB,EACzFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,mDAAA,CAE7D,CAAA,EACJ,EAIH,CAACU,GAAWsB,EAAkB,OAAS,GACpChC,EAAAA,IAAC,MAAA,CAAI,UAAU,aACV,SAAAgC,EAAkB,IAAIS,GAAY,CAC/B,MAAMC,EAAS3C,EAAW0C,EAAS,MAAM,GAAK1C,EAAW,MACnD4C,EAAmBF,EAAS,SAAW,4BAE7C,OACIzC,EAAAA,IAAC,MAAA,CAEG,UAAW,yFAAyF2C,EAAmB,4BAA8B,EACjJ,GAEJ,SAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,kEAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACX,SAAA,CAAAA,OAAC,OAAA,CAAK,UAAW,iFAAiFI,EAAO,KAAK,GACzG,SAAA,CAAAA,EAAO,KAAK,IAAEA,EAAO,KAAA,EAC1B,EACA1C,EAAAA,IAAC,QAAK,UAAU,2CACX,WAAS,gBAAkB,SAAW,oBAAsByC,EAAS,aAAA,CAC1E,CAAA,EACJ,EAEAH,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAtC,EAAAA,IAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,OAAI,EAC/DsC,EAAAA,KAAC,IAAA,CAAE,UAAU,8CAA+C,SAAA,CAAAF,EAAeK,EAAS,YAAY,EAAE,KAAA,CAAA,CAAG,CAAA,EACzG,SACC,MAAA,CACG,SAAA,CAAAzC,EAAAA,IAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,UAAO,QACjE,IAAA,CAAE,UAAU,8CAA+C,SAAAoC,EAAeK,EAAS,cAAc,CAAA,CAAE,CAAA,EACxG,SACC,MAAA,CACG,SAAA,CAAAzC,EAAAA,IAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,QAAK,QAC/D,IAAA,CAAE,UAAU,+CAAgD,SAAAkC,EAAWO,EAAS,UAAU,CAAA,CAAE,CAAA,EACjG,SACC,MAAA,CACG,SAAA,CAAAzC,EAAAA,IAAC,OAAA,CAAK,UAAU,2CAA2C,SAAA,MAAG,QAC7D,IAAA,CAAE,UAAU,+CAAgD,SAAAkC,EAAWO,EAAS,QAAQ,CAAA,CAAE,CAAA,CAAA,CAC/F,CAAA,EACJ,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACX,SAAA,CAAAA,EAAAA,KAAC,QAAK,UAAW,2BAA2BG,EAAS,eAAiB,qCAAuC,kCAAkC,GAC1I,SAAA,CAAAA,EAAS,qBAAkBrC,EAAA,CAAY,KAAM,GAAI,EAAKJ,EAAAA,IAACE,EAAA,CAAM,KAAM,EAAA,CAAI,EAAG,UACnEuC,EAAS,eAAiB,UAAUP,EAAWO,EAAS,cAAc,CAAC,GAAK,YAAA,EACxF,EACAH,EAAAA,KAAC,QAAK,UAAW,2BAA2BG,EAAS,kBAAoB,qCAAuC,kCAAkC,GAC7I,SAAA,CAAAA,EAAS,wBAAqBrC,EAAA,CAAY,KAAM,GAAI,EAAKJ,EAAAA,IAACE,EAAA,CAAM,KAAM,EAAA,CAAI,EAAG,OACzEuC,EAAS,kBAAoB,UAAUP,EAAWO,EAAS,iBAAiB,CAAC,GAAK,YAAA,CAAA,CAC3F,CAAA,CAAA,CACJ,CAAA,EACJ,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMvB,EAAgB0B,CAAQ,EACvC,UAAU,8LAEV,SAAA,CAAAzC,EAAAA,IAAC4C,EAAA,CAAI,KAAM,EAAA,CAAI,EAAE,OAAA,CAAA,CAAA,EAEpBD,GACG3C,EAAAA,IAAC,SAAA,CACG,QAAS,IAAM2B,EAAkBc,EAAS,EAAE,EAC5C,SAAU7B,IAAc6B,EAAS,GACjC,UAAU,kKAET,SAAA7B,IAAc6B,EAAS,GACpBH,EAAAA,KAAAO,EAAAA,SAAA,CAAE,SAAA,CAAA7C,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAAA,CAA4E,EAAE,aAAA,CAAA,CAAW,EAE3GsC,EAAAA,KAAAO,EAAAA,SAAA,CAAE,SAAA,CAAA7C,EAAAA,IAACG,EAAA,CAAQ,KAAM,EAAA,CAAI,EAAE,cAAA,CAAA,CAAY,CAAA,CAAA,CAE3C,CAAA,CAER,CAAA,CAAA,CACJ,CAAA,EAtEKsC,EAAS,EAAA,CAyE1B,CAAC,CAAA,CACL,EAIH3B,GACGd,EAAAA,IAAC,MAAA,CAAI,UAAU,2FAA2F,QAAS,IAAMe,EAAgB,IAAI,EACzI,SAAAuB,EAAAA,KAAC,OAAI,UAAU,+FAA+F,QAASQ,GAAKA,EAAE,kBAC1H,SAAA,CAAAR,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACX,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,0EACV,SAAA,CAAAtC,EAAAA,IAACC,EAAA,CAAS,UAAU,iBAAA,CAAkB,EAAE,mBAAA,EAC5C,EACAD,EAAAA,IAAC,UAAO,QAAS,IAAMe,EAAgB,IAAI,EAAG,UAAU,4FAA4F,SAAA,GAAA,CAAC,CAAA,EACzJ,EACAuB,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACT,SAAA,EAAA,IAAM,CACJ,MAAMS,EAAIhD,EAAWe,EAAa,MAAM,GAAKf,EAAW,MACxD,cACK,OAAA,CAAK,UAAW,iFAAiFgD,EAAE,KAAK,GACpG,SAAA,CAAAA,EAAE,KAAK,IAAEA,EAAE,KAAA,EAChB,CAER,GAAA,EAEAT,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACX,SAAA,CAAAtC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,eAAY,QACxE,IAAA,CAAE,UAAU,kDAAmD,SAAAoC,EAAetB,EAAa,YAAY,CAAA,CAAE,CAAA,EAC9G,EACAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACX,SAAA,CAAAtC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,mBAAgB,QAC5E,IAAA,CAAE,UAAU,kDAAmD,SAAAoC,EAAetB,EAAa,cAAc,CAAA,CAAE,CAAA,EAChH,EACAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACX,SAAA,CAAAtC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,aAAU,QACtE,IAAA,CAAE,UAAU,8CAA+C,SAAAkC,EAAWpB,EAAa,UAAU,CAAA,CAAE,CAAA,EACpG,EACAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACX,SAAA,CAAAtC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,WAAQ,QACpE,IAAA,CAAE,UAAU,8CAA+C,SAAAkC,EAAWpB,EAAa,QAAQ,CAAA,CAAE,CAAA,CAAA,CAClG,CAAA,EACJ,EAECA,EAAa,sBACVwB,EAAAA,KAAC,MAAA,CACG,SAAA,CAAAtC,EAAAA,IAAC,KAAA,CAAG,UAAU,8DAA8D,SAAA,qBAAkB,EAC9FA,EAAAA,IAAC,MAAA,CAAI,UAAU,6GACV,WAAa,oBAAA,CAClB,CAAA,EACJ,EAIJsC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAA,EAAAA,KAAC,OAAI,UAAW,yBAAyBxB,EAAa,eAAiB,0EAA4E,sCAAsC,GACrL,SAAA,CAAAd,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,mBAAgB,QAC5E,IAAA,CAAE,UAAW,yBAAyBc,EAAa,eAAiB,qCAAuC,eAAe,GACtH,SAAAA,EAAa,eAAiB,UAAUoB,EAAWpB,EAAa,cAAc,CAAC,GAAK,SAAA,CACzF,CAAA,EACJ,EACAwB,EAAAA,KAAC,OAAI,UAAW,yBAAyBxB,EAAa,kBAAoB,0EAA4E,sCAAsC,GACxL,SAAA,CAAAd,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,iBAAc,QAC1E,IAAA,CAAE,UAAW,yBAAyBc,EAAa,kBAAoB,qCAAuC,eAAe,GACzH,SAAAA,EAAa,kBAAoB,UAAUoB,EAAWpB,EAAa,iBAAiB,CAAC,GAAK,SAAA,CAC/F,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,EACJ,EAGAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,wHACX,SAAA,CAAAtC,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMe,EAAgB,IAAI,EACnC,UAAU,6KACb,SAAA,OAAA,CAAA,EAGAD,EAAa,SAAW,6BACrBd,EAAAA,IAAC,SAAA,CACG,QAAS,IAAM2B,EAAkBb,EAAa,EAAE,EAChD,SAAUF,IAAcE,EAAa,GACrC,UAAU,0JAET,SAAAF,IAAcE,EAAa,GACxBwB,EAAAA,KAAAO,EAAAA,SAAA,CAAE,SAAA,CAAA7C,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAAA,CAA4E,EAAE,aAAA,CAAA,CAAW,EAE3GsC,EAAAA,KAAAO,EAAAA,SAAA,CAAE,SAAA,CAAA7C,EAAAA,IAACG,EAAA,CAAQ,KAAM,EAAA,CAAI,EAAE,cAAA,CAAA,CAAY,CAAA,CAAA,CAE3C,CAAA,CAER,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,EAER,CAER"}